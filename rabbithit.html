<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…”å­çš„æ— å°½å‡çº§ä¹‹è·¯ - å®Œæ•´ç‰ˆ</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --panel-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --accent-color: #4caf50;
            --danger-color: #f44336;
            --rare-color: #9c27b0;
            --border-color: #444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 10px;
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 10px;
            height: 98vh;
            overflow: hidden;
            user-select: none; /* é˜²æ­¢åŒå‡»é€‰ä¸­æ–‡æœ¬ */
        }

        /* é€šç”¨æ ·å¼ */
        .panel {
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            padding: 10px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        h2, h3 { margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 5px; font-size: 16px;}
        button { cursor: pointer; background: var(--border-color); color: white; border: none; padding: 5px 10px; margin: 2px; border-radius: 3px; font-size: 12px; transition: background 0.2s; }
        button:hover { background: var(--accent-color); }
        button:disabled { opacity: 0.5; cursor: not-allowed; background: #333; }
        
        .progress-bar { width: 100%; height: 12px; background: #111; margin: 4px 0; border-radius: 6px; overflow: hidden; position: relative; border: 1px solid #333; }
        .progress-fill { height: 100%; background: var(--accent-color); width: 0%; transition: width 0.2s; }
        .progress-text { position: absolute; width: 100%; text-align: center; font-size: 9px; line-height: 12px; color: white; text-shadow: 1px 1px 1px black; top: 0; left: 0;}

        /* å·¦ä¾§é¢æ¿ï¼šå±æ€§ä¸è£…å¤‡ */
        #left-col { grid-column: 1; gap: 10px; }
        .stat-row { display: flex; justify-content: space-between; font-size: 12px; padding: 2px 0; border-bottom: 1px dashed #333; }
        
        /* è£…å¤‡æ ç½‘æ ¼ - è°ƒæ•´ä»¥æ˜¾ç¤ºåç§° */
        .equip-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 5px; 
        }
        .equip-slot { 
            aspect-ratio: 1; 
            background: #151515; 
            border: 1px dashed #555; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            font-size: 10px; 
            position: relative; 
            cursor: pointer; 
            color: #666;
            min-height: 70px;
            padding: 3px;
            text-align: center;
        }
        .equip-slot.filled { border: 1px solid var(--accent-color); color: white; background: #222; }
        
        /* è£…å¤‡æ å›¾æ ‡å’Œåç§°æ ·å¼ */
        .equip-slot > div:first-child {
            font-size: 20px;
            margin-bottom: 2px;
        }
        .equip-slot > div:nth-child(2) {
            font-size: 9px;
            line-height: 1.1;
            height: 20px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
        }
        
        .item-tooltip { display: none; position: absolute; background: rgba(0,0,0,0.95); border: 1px solid #888; z-index: 1000; padding: 8px; pointer-events: none; width: 220px; font-size: 12px; color: #ddd; box-shadow: 0 4px 8px rgba(0,0,0,0.5); }
        .equip-slot:hover .item-tooltip, .inv-item:hover .item-tooltip { display: block; top: 100%; left: 0; }

        /* ä¸­é—´é¢æ¿ï¼šæˆ˜æ–—ä¸æ—¥å¿— */
        #mid-col { grid-column: 2; display: flex; flex-direction: column; gap: 10px; }
        #battle-area { flex: 2; position: relative; background: #222; display: flex; justify-content: space-around; align-items: center; padding: 20px; border-radius: 5px; border: 1px solid #333;}
        .entity { width: 120px; text-align: center; display: flex; flex-direction: column; gap: 5px; }
        .entity-visual { font-size: 48px; margin-bottom: 5px; animation: bounce 2s infinite ease-in-out; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        
        .hp-bg { width: 100%; background: #330000; height: 16px; border-radius: 3px; border: 1px solid #555; position: relative; overflow: hidden; }
        .hp-bar { height: 100%; background: #d32f2f; width: 100%; transition: width 0.2s; }
        .hp-text { position: absolute; top:0; left:0; width:100%; font-size: 10px; line-height: 16px; text-shadow: 1px 1px 1px black; }
        
        #log-area { flex: 1; font-family: 'Consolas', monospace; font-size: 12px; color: #aaa; overflow-y: scroll; border-top: 1px solid #444; padding-top: 5px; background: #222; padding: 5px; border-radius: 5px;}
        .log-entry { margin-bottom: 3px; line-height: 1.4; border-bottom: 1px solid #2a2a2a; }
        .log-dmg { color: #ff6b6b; }
        .log-gain { color: #6bff6b; }
        .log-rare { color: #e040fb; font-weight: bold; }

        /* å³ä¾§é¢æ¿ï¼šåŠŸèƒ½åŒº */
        #right-col { grid-column: 3; gap: 10px; }
        .tabs { display: flex; gap: 2px; margin-bottom: 10px; flex-wrap: wrap;}
        .tabs button { flex: 1; font-size: 11px; padding: 6px 2px; }
        .tabs button.active-tab { background: var(--accent-color); }
        
        .tab-content { display: none; height: 100%; overflow-y: auto; }
        .tab-content.active { display: block; }

        /* èƒŒåŒ…ä¸å•†åº— - è°ƒæ•´ä»¥æ˜¾ç¤ºåç§° */
        .inventory-list { 
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            gap: 4px; 
            padding: 2px; 
        }
        .inv-item { 
            width: 100%; 
            aspect-ratio: 1; 
            background: #1a1a1a; 
            border: 1px solid #444; 
            cursor: pointer; 
            position: relative; 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            border-radius: 3px;
            min-height: 70px;
            padding: 3px;
        }
        .inv-item:hover { border-color: white; background: #333; }
        .inv-item.selected { border-color: var(--accent-color); box-shadow: 0 0 5px var(--accent-color); }
        
        /* èƒŒåŒ…ç‰©å“å›¾æ ‡å’Œåç§°æ ·å¼ */
        .inv-item > div:first-child {
            font-size: 24px;
            margin-bottom: 2px;
        }
        .inv-item > div:nth-child(2) {
            font-size: 9px;
            line-height: 1.1;
            text-align: center;
            height: 20px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            width: 100%;
        }
        
        .inv-count { 
            position: absolute; 
            bottom: 1px; 
            right: 2px; 
            font-size: 10px; 
            background: rgba(0,0,0,0.8); 
            padding: 0 2px; 
            border-radius: 2px; 
        }

        /* æŠ€èƒ½æ ‘ */
        .skill-tree { display: grid; grid-template-columns: 1fr; gap: 5px; }
        .skill-node { border: 1px solid #444; padding: 8px; font-size: 12px; display: flex; justify-content: space-between; align-items: center; background: #222; border-radius: 3px;}
        .skill-node.learned { border-color: var(--accent-color); background: #1a3a1a; }
        
        /* åœ°å›¾é€‰æ‹© */
        .map-select { display: flex; flex-direction: column; gap: 5px; }
        .map-btn { text-align: left; padding: 10px; background: #222; border: 1px solid #444; cursor: pointer; border-radius: 3px;}
        .map-btn:hover { background: #333; }
        .map-btn.active { background: var(--accent-color); border-color: var(--accent-color); }

        /* æˆå°± */
        .achievement { border: 1px solid #555; padding: 8px; margin-bottom: 5px; color: #888; font-size: 12px; display: flex; justify-content: space-between; align-items: center; background: #222;}
        .achievement.unlocked { border-color: gold; color: gold; background: rgba(255, 215, 0, 0.05); }
        
        /* æ‰‹æœºé€‚é… */
        @media (max-width: 768px) {
            body {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr;
                height: auto;
                min-height: 100vh;
                overflow-y: auto;
                padding: 5px;
                gap: 5px;
            }
            
            #left-col, #mid-col, #right-col {
                grid-column: 1;
                min-height: 200px;
            }
            
            #left-col {
                grid-row: 1;
                max-height: 300px;
            }
            
            #mid-col {
                grid-row: 2;
                max-height: 400px;
            }
            
            #right-col {
                grid-row: 3;
                min-height: 400px;
            }
            
            /* è°ƒæ•´æˆ˜æ–—åŒºåŸŸ */
            #battle-area {
                flex-direction: column;
                padding: 10px;
            }
            
            .entity {
                width: 100px;
            }
            
            .entity-visual {
                font-size: 32px;
            }
            
            /* è°ƒæ•´æ ‡ç­¾é¡µ */
            .tabs {
                flex-wrap: wrap;
            }
            
            .tabs button {
                flex: 1 0 45%;
                font-size: 10px;
                padding: 8px 2px;
                margin: 1px;
            }
            
            /* è°ƒæ•´èƒŒåŒ…å’Œå•†åº—ç½‘æ ¼ */
            .inventory-list {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .equip-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            /* è°ƒæ•´è£…å¤‡æ å’ŒèƒŒåŒ…ç‰©å“æ˜¾ç¤º */
            .equip-slot, .inv-item {
                min-height: 60px;
                padding: 2px;
            }
            
            .equip-slot > div:first-child,
            .inv-item > div:first-child {
                font-size: 16px;
            }
            
            .equip-slot > div:nth-child(2),
            .inv-item > div:nth-child(2) {
                font-size: 8px;
                height: 16px;
            }
            
            /* è°ƒæ•´æŠ€èƒ½æ ‘ */
            .skill-node {
                flex-direction: column;
                align-items: flex-start;
                padding: 5px;
            }
            
            .skill-node button {
                margin-top: 5px;
                align-self: flex-end;
            }
            
            /* è°ƒæ•´æŒ‰é’®ç»„ */
            #mid-col > div:first-of-type {
                flex-wrap: wrap;
            }
            
            #mid-col > div:first-of-type button {
                flex: 1 0 45%;
                margin: 2px;
                font-size: 11px;
                padding: 8px 5px;
            }
            
            /* è°ƒæ•´å±æ€§æ˜¾ç¤º */
            .stat-row {
                font-size: 11px;
                padding: 1px 0;
            }
            
            /* è°ƒæ•´è£…å¤‡æ  */
            .equip-slot {
                font-size: 8px;
            }
            
            .item-tooltip {
                width: 180px;
                font-size: 10px;
            }
            
            /* æ—¥å¿—åŒºåŸŸè°ƒæ•´ */
            #log-area {
                font-size: 10px;
                max-height: 150px;
            }
            
            .log-entry {
                line-height: 1.3;
            }
        }
        
        .skill-node.on-cd {
            opacity: 0.6;
            background: #333;
        }

        /* æ‰¹é‡é€‰ä¸­æ ·å¼ */
        .inv-item.batch-selected {
            border: 2px solid #ffeb3b !important;
            box-shadow: 0 0 10px #ffeb3b;
            background: rgba(255, 235, 59, 0.1);
        }

        /* æ‰¹é‡å‡ºå”®æŒ‰é’®ç‰¹æ®Šæ ·å¼ */
        #btn-batch-sell {
            background: linear-gradient(45deg, #ff9800, #ff5722);
            font-weight: bold;
        }

        #btn-batch-sell:hover:not(:disabled) {
            background: linear-gradient(45deg, #ffb74d, #ff8a65);
        }

        #btn-batch-sell:disabled {
            background: #666;
            cursor: not-allowed;
        }

        #btn-confirm-batch {
            background: linear-gradient(45deg, #4caf50, #45a049) !important;
        }

        #btn-cancel-batch {
            background: linear-gradient(45deg, #f44336, #da190b) !important;
        }

        /* è¶…å°å±å¹•é€‚é… */
        @media (max-width: 480px) {
            .tabs button {
                flex: 1 0 100%;
            }
            
            #mid-col > div:first-of-type button {
                flex: 1 0 100%;
            }
            
            .inventory-list, .equip-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .entity {
                width: 80px;
            }
            
            .entity-visual {
                font-size: 24px;
            }
            
            /* è¿›ä¸€æ­¥è°ƒæ•´ç‰©å“æ˜¾ç¤º */
            .equip-slot, .inv-item {
                min-height: 50px;
            }
            
            .equip-slot > div:first-child,
            .inv-item > div:first-child {
                font-size: 14px;
            }
            
            .equip-slot > div:nth-child(2),
            .inv-item > div:nth-child(2) {
                font-size: 7px;
                height: 14px;
            }
        }
        
        /* å•†åº—ç‰©å“ç‰¹æ®Šæ ·å¼ */
        .shop-item {
            border-color: #666 !important;
        }
        
        .shop-item:hover {
            border-color: #ff9800 !important;
        }

/* æ‰¹é‡åˆæˆæ ·å¼ */
.batch-controls {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    align-items: center;
    background: #222;
    padding: 8px;
    border-radius: 5px;
    border: 1px solid #444;
}

.batch-select {
    background: #333;
    color: white;
    border: 1px solid #555;
    padding: 5px;
    border-radius: 3px;
    font-size: 12px;
}

.batch-info {
    font-size: 11px;
    color: #aaa;
    margin-left: auto;
}

.batch-total {
    color: gold;
    font-weight: bold;
}

.recipe-mats {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-top: 5px;
}

.mat-item {
    font-size: 10px;
    padding: 2px 5px;
    background: #1a1a1a;
    border-radius: 3px;
    border: 1px solid #333;
}

.mat-ok {
    color: #6bff6b;
}

.mat-not-ok {
    color: #ff6b6b;
}

    </style>
</head>
<body>

    <!-- å·¦ä¾§ï¼šè§’è‰²ä¿¡æ¯ -->
    <div id="left-col" class="panel">
        <h2>è§’è‰²çŠ¶æ€</h2>
        <div class="stat-group">
            <div class="stat-row"><span>ç­‰çº§:</span> <span id="char-level">1</span></div>
            <div class="progress-bar"><div class="progress-fill" id="exp-bar"></div><div class="progress-text" id="exp-text">EXP</div></div>
            <div class="stat-row"><span>HP:</span> <span id="char-hp">100/100</span></div>
            <div class="stat-row"><span>MP:</span> <span id="char-mp">50/50</span></div>
            <div class="stat-row"><span>é‡‘å¸:</span> <span id="char-gold" style="color:gold">0</span></div>
        </div>

        <h3>è£…å¤‡ (14æ ¼)</h3>
        <div class="equip-grid" id="equip-container"></div>

        <h3>æ ¸å¿ƒå±æ€§</h3>
        <div id="stats-display"></div>
        
        <div style="margin-top: auto; font-size: 10px; color: #666; text-align: center;">æ¯30ç§’è‡ªåŠ¨å­˜æ¡£</div>
    </div>

    <!-- ä¸­é—´ï¼šæˆ˜æ–— -->
    <div id="mid-col" class="panel">
        <div id="battle-area">
            <div class="entity" id="player-entity">
                <div class="entity-visual">ğŸ°</div>
                <div class="hp-bg">
                    <div class="hp-bar" id="player-hp-bar"></div>
                    <div class="hp-text" id="player-hp-text"></div>
                </div>
                <div>ç©å®¶</div>
            </div>
            <div style="font-size: 24px; color: #555;">VS</div>
            <div class="entity" id="enemy-entity">
                <div class="entity-visual" id="enemy-visual">ğŸº</div>
                <div class="hp-bg">
                    <div class="hp-bar" id="enemy-hp-bar"></div>
                    <div class="hp-text" id="enemy-hp-text"></div>
                </div>
                <div id="enemy-name">é‡ç‹¼</div>
            </div>
        </div>
        
        <div style="display:flex; gap:10px; justify-content: center; padding: 5px;">
             <button id="toggle-fight-btn" onclick="game.toggleFight()">æš‚åœæˆ˜æ–—</button>
             <button onclick="game.ui.clearLog()">æ¸…ç©ºæ—¥å¿—</button>
             <button onclick="game.save(true)">æ‰‹åŠ¨å­˜æ¡£</button>
             <button onclick="localStorage.clear(); location.reload();" style="background: #522;">åˆ æ¡£é‡å¼€</button>
        </div>

        <div id="log-area"></div>
    </div>

    <!-- å³ä¾§ï¼šåŠŸèƒ½é¢æ¿ -->
    <div id="right-col" class="panel">
        <div class="tabs" id="main-tabs">
            <button onclick="game.ui.switchTab('inventory')" class="active-tab">èƒŒåŒ…</button>
            <button onclick="game.ui.switchTab('skills')">æŠ€èƒ½</button>
            <button onclick="game.ui.switchTab('craft')">åˆ¶é€ </button>
            <button onclick="game.ui.switchTab('map')">åœ°å›¾</button>
            <button onclick="game.ui.switchTab('shop')">å•†åº—</button>
            <button onclick="game.ui.switchTab('achievement')">æˆå°±</button>
        </div>

        <!-- èƒŒåŒ… -->
<div id="tab-inventory" class="tab-content active">
    <h3>èƒŒåŒ… (<span id="inv-count">0</span>/50)</h3>
    <div class="inventory-list" id="inventory-grid"></div>
    <div id="batch-sell-info" style="margin: 10px 0; padding: 5px; background: #333; border-radius: 3px; font-size: 12px; text-align: center;">
    </div>
    
    <div id="item-details" style="margin-top:10px; font-size:12px; min-height: 60px; border-top:1px solid #444; padding-top:5px; color: #ccc;">
        ç‚¹å‡»ç‰©å“æŸ¥çœ‹è¯¦æƒ…
    </div>
    
    <!-- æ™®é€šæ¨¡å¼æŒ‰é’® -->
    <div id="normal-buttons" style="margin-top:5px; display: flex; gap: 5px;">
        <button id="btn-equip" disabled onclick="game.inventory.equipSelectedItem()" style="flex:1">è£…å¤‡</button>
        <button id="btn-sell" disabled onclick="game.shop.sellSelectedItem()" style="flex:1">å‡ºå”®</button>
        <button id="btn-enhance-entry" disabled onclick="game.ui.switchTab('craft')" style="flex:1">å»å¼ºåŒ–</button>
        <button id="btn-batch-sell" onclick="game.startBatchSell()" style="flex:1">æ‰¹é‡å‡ºå”®</button>
    </div>
    
    <!-- æ‰¹é‡å‡ºå”®æ¨¡å¼æŒ‰é’® -->
    <div id="batch-buttons" style="margin-top:5px; display: none; gap: 5px;">
        <button id="btn-confirm-batch" onclick="game.confirmBatchSell()" style="flex:2; background: #4caf50;">ç¡®è®¤å‡ºå”®</button>
        <button id="btn-cancel-batch" onclick="game.cancelBatchSell()" style="flex:1; background: #f44336;">å–æ¶ˆ</button>
    </div>
</div>

        <!-- æŠ€èƒ½ -->
        <div id="tab-skills" class="tab-content">
            <h3>æŠ€èƒ½ä¹¦ (SP: <span id="skill-points" style="color: gold">0</span>)</h3>
            <div style="font-size: 10px; color: #888; margin-bottom: 5px;">æŠ€èƒ½ç†Ÿç»ƒåº¦: Lv.<span id="skill-exp-level">1</span></div>
            <div class="progress-bar"><div class="progress-fill" id="skill-exp-bar"></div></div>
            <div class="skill-tree" id="skill-list" style="margin-top: 10px;"></div>
        </div>

        <!-- åˆæˆ/å¼ºåŒ– -->
        <div id="tab-craft" class="tab-content">
            <h3>è£…å¤‡å¼ºåŒ–</h3>
            <div style="font-size: 10px; color: #888; margin-bottom: 5px;">å¼ºåŒ–ç†Ÿç»ƒåº¦ (æˆåŠŸç‡+<span id="enhance-bonus">0</span>%)</div>
            <div class="progress-bar"><div class="progress-fill" id="enhance-exp-bar"></div></div>
            <div style="padding: 10px; background: #222; text-align: center; margin-top: 5px; border-radius: 5px;">
                <div id="enhance-target-name" style="color: #aaa; margin-bottom: 5px;">è¯·åœ¨èƒŒåŒ…ä¸­å…ˆé€‰ä¸­ä¸€ä»¶è£…å¤‡</div>
                <button id="btn-do-enhance" onclick="game.crafting.enhance()" disabled>å¼ºåŒ–è£…å¤‡ (æ¶ˆè€—é‡‘å¸)</button>
            </div>

            <h3 style="margin-top: 20px;">ç‰©å“åˆæˆ (è§£é” Lv.<span id="craft-level">1</span>)</h3>
            <div class="progress-bar"><div class="progress-fill" id="craft-exp-bar"></div></div>
            <div id="recipe-list" style="display:flex; flex-direction:column; gap:5px; margin-top: 10px;"></div>
        </div>

        <!-- åœ°å›¾ -->
        <div id="tab-map" class="tab-content">
            <h3>ä¸–ç•Œåœ°å›¾</h3>
            <div class="map-select" id="map-list"></div>
        </div>

        <!-- å•†åº— -->
        <div id="tab-shop" class="tab-content">
            <h3>æ‚è´§é“º</h3>
            <div style="font-size: 11px; color: #888; margin-bottom: 5px;">ä½ä»·æ”¶è´­ï¼Œé«˜ä»·å‡ºå”®</div>
            <div class="inventory-list" id="shop-grid"></div>
        </div>
        
        <!-- æˆå°± -->
        <div id="tab-achievement" class="tab-content">
            <h3>æˆå°±è®°å½•</h3>
            <div id="achievement-list"></div>
        </div>
    </div>

<script>
/**
 * é…ç½®
 */
const CONFIG = {
    STATS: {
        DMG_TYPES: ['blunt', 'sharp', 'magic', 'range'], 
        DEF_TYPES: ['heavy', 'light', 'shield', 'coat'], 
        BASE: ['hp', 'mp', 'hpRegen', 'mpRegen'],
        COMBAT: ['dodge', 'crit', 'critDmg', 'accuracy', 'lifesteal', 'resist', 'resistPct']
    },
    SLOTS: [
        'head', 'chest', 'legs', 'boots', 
        'mainHand', 'offHand', 
        'necklace', 'ring1', 'ring2', 
        'gloves', 'belt', 'cape', 
        'artifact', 'soul' 
    ],
    EXP_BASE: 100,
    EXP_FACTOR: 1.1
};

const TEXT = {
    stats: {
        blunt: "é’å™¨", sharp: "åˆ©å™¨", magic: "é­”æ³•", range: "è¿œç¨‹",
        heavy: "é‡ç”²", light: "è½»ç”²", shield: "æŠ¤ç›¾", coat: "æ¶‚å±‚",
        hp: "HP", mp: "MP", hpRegen: "å›è¡€", mpRegen: "å›é­”",
        dodge: "é—ªé¿", crit: "æš´å‡»", critDmg: "æš´ä¼¤", accuracy: "ç²¾å‡†",
        lifesteal: "å¸è¡€", resist: "æŠµæŠ—", resistPct: "æŠ—æ€§%"
    },
    slots: {
        head: "å¤´éƒ¨", chest: "èƒ¸ç”²", legs: "è…¿éƒ¨", boots: "è„šéƒ¨",
        mainHand: "ä¸»æ‰‹", offHand: "å‰¯æ‰‹", necklace: "é¡¹é“¾", ring1: "æˆ’æŒ‡", ring2: "æˆ’æŒ‡",
        gloves: "æ‰‹å¥—", belt: "è…°å¸¦", cape: "æŠ«é£", artifact: "ç¥å™¨", soul: "çµé­‚"
    }
};

/**
 * æ•°æ®åº“
 */
class Database {
    constructor() {
        this.items = {
            // åŸºç¡€ææ–™ (ä»·æ ¼æŒ‰å…¬å¼è®¡ç®—: 1 * åœ°å›¾ç­‰çº§ / æ‰è½ç‡)
    'm_slime_gel': { name: 'å²è±å§†å‡èƒ¶', type: 'material', price: Math.round(1 * 1 / 0.3), stack: 99 },
    'm_rabbit_fur': { name: 'å…”æ¯›', type: 'material', price: Math.round(1 * 1 / 0.4), stack: 99 },
    'm_goblin_ear': { name: 'å“¥å¸ƒæ—è€³æœµ', type: 'material', price: Math.round(1 * 1 / 0.25), stack: 99 },
    'm_boar_tusk': { name: 'é‡çŒªç ç‰™', type: 'material', price: Math.round(1 * 1 / 0.35), stack: 99 },
    'm_wolf_fang': { name: 'ç‹¼ç‰™', type: 'material', price: Math.round(1 * 1 / 0.15), stack: 99 },
    
    // Lv.5 ææ–™
    'm_spider_silk': { name: 'èœ˜è››ä¸', type: 'material', price: Math.round(1 * 5 / 0.3), stack: 99 },
    'm_beetle_shell': { name: 'ç”²è™«å£³', type: 'material', price: Math.round(1 * 5 / 0.4), stack: 99 },
    'm_vine_whip': { name: 'è—¤è”“', type: 'material', price: Math.round(1 * 5 / 0.25), stack: 99 },
    'm_tiger_claw': { name: 'è™çˆª', type: 'material', price: Math.round(1 * 5 / 0.35), stack: 99 },
    'm_bear_pelt': { name: 'ç†Šçš®', type: 'material', price: Math.round(1 * 5 / 0.1), stack: 99 },
    
    // Lv.10 ææ–™
    'm_toxic_gland': { name: 'æ¯’è…º', type: 'material', price: Math.round(1 * 10 / 0.3), stack: 99 },
    'm_crab_claw': { name: 'èŸ¹é’³', type: 'material', price: Math.round(1 * 10 / 0.4), stack: 99 },
    'm_mud_core': { name: 'æ³¥æ ¸', type: 'material', price: Math.round(1 * 10 / 0.25), stack: 99 },
    'm_vulture_feather': { name: 'ç§ƒé¹«ç¾½æ¯›', type: 'material', price: Math.round(1 * 10 / 0.35), stack: 99 },
    'm_hydra_scale': { name: 'ä¹å¤´è›‡é³ç‰‡', type: 'material', price: Math.round(1 * 10 / 0.08), stack: 99 },
    
    // Lv.15 ææ–™
    'm_miner_pick': { name: 'çŸ¿å·¥é•', type: 'material', price: Math.round(1 * 15 / 0.3), stack: 99 },
    'm_bat_wing': { name: 'è™è ç¿…è†€', type: 'material', price: Math.round(1 * 15 / 0.4), stack: 99 },
    'm_stone_shard': { name: 'çŸ³ç‰‡', type: 'material', price: Math.round(1 * 15 / 0.25), stack: 99 },
    'm_worm_tooth': { name: 'è •è™«ç‰™é½¿', type: 'material', price: Math.round(1 * 15 / 0.35), stack: 99 },
    'm_burrower_horn': { name: 'æ˜åœ°å…½è§’', type: 'material', price: Math.round(1 * 15 / 0.06), stack: 99 },
    
    // Lv.20 ææ–™
    'm_bone_fragment': { name: 'éª¨ç‰‡', type: 'material', price: Math.round(1 * 20 / 0.3), stack: 99 },
    'm_ghost_essence': { name: 'æ€¨çµç²¾å', type: 'material', price: Math.round(1 * 20 / 0.4), stack: 99 },
    'm_rotting_flesh': { name: 'è…è‚‰', type: 'material', price: Math.round(1 * 20 / 0.25), stack: 99 },
    'm_necromancer_staff': { name: 'äº¡çµæ³•æ–', type: 'material', price: Math.round(1 * 20 / 0.35), stack: 99 },
    'm_bone_crown': { name: 'éª¸éª¨ç‹å† ', type: 'material', price: Math.round(1 * 20 / 0.05), stack: 99 },
    
    // Lv.25 ææ–™
    'm_lava_gel': { name: 'ç†”å²©å‡èƒ¶', type: 'material', price: Math.round(1 * 25 / 0.3), stack: 99 },
    'm_fire_scale': { name: 'ç«ç„°é³ç‰‡', type: 'material', price: Math.round(1 * 25 / 0.4), stack: 99 },
    'm_magma_rock': { name: 'å²©æµ†çŸ³', type: 'material', price: Math.round(1 * 25 / 0.25), stack: 99 },
    'm_firefly_wing': { name: 'ç«é¾™è‡ç¿…', type: 'material', price: Math.round(1 * 25 / 0.35), stack: 99 },
    'm_fiery_heart': { name: 'ç‚é­”ä¹‹å¿ƒ', type: 'material', price: Math.round(1 * 25 / 0.04), stack: 99 },
    
    // Lv.30 ææ–™
    'm_ice_tusk': { name: 'å†°éœœç ç‰™', type: 'material', price: Math.round(1 * 30 / 0.3), stack: 99 },
    'm_snow_spirit': { name: 'é›ªå¦–çµæ ¸', type: 'material', price: Math.round(1 * 30 / 0.4), stack: 99 },
    'm_mammoth_tusk': { name: 'çŒ›çŠ¸è±¡ç‰™', type: 'material', price: Math.round(1 * 30 / 0.25), stack: 99 },
    'm_ice_scale': { name: 'å†°é¾™é³', type: 'material', price: Math.round(1 * 30 / 0.35), stack: 99 },
    'm_ice_crown': { name: 'å†°é›ªç‹å† ', type: 'material', price: Math.round(1 * 30 / 0.03), stack: 99 },
    
    // Lv.35 ææ–™
    'm_thunder_feather': { name: 'é›·é¸Ÿç¾½æ¯›', type: 'material', price: Math.round(1 * 35 / 0.3), stack: 99 },
    'm_storm_core': { name: 'é£æš´æ ¸å¿ƒ', type: 'material', price: Math.round(1 * 35 / 0.4), stack: 99 },
    'm_eel_spine': { name: 'ç”µé³—è„Šéª¨', type: 'material', price: Math.round(1 * 35 / 0.25), stack: 99 },
    'm_thunder_horn': { name: 'é›·é¸£å…½è§’', type: 'material', price: Math.round(1 * 35 / 0.35), stack: 99 },
    'm_thunderbolt': { name: 'é›·ç¥ä¹‹çŸ›', type: 'material', price: Math.round(1 * 35 / 0.02), stack: 99 },
    
    // Lv.40 ææ–™
    'm_ancient_bark': { name: 'å¤æ ‘çš®', type: 'material', price: Math.round(1 * 40 / 0.3), stack: 99 },
    'm_poison_dust': { name: 'å‰§æ¯’ç²‰å°˜', type: 'material', price: Math.round(1 * 40 / 0.4), stack: 99 },
    'm_jungle_fang': { name: 'ä¸›æ—æ¯’ç‰™', type: 'material', price: Math.round(1 * 40 / 0.25), stack: 99 },
    'm_fairy_arrow': { name: 'å¦–ç²¾ç®­çŸ¢', type: 'material', price: Math.round(1 * 40 / 0.35), stack: 99 },
    'm_jade_scale': { name: 'ç¿¡ç¿ é¾™é³', type: 'material', price: Math.round(1 * 40 / 0.015), stack: 99 },
    
    // Lv.45 ææ–™
    'm_void_dust': { name: 'è™šç©ºå°˜åŸƒ', type: 'material', price: Math.round(1 * 45 / 0.3), stack: 99 },
    'm_chaos_claw': { name: 'æ··æ²Œå…½çˆª', type: 'material', price: Math.round(1 * 45 / 0.4), stack: 99 },
    'm_shadow_veil': { name: 'æš—å½±é¢çº±', type: 'material', price: Math.round(1 * 45 / 0.25), stack: 99 },
    'm_torment_thread': { name: 'ç—›è‹¦ä¸çº¿', type: 'material', price: Math.round(1 * 45 / 0.35), stack: 99 },
    'm_abyss_crown': { name: 'æ·±æ¸Šç‹å† ', type: 'material', price: Math.round(1 * 45 / 0.01), stack: 99 },
    
    // é«˜çº§ææ–™ (Lv.50+)
    'm_crystal_shard': { name: 'æ°´æ™¶ç¢ç‰‡', type: 'material', price: Math.round(1 * 50 / 0.35), stack: 99 },
    'm_light_essence': { name: 'å…‰ä¹‹ç²¾å', type: 'material', price: Math.round(1 * 50 / 0.4), stack: 99 },
    'm_crystal_core': { name: 'æ°´æ™¶æ ¸å¿ƒ', type: 'material', price: Math.round(1 * 50 / 0.3), stack: 99 },
    'm_prism_shard': { name: 'æ£±é•œç¢ç‰‡', type: 'material', price: Math.round(1 * 50 / 0.38), stack: 99 },
    'm_crystal_heart': { name: 'æ°´æ™¶ä¹‹å¿ƒ', type: 'material', price: Math.round(1 * 50 / 0.008), stack: 99 },

     // Lv.55 ææ–™
'm_dragon_scale': { name: 'é¾™é³', type: 'material', price: Math.round(1 * 55 / 0.3), stack: 99 },
'm_drake_claw': { name: 'é¾™äººçˆª', type: 'material', price: Math.round(1 * 55 / 0.4), stack: 99 },
'm_wyvern_wing': { name: 'é£é¾™ç¿¼', type: 'material', price: Math.round(1 * 55 / 0.25), stack: 99 },
'm_dragon_blood': { name: 'é¾™è¡€', type: 'material', price: Math.round(1 * 55 / 0.35), stack: 99 },
'm_ancient_dragon_heart': { name: 'å¤é¾™ä¹‹å¿ƒ', type: 'material', price: Math.round(1 * 55 / 0.007), stack: 99 },

// Lv.60 ææ–™
'm_time_sand': { name: 'æ—¶ä¹‹æ²™', type: 'material', price: Math.round(1 * 60 / 0.3), stack: 99 },
'm_space_fragment': { name: 'ç©ºé—´ç¢ç‰‡', type: 'material', price: Math.round(1 * 60 / 0.4), stack: 99 },
'm_future_tech': { name: 'æœªæ¥ç§‘æŠ€', type: 'material', price: Math.round(1 * 60 / 0.25), stack: 99 },
'm_past_echo': { name: 'è¿‡å»å›å“', type: 'material', price: Math.round(1 * 60 / 0.35), stack: 99 },
'm_temporal_core': { name: 'æ—¶ç©ºæ ¸å¿ƒ', type: 'material', price: Math.round(1 * 60 / 0.006), stack: 99 },

// Lv.65 ææ–™
'm_stardust': { name: 'æ˜Ÿå°˜', type: 'material', price: Math.round(1 * 65 / 0.3), stack: 99 },
'm_comet_fragment': { name: 'å½—æ˜Ÿç¢ç‰‡', type: 'material', price: Math.round(1 * 65 / 0.4), stack: 99 },
'm_nebula_gel': { name: 'æ˜Ÿäº‘å‡èƒ¶', type: 'material', price: Math.round(1 * 65 / 0.25), stack: 99 },
'm_black_hole_shard': { name: 'é»‘æ´ç¢ç‰‡', type: 'material', price: Math.round(1 * 65 / 0.35), stack: 99 },
'm_star_heart': { name: 'æ˜Ÿè¾°ä¹‹å¿ƒ', type: 'material', price: Math.round(1 * 65 / 0.005), stack: 99 },

// Lv.70 ææ–™
'm_fire_essence': { name: 'ç«å…ƒç´ ç²¾å', type: 'material', price: Math.round(1 * 70 / 0.3), stack: 99 },
'm_water_essence': { name: 'æ°´å…ƒç´ ç²¾å', type: 'material', price: Math.round(1 * 70 / 0.4), stack: 99 },
'm_wind_essence': { name: 'é£å…ƒç´ ç²¾å', type: 'material', price: Math.round(1 * 70 / 0.25), stack: 99 },
'm_earth_essence': { name: 'åœŸå…ƒç´ ç²¾å', type: 'material', price: Math.round(1 * 70 / 0.35), stack: 99 },
'm_primal_essence': { name: 'åŸå§‹ç²¾å', type: 'material', price: Math.round(1 * 70 / 0.004), stack: 99 },

// Lv.75 ææ–™
'm_angel_feather': { name: 'å¤©ä½¿ç¾½æ¯›', type: 'material', price: Math.round(1 * 75 / 0.3), stack: 99 },
'm_demon_horn': { name: 'æ¶é­”ä¹‹è§’', type: 'material', price: Math.round(1 * 75 / 0.4), stack: 99 },
'm_titan_blood': { name: 'æ³°å¦ä¹‹è¡€', type: 'material', price: Math.round(1 * 75 / 0.25), stack: 99 },
'm_fairy_dust': { name: 'ç²¾çµç²‰å°˜', type: 'material', price: Math.round(1 * 75 / 0.35), stack: 99 },
'm_godly_essence': { name: 'ç¥æ€§ç²¾å', type: 'material', price: Math.round(1 * 75 / 0.003), stack: 99 },

// Lv.80 ææ–™
'm_chaos_shard': { name: 'æ··æ²Œç¢ç‰‡', type: 'material', price: Math.round(1 * 80 / 0.3), stack: 99 },
'm_void_fang': { name: 'è™šç©ºç ç‰™', type: 'material', price: Math.round(1 * 80 / 0.4), stack: 99 },
'm_entropy_core': { name: 'ç†µå¢æ ¸å¿ƒ', type: 'material', price: Math.round(1 * 80 / 0.25), stack: 99 },
'm_chaos_thread': { name: 'æ··æ²Œä¸çº¿', type: 'material', price: Math.round(1 * 80 / 0.35), stack: 99 },
'm_chaos_heart': { name: 'æ··æ²Œä¹‹å¿ƒ', type: 'material', price: Math.round(1 * 80 / 0.002), stack: 99 },

// Lv.85 ææ–™
'm_creation_shard': { name: 'åˆ›ä¸–ç¢ç‰‡', type: 'material', price: Math.round(1 * 85 / 0.3), stack: 99 },
'm_time_essence': { name: 'æ—¶é—´ç²¾å', type: 'material', price: Math.round(1 * 85 / 0.4), stack: 99 },
'm_space_weave': { name: 'ç©ºé—´ç»‡çº¿', type: 'material', price: Math.round(1 * 85 / 0.25), stack: 99 },
'm_life_thread': { name: 'ç”Ÿå‘½ä¸çº¿', type: 'material', price: Math.round(1 * 85 / 0.35), stack: 99 },
'm_creation_spark': { name: 'åˆ›ä¸–ç«èŠ±', type: 'material', price: Math.round(1 * 85 / 0.0015), stack: 99 },

// Lv.90 ææ–™
'm_apocalypse_shard': { name: 'ç»ˆæœ«ç¢ç‰‡', type: 'material', price: Math.round(1 * 90 / 0.3), stack: 99 },
'm_void_essence': { name: 'è™šæ— ç²¾å', type: 'material', price: Math.round(1 * 90 / 0.4), stack: 99 },
'm_end_time_scales': { name: 'ç»ˆæ—¶é³ç‰‡', type: 'material', price: Math.round(1 * 90 / 0.25), stack: 99 },
'm_nothingness_arrow': { name: 'è™šæ— ä¹‹ç®­', type: 'material', price: Math.round(1 * 90 / 0.35), stack: 99 },
'm_final_breath': { name: 'ç»ˆæœ«ä¹‹æ¯', type: 'material', price: Math.round(1 * 90 / 0.001), stack: 99 },

// Lv.95 ææ–™
'm_infinity_shard': { name: 'æ— é™ç¢ç‰‡', type: 'material', price: Math.round(1 * 95 / 0.3), stack: 99 },
'm_eternity_essence': { name: 'æ°¸æ’ç²¾å', type: 'material', price: Math.round(1 * 95 / 0.4), stack: 99 },
'm_endless_blade': { name: 'æ— å°½ä¹‹åˆƒ', type: 'material', price: Math.round(1 * 95 / 0.25), stack: 99 },
'm_immortal_arrow': { name: 'ä¸æœ½ä¹‹ç®­', type: 'material', price: Math.round(1 * 95 / 0.35), stack: 99 },
'm_infinity_core': { name: 'æ— é™æ ¸å¿ƒ', type: 'material', price: Math.round(1 * 95 / 0.0005), stack: 99 },


// æ¶ˆè€—å“
    'p_heal': { name: 'å°ç”Ÿå‘½è¯æ°´', type: 'consumable', price: 20, stack: 20, effect: { hp: 50 } },
    'p_mana': { name: 'å°é­”åŠ›è¯æ°´', type: 'consumable', price: 30, stack: 20, effect: { mp: 40 } },
    'p_toxic_potion': { name: 'æ¯’è¯æ°´', type: 'consumable', price: 50, stack: 10, effect: { poison: 20 } },
    'p_healing_salve': { name: 'æ²»ç–—è¯è†', type: 'consumable', price: 80, stack: 10, effect: { hp: 100 } },
    'p_mana_essence': { name: 'é­”åŠ›ç²¾å', type: 'consumable', price: 100, stack: 10, effect: { mp: 80 } },

 // 1-5çº§è£…å¤‡ (æ–°æ‰‹è£…å¤‡)
'10001': { name: 'æœ¨å‰‘', type: 'mainHand', rarity: 1, stats: { sharp: 5, accuracy: 5 }, price: 10 },
'10002': { name: 'æœ¨æ£’', type: 'mainHand', rarity: 1, stats: { blunt: 6 }, price: 10 },
'10003': { name: 'æ¯æœ¨æ–', type: 'mainHand', rarity: 1, stats: { magic: 5, mp: 10 }, price: 15 },
'10004': { name: 'å¼¹å¼“', type: 'mainHand', rarity: 1, stats: { range: 4, accuracy: 10 }, price: 12 },
'10005': { name: 'å¸ƒå¤´å¸¦', type: 'head', rarity: 1, stats: { light: 2, hp: 5 }, price: 8 },
'10006': { name: 'å¸ƒè¡£', type: 'chest', rarity: 1, stats: { light: 4, hp: 10 }, price: 15 },
'10007': { name: 'å¸ƒè£¤', type: 'legs', rarity: 1, stats: { light: 3, hp: 8 }, price: 8 },
'10008': { name: 'è‰é‹', type: 'boots', rarity: 1, stats: { light: 2, dodge: 2 }, price: 6 },
'10009': { name: 'å°åœ†ç›¾', type: 'offHand', rarity: 1, stats: { shield: 5, heavy: 3 }, price: 10 },
'10010': { name: 'éª¨åˆ¶é¡¹é“¾', type: 'necklace', rarity: 1, stats: { hp: 5, mp: 5 }, price: 7 },
'10011': { name: 'é“œæˆ’æŒ‡', type: 'ring1', rarity: 1, stats: { accuracy: 3 }, price: 5 },
'10012': { name: 'é“æˆ’æŒ‡', type: 'ring2', rarity: 1, stats: { heavy: 2 }, price: 5 },
'10013': { name: 'å¸ƒæ‰‹å¥—', type: 'gloves', rarity: 1, stats: { light: 2, accuracy: 3 }, price: 6 },
'10014': { name: 'éº»ç»³è…°å¸¦', type: 'belt', rarity: 1, stats: { hp: 8 }, price: 4 },
'10015': { name: 'ç ´æŠ«é£', type: 'cape', rarity: 1, stats: { dodge: 3 }, price: 8 },

// 5-10çº§è£…å¤‡ (åˆçº§è£…å¤‡)
'10051': { name: 'æ¯’æ¶²åŒ•é¦–', type: 'mainHand', rarity: 2, stats: { sharp: 12, accuracy: 8 }, price: 150 },
'10052': { name: 'èŸ¹é’³ç›¾', type: 'offHand', rarity: 2, stats: { shield: 10, heavy: 5 }, price: 120 },
'10053': { name: 'æ³¥æ³æ³æŠ¤ç”²', type: 'chest', rarity: 2, stats: { heavy: 15, hp: 20 }, price: 180 },
'10054': { name: 'ç¾½ç¿¼æŠ«é£', type: 'cape', rarity: 2, stats: { light: 8, dodge: 5 }, price: 130 },
'10055': { name: 'çŸ¿å·¥å¤´ç›”', type: 'head', rarity: 2, stats: { heavy: 8, hp: 15 }, price: 110 },
'10056': { name: 'çš®è£¤', type: 'legs', rarity: 2, stats: { light: 8, hp: 15 }, price: 80 },
'10057': { name: 'çš®é´', type: 'boots', rarity: 2, stats: { light: 6, dodge: 5 }, price: 70 },
'10058': { name: 'é“ç›¾', type: 'offHand', rarity: 2, stats: { shield: 12, heavy: 8 }, price: 100 },
'10059': { name: 'é“¶é¡¹é“¾', type: 'necklace', rarity: 2, stats: { hp: 12, mp: 12 }, price: 90 },
'10060': { name: 'é“¶æˆ’æŒ‡', type: 'ring1', rarity: 2, stats: { accuracy: 8, dodge: 3 }, price: 60 },
'10061': { name: 'é‡‘æˆ’æŒ‡', type: 'ring2', rarity: 2, stats: { heavy: 5, hp: 10 }, price: 70 },
'10062': { name: 'çš®æ‰‹å¥—', type: 'gloves', rarity: 2, stats: { light: 5, accuracy: 8 }, price: 65 },
'10063': { name: 'çš®å¸¦', type: 'belt', rarity: 2, stats: { hp: 15, mp: 10 }, price: 55 },
'10064': { name: 'æ—…è¡ŒæŠ«é£', type: 'cape', rarity: 2, stats: { dodge: 8, light: 4 }, price: 85 },

// 10-15çº§è£…å¤‡ (ä¸­çº§è£…å¤‡)
'10101': { name: 'ä¹å¤´è›‡å‰‘', type: 'mainHand', rarity: 3, stats: { sharp: 25, accuracy: 12 }, price: 350 },
'10102': { name: 'è™è ç¿…è†€', type: 'cape', rarity: 2, stats: { light: 6, dodge: 8 }, price: 140 },
'10103': { name: 'çŸ³é”¤', type: 'mainHand', rarity: 2, stats: { blunt: 18, accuracy: 5 }, price: 160 },
'10104': { name: 'è •è™«é•¿çŸ›', type: 'mainHand', rarity: 2, stats: { sharp: 15, range: 5 }, price: 145 },
'10105': { name: 'æ˜åœ°æ–§', type: 'mainHand', rarity: 3, stats: { sharp: 22, blunt: 10 }, price: 320 },
'10106': { name: 'é”ç”²è£¤', type: 'legs', rarity: 3, stats: { heavy: 12, hp: 25 }, price: 180 },
'10107': { name: 'é”ç”²é´', type: 'boots', rarity: 3, stats: { heavy: 10, dodge: 6 }, price: 160 },
'10108': { name: 'é’¢ç›¾', type: 'offHand', rarity: 3, stats: { shield: 18, heavy: 12 }, price: 200 },
'10109': { name: 'é‡‘é¡¹é“¾', type: 'necklace', rarity: 3, stats: { hp: 20, mp: 20, mpRegen: 2 }, price: 170 },
'10110': { name: 'å®çŸ³æˆ’æŒ‡', type: 'ring1', rarity: 3, stats: { accuracy: 12, crit: 3 }, price: 140 },
'10111': { name: 'é­”æ³•æˆ’æŒ‡', type: 'ring2', rarity: 3, stats: { mp: 25, magic: 5 }, price: 150 },
'10112': { name: 'é”ç”²æ‰‹å¥—', type: 'gloves', rarity: 3, stats: { heavy: 8, accuracy: 12 }, price: 130 },
'10113': { name: 'åšçš®å¸¦', type: 'belt', rarity: 3, stats: { hp: 25, hpRegen: 2 }, price: 120 },
'10114': { name: 'åšæŠ«é£', type: 'cape', rarity: 3, stats: { dodge: 12, resist: 8 }, price: 190 },

// 15-20çº§è£…å¤‡ (é«˜çº§è£…å¤‡)
'10151': { name: 'éª¨å‰‘', type: 'mainHand', rarity: 3, stats: { sharp: 30, crit: 5 }, price: 420 },
'10152': { name: 'å¹½çµæ³•è¢', type: 'chest', rarity: 3, stats: { light: 12, mp: 30 }, price: 380 },
'10153': { name: 'è…åŒ–ç›¾ç‰Œ', type: 'offHand', rarity: 3, stats: { shield: 15, resist: 10 }, price: 350 },
'10154': { name: 'äº¡çµæ³•æ–', type: 'mainHand', rarity: 3, stats: { magic: 28, mp: 25 }, price: 450 },
'10155': { name: 'éª¨å† å¤´ç›”', type: 'head', rarity: 4, stats: { heavy: 12, hp: 30, crit: 3 }, price: 520 },
'10156': { name: 'æ¿ç”²è…¿', type: 'legs', rarity: 3, stats: { heavy: 18, hp: 35 }, price: 280 },
'10157': { name: 'æ¿ç”²é´', type: 'boots', rarity: 3, stats: { heavy: 15, dodge: 8 }, price: 250 },
'10158': { name: 'é‡ç›¾', type: 'offHand', rarity: 3, stats: { shield: 25, heavy: 18, resist: 10 }, price: 320 },
'10159': { name: 'é“‚é‡‘é¡¹é“¾', type: 'necklace', rarity: 3, stats: { hp: 30, mp: 30, mpRegen: 3 }, price: 260 },
'10160': { name: 'åŠ›é‡æˆ’æŒ‡', type: 'ring1', rarity: 3, stats: { blunt: 8, sharp: 8 }, price: 220 },
'10161': { name: 'æ•æ·æˆ’æŒ‡', type: 'ring2', rarity: 3, stats: { dodge: 8, accuracy: 15 }, price: 230 },
'10162': { name: 'æ¿ç”²æ‰‹å¥—', type: 'gloves', rarity: 3, stats: { heavy: 12, accuracy: 15 }, price: 210 },
'10163': { name: 'é‡‘å±è…°å¸¦', type: 'belt', rarity: 3, stats: { hp: 35, heavy: 10 }, price: 200 },
'10164': { name: 'é­”æ³•æŠ«é£', type: 'cape', rarity: 3, stats: { dodge: 15, mp: 25, resist: 12 }, price: 270 },

// 20-25çº§è£…å¤‡
'10201': { name: 'ç†”å²©æ³•æ–', type: 'mainHand', rarity: 3, stats: { magic: 32, mp: 20 }, price: 480 },
'10202': { name: 'ç«é³æŠ¤ç”²', type: 'chest', rarity: 4, stats: { heavy: 20, hp: 40, resist: 5 }, price: 580 },
'10203': { name: 'ç†”å²©æŠ¤æ‰‹', type: 'gloves', rarity: 3, stats: { heavy: 8, blunt: 5 }, price: 320 },
'10204': { name: 'è¤ç«å¼“', type: 'mainHand', rarity: 3, stats: { range: 28, accuracy: 15 }, price: 460 },
'10205': { name: 'çƒˆç„°å·¨å‰‘', type: 'mainHand', rarity: 4, stats: { sharp: 45, crit: 8 }, price: 750 },
'10206': { name: 'é‡ç”²è…¿', type: 'legs', rarity: 4, stats: { heavy: 25, hp: 45, hpRegen: 3 }, price: 380 },
'10207': { name: 'é‡ç”²é´', type: 'boots', rarity: 4, stats: { heavy: 20, dodge: 10 }, price: 350 },
'10208': { name: 'å¡”ç›¾', type: 'offHand', rarity: 4, stats: { shield: 35, heavy: 25, resist: 15 }, price: 420 },
'10209': { name: 'é’»çŸ³é¡¹é“¾', type: 'necklace', rarity: 4, stats: { hp: 40, mp: 40, mpRegen: 5 }, price: 360 },
'10210': { name: 'æš´å‡»æˆ’æŒ‡', type: 'ring1', rarity: 4, stats: { crit: 10, critDmg: 20 }, price: 320 },
'10211': { name: 'ç²¾å‡†æˆ’æŒ‡', type: 'ring2', rarity: 4, stats: { accuracy: 20, dodge: 12 }, price: 330 },
'10212': { name: 'é‡ç”²æ‰‹å¥—', type: 'gloves', rarity: 4, stats: { heavy: 18, accuracy: 18, blunt: 5 }, price: 310 },
'10213': { name: 'æˆ˜å£«è…°å¸¦', type: 'belt', rarity: 4, stats: { hp: 45, hpRegen: 5, heavy: 12 }, price: 300 },
'10214': { name: 'éšåŒ¿æŠ«é£', type: 'cape', rarity: 4, stats: { dodge: 20, light: 15, resist: 18 }, price: 370 },

// 25-30çº§è£…å¤‡
'10251': { name: 'å†°ç‰™å‰‘', type: 'mainHand', rarity: 4, stats: { sharp: 38, accuracy: 12 }, price: 680 },
'10252': { name: 'é›ªé­‚æ³•è¢', type: 'chest', rarity: 4, stats: { light: 15, mp: 50, resist: 8 }, price: 720 },
'10253': { name: 'çŒ›çŠ¸çŠ¸æ¿ç”²', type: 'chest', rarity: 4, stats: { heavy: 30, hp: 60 }, price: 800 },
'10254': { name: 'å†°é³æŠ¤ç”²', type: 'chest', rarity: 4, stats: { heavy: 25, hp: 45, resist: 10 }, price: 780 },
'10255': { name: 'é›·å¼“', type: 'mainHand', rarity: 4, stats: { range: 35, accuracy: 20 }, price: 820 },
'10256': { name: 'é¾™é³è…¿ç”²', type: 'legs', rarity: 4, stats: { heavy: 32, hp: 55, hpRegen: 5 }, price: 480 },
'10257': { name: 'é¾™é³æˆ˜é´', type: 'boots', rarity: 4, stats: { heavy: 25, dodge: 12 }, price: 450 },
'10258': { name: 'é¾™é³ç›¾', type: 'offHand', rarity: 4, stats: { shield: 45, heavy: 32, resist: 20 }, price: 520 },
'10259': { name: 'é¾™æ™¶é¡¹é“¾', type: 'necklace', rarity: 4, stats: { hp: 50, mp: 50, mpRegen: 8 }, price: 460 },
'10260': { name: 'é¾™çœ¼æˆ’æŒ‡', type: 'ring1', rarity: 4, stats: { crit: 12, critDmg: 25, accuracy: 15 }, price: 420 },
'10261': { name: 'é¾™çˆªæˆ’æŒ‡', type: 'ring2', rarity: 4, stats: { sharp: 10, range: 10, dodge: 15 }, price: 430 },
'10262': { name: 'é¾™é³æ‰‹å¥—', type: 'gloves', rarity: 4, stats: { heavy: 22, accuracy: 20, sharp: 8 }, price: 410 },
'10263': { name: 'é¾™çš®è…°å¸¦', type: 'belt', rarity: 4, stats: { hp: 55, hpRegen: 8, resist: 15 }, price: 400 },
'10264': { name: 'é¾™ç¿¼æŠ«é£', type: 'cape', rarity: 4, stats: { dodge: 25, light: 20, resist: 22 }, price: 470 },

// 30-35çº§è£…å¤‡
'10301': { name: 'é£æš´æ³•æ–', type: 'mainHand', rarity: 4, stats: { magic: 42, mp: 35 }, price: 880 },
'10302': { name: 'ç”µé³—é­', type: 'mainHand', rarity: 4, stats: { sharp: 32, range: 8 }, price: 760 },
'10303': { name: 'é›·ç¥ä¹‹é”¤', type: 'mainHand', rarity: 5, stats: { blunt: 50, crit: 10 }, price: 1100 },
'10304': { name: 'å¤æœ¨ç›¾', type: 'offHand', rarity: 3, stats: { shield: 18, heavy: 8 }, price: 450 },
'10305': { name: 'ä¸›æ—æ¯’ç‰™åŒ•é¦–', type: 'mainHand', rarity: 4, stats: { sharp: 40, resist: 5 }, price: 900 },
'10306': { name: 'å¯’å†°è…¿ç”²', type: 'legs', rarity: 5, stats: { heavy: 40, hp: 65, hpRegen: 8 }, price: 580 },
'10307': { name: 'å¯’å†°æˆ˜é´', type: 'boots', rarity: 5, stats: { heavy: 30, dodge: 15 }, price: 550 },
'10308': { name: 'å†°æ™¶ç›¾', type: 'offHand', rarity: 5, stats: { shield: 55, heavy: 40, resist: 25 }, price: 620 },
'10309': { name: 'å†°æ™¶é¡¹é“¾', type: 'necklace', rarity: 5, stats: { hp: 60, mp: 60, mpRegen: 5 }, price: 560 },
'10310': { name: 'å†°éœœæˆ’æŒ‡', type: 'ring1', rarity: 5, stats: { crit: 15, critDmg: 30, magic: 10 }, price: 520 },
'10311': { name: 'å¯’å†°æˆ’æŒ‡', type: 'ring2', rarity: 5, stats: { dodge: 18, accuracy: 25, resist: 20 }, price: 530 },
'10312': { name: 'å†°æ™¶æ‰‹å¥—', type: 'gloves', rarity: 5, stats: { heavy: 28, accuracy: 25, magic: 12 }, price: 510 },
'10313': { name: 'å†°éœœè…°å¸¦', type: 'belt', rarity: 5, stats: { hp: 65, hpRegen: 10, resist: 25 }, price: 500 },
'10314': { name: 'å†°é£æŠ«é£', type: 'cape', rarity: 5, stats: { dodge: 30, light: 25, resist: 28 }, price: 570 },

// 35-40çº§è£…å¤‡
'10351': { name: 'å¦–ç²¾ç®­è¢‹', type: 'offHand', rarity: 4, stats: { range: 10, accuracy: 15 }, price: 850 },
'10352': { name: 'è™šç©ºå°˜æŠ«é£', type: 'cape', rarity: 4, stats: { dodge: 12, resist: 8 }, price: 920 },
'10353': { name: 'æ··æ²ŒçˆªæŠ¤æ‰‹', type: 'gloves', rarity: 4, stats: { sharp: 8, crit: 5 }, price: 780 },
'10354': { name: 'æš—å½±é¢çº±å¤´å·¾', type: 'head', rarity: 4, stats: { dodge: 10, accuracy: 8 }, price: 750 },
'10355': { name: 'ç—›è‹¦ä¸çº¿æ³•è¢', type: 'chest', rarity: 4, stats: { light: 20, mp: 40, resist: 12 }, price: 950 },
'10356': { name: 'ç«ç„°è…¿ç”²', type: 'legs', rarity: 5, stats: { heavy: 48, hp: 75, hpRegen: 10 }, price: 680 },
'10357': { name: 'ç«ç„°æˆ˜é´', type: 'boots', rarity: 5, stats: { heavy: 36, dodge: 18 }, price: 650 },
'10358': { name: 'ç«ç„°ç›¾', type: 'offHand', rarity: 5, stats: { shield: 65, heavy: 48, resist: 30 }, price: 720 },
'10359': { name: 'ç«ç„°é¡¹é“¾', type: 'necklace', rarity: 5, stats: { hp: 70, mp: 70, mpRegen: 8 }, price: 660 },
'10360': { name: 'çƒˆç„°æˆ’æŒ‡', type: 'ring1', rarity: 5, stats: { crit: 18, critDmg: 35, blunt: 12 }, price: 620 },
'10361': { name: 'ç†”å²©æˆ’æŒ‡', type: 'ring2', rarity: 5, stats: { dodge: 20, accuracy: 30, resist: 25 }, price: 630 },
'10362': { name: 'ç«ç„°æ‰‹å¥—', type: 'gloves', rarity: 5, stats: { heavy: 34, accuracy: 30, range: 15 }, price: 610 },
'10363': { name: 'ç†”å²©è…°å¸¦', type: 'belt', rarity: 5, stats: { hp: 75, hpRegen: 12, resist: 30 }, price: 600 },
'10364': { name: 'ç«ç¾½æŠ«é£', type: 'cape', rarity: 5, stats: { dodge: 35, heavy: 30, resist: 32 }, price: 670 },

// 40-45çº§è£…å¤‡
'10401': { name: 'æ°´æ™¶æ³•æ–', type: 'mainHand', rarity: 5, stats: { magic: 50, mp: 60, mpRegen: 5 }, price: 1200 },
'10402': { name: 'é¾™é³é“ ç”²', type: 'chest', rarity: 5, stats: { heavy: 40, hp: 80, resist: 15 }, price: 1400 },
'10403': { name: 'æ˜Ÿé™¨å·¨å‰‘', type: 'mainHand', rarity: 5, stats: { sharp: 55, crit: 12, critDmg: 25 }, price: 1500 },
'10404': { name: 'å‡¤å‡°ä¹‹å¼“', type: 'mainHand', rarity: 5, stats: { range: 45, accuracy: 25, dodge: 10 }, price: 1300 },
'10405': { name: 'æ—¶é—´æ²™æ¼', type: 'offHand', rarity: 5, stats: { dodge: 15, mpRegen: 8, resist: 5 }, price: 1100 },
'10406': { name: 'é›·éœ†è…¿ç”²', type: 'legs', rarity: 6, stats: { heavy: 56, hp: 85, hpRegen: 12 }, price: 780 },
'10407': { name: 'é›·éœ†æˆ˜é´', type: 'boots', rarity: 6, stats: { heavy: 42, dodge: 22 }, price: 750 },
'10408': { name: 'é›·ç¥ç›¾', type: 'offHand', rarity: 6, stats: { shield: 75, heavy: 56, resist: 35 }, price: 820 },
'10409': { name: 'é›·ç”µé¡¹é“¾', type: 'necklace', rarity: 6, stats: { hp: 80, mp: 80, mpRegen: 10 }, price: 760 },
'10410': { name: 'é—ªç”µæˆ’æŒ‡', type: 'ring1', rarity: 6, stats: { crit: 22, critDmg: 40, sharp: 15 }, price: 720 },
'10411': { name: 'é£æš´æˆ’æŒ‡', type: 'ring2', rarity: 6, stats: { dodge: 25, accuracy: 35, resist: 30 }, price: 730 },
'10412': { name: 'é›·éœ†æ‰‹å¥—', type: 'gloves', rarity: 6, stats: { heavy: 40, accuracy: 35, blunt: 18 }, price: 710 },
'10413': { name: 'é£æš´è…°å¸¦', type: 'belt', rarity: 6, stats: { hp: 85, hpRegen: 15, resist: 35 }, price: 700 },
'10414': { name: 'é›·äº‘æŠ«é£', type: 'cape', rarity: 6, stats: { dodge: 40, light: 35, resist: 38 }, price: 770 },

// 45-50çº§è£…å¤‡
'10451': { name: 'è™šç©ºè¡Œè€…ä¹‹é´', type: 'boots', rarity: 5, stats: { light: 20, dodge: 12 }, price: 900 },
'10452': { name: 'å…ƒç´ èåˆæˆ’æŒ‡', type: 'ring1', rarity: 5, stats: { magic: 15, sharp: 15, blunt: 15 }, price: 1600 },
'10453': { name: 'æ³°å¦ä¹‹åŠ›æŠ¤è…¿', type: 'legs', rarity: 5, stats: { heavy: 25, hp: 60, hpRegen: 8 }, price: 1200 },
'10454': { name: 'ç²¾çµç‹å† ', type: 'head', rarity: 5, stats: { light: 18, mp: 100, mpRegen: 10 }, price: 1400 },
'10455': { name: 'æ¶é­”ä¹‹ç¿¼æŠ«é£', type: 'cape', rarity: 5, stats: { dodge: 20, crit: 8, resist: 20 }, price: 1500 },
'10456': { name: 'å¤§åœ°è…¿ç”²', type: 'legs', rarity: 6, stats: { heavy: 64, hp: 95, hpRegen: 15 }, price: 880 },
'10457': { name: 'å¤§åœ°æˆ˜é´', type: 'boots', rarity: 6, stats: { heavy: 48, dodge: 25 }, price: 850 },
'10458': { name: 'å¤§åœ°ä¹‹ç›¾', type: 'offHand', rarity: 6, stats: { shield: 85, heavy: 64, resist: 40 }, price: 920 },
'10459': { name: 'å¤§åœ°é¡¹é“¾', type: 'necklace', rarity: 6, stats: { hp: 90, mp: 90, mpRegen: 12 }, price: 860 },
'10460': { name: 'å²©çŸ³æˆ’æŒ‡', type: 'ring1', rarity: 6, stats: { crit: 25, critDmg: 45, range: 20 }, price: 820 },
'10461': { name: 'å±±å²³æˆ’æŒ‡', type: 'ring2', rarity: 6, stats: { dodge: 28, accuracy: 40, resist: 35 }, price: 830 },
'10462': { name: 'å¤§åœ°æ‰‹å¥—', type: 'gloves', rarity: 6, stats: { heavy: 46, accuracy: 40, magic: 22 }, price: 810 },
'10463': { name: 'å±±è„‰è…°å¸¦', type: 'belt', rarity: 6, stats: { hp: 95, hpRegen: 18, resist: 40 }, price: 800 },
'10464': { name: 'å²©å£æŠ«é£', type: 'cape', rarity: 6, stats: { dodge: 45, heavy: 40, resist: 42 }, price: 870 },

// 50-55çº§è£…å¤‡
'10501': { name: 'åˆ›ä¸–ä¹‹å‰‘', type: 'mainHand', rarity: 6, stats: { sharp: 65, crit: 15, lifesteal: 8 }, price: 2000 },
'10502': { name: 'æ°¸æ’æ³•æ–', type: 'mainHand', rarity: 6, stats: { magic: 60, mp: 120, mpRegen: 12 }, price: 2200 },
'10503': { name: 'ç­ä¸–æˆ˜é”¤', type: 'mainHand', rarity: 6, stats: { blunt: 70, hp: 100, hpRegen: 10 }, price: 2100 },
'10504': { name: 'æ˜Ÿè¾°ä¹‹å¼“', type: 'mainHand', rarity: 6, stats: { range: 55, accuracy: 30, critDmg: 35 }, price: 2300 },
'10505': { name: 'ç¥åŸŸé“ ç”²', type: 'chest', rarity: 6, stats: { heavy: 50, hp: 150, resist: 25 }, price: 2500 },
'10506': { name: 'åœ£å…‰è…¿ç”²', type: 'legs', rarity: 7, stats: { heavy: 72, hp: 105, hpRegen: 18 }, price: 980 },
'10507': { name: 'åœ£å…‰æˆ˜é´', type: 'boots', rarity: 7, stats: { heavy: 54, dodge: 30 }, price: 950 },
'10508': { name: 'åœ£å…‰ç›¾', type: 'offHand', rarity: 7, stats: { shield: 95, heavy: 72, resist: 45 }, price: 1020 },
'10509': { name: 'åœ£å…‰é¡¹é“¾', type: 'necklace', rarity: 7, stats: { hp: 100, mp: 100, mpRegen: 15 }, price: 960 },
'10510': { name: 'ç¥åœ£æˆ’æŒ‡', type: 'ring1', rarity: 7, stats: { crit: 28, critDmg: 50, sharp: 25 }, price: 920 },
'10511': { name: 'å¤©ä½¿æˆ’æŒ‡', type: 'ring2', rarity: 7, stats: { dodge: 32, accuracy: 45, resist: 40 }, price: 930 },
'10512': { name: 'åœ£å…‰æ‰‹å¥—', type: 'gloves', rarity: 7, stats: { heavy: 52, accuracy: 45, range: 28 }, price: 910 },
'10513': { name: 'ç¥åœ£è…°å¸¦', type: 'belt', rarity: 7, stats: { hp: 105, hpRegen: 20, resist: 45 }, price: 900 },
'10514': { name: 'å¤©ä½¿æŠ«é£', type: 'cape', rarity: 7, stats: { dodge: 50, light: 45, resist: 48 }, price: 970 },

// 55-60çº§è£…å¤‡
'10551': { name: 'é¾™é­‚é¡¹é“¾', type: 'necklace', rarity: 6, stats: { hp: 200, mp: 200, resist: 15 }, price: 1800 },
'10552': { name: 'æ—¶ç©ºä¹‹é´', type: 'boots', rarity: 6, stats: { dodge: 25, resist: 8 }, price: 1600 },
'10553': { name: 'å…ƒç´ ä¹‹å¿ƒ', type: 'artifact', rarity: 6, stats: { magic: 25, resist: 20 }, price: 3000 },
'10554': { name: 'æˆ˜ç¥æ‰‹å¥—', type: 'gloves', rarity: 6, stats: { blunt: 20, sharp: 20, accuracy: 25 }, price: 1700 },
'10555': { name: 'å…ˆçŸ¥ä¹‹çœ¼', type: 'offHand', rarity: 6, stats: { crit: 12, accuracy: 35, mpRegen: 15 }, price: 1900 },
'10556': { name: 'æš—å½±è…¿ç”²', type: 'legs', rarity: 7, stats: { heavy: 80, hp: 115, hpRegen: 20 }, price: 1080 },
'10557': { name: 'æš—å½±æˆ˜é´', type: 'boots', rarity: 7, stats: { heavy: 60, dodge: 35 }, price: 1050 },
'10558': { name: 'æš—å½±ç›¾', type: 'offHand', rarity: 7, stats: { shield: 105, heavy: 80, resist: 50 }, price: 1120 },
'10559': { name: 'æš—å½±é¡¹é“¾', type: 'necklace', rarity: 7, stats: { hp: 110, mp: 110, mpRegen: 18 }, price: 1060 },
'10560': { name: 'æš—å½±æˆ’æŒ‡', type: 'ring1', rarity: 7, stats: { crit: 32, critDmg: 55, blunt: 30 }, price: 1020 },
'10561': { name: 'æ¶é­”æˆ’æŒ‡', type: 'ring2', rarity: 7, stats: { dodge: 35, accuracy: 50, resist: 45 }, price: 1030 },
'10562': { name: 'æš—å½±æ‰‹å¥—', type: 'gloves', rarity: 7, stats: { heavy: 58, accuracy: 50, magic: 32 }, price: 1010 },
'10563': { name: 'æ¶é­”è…°å¸¦', type: 'belt', rarity: 7, stats: { hp: 115, hpRegen: 22, resist: 50 }, price: 1000 },
'10564': { name: 'æš—å½±æŠ«é£', type: 'cape', rarity: 7, stats: { dodge: 55, heavy: 50, resist: 52 }, price: 1070 },

// 60-65çº§è£…å¤‡
'10601': { name: 'æ··æ²Œæ’•è£‚è€…', type: 'mainHand', rarity: 7, stats: { sharp: 75, resist: 30, lifesteal: 10 }, price: 3500 },
'10602': { name: 'ç§©åºæ³•çƒ', type: 'mainHand', rarity: 7, stats: { magic: 70, resist: 25, mpRegen: 20 }, price: 3800 },
'10603': { name: 'å¹³è¡¡æˆ˜æ–§', type: 'mainHand', rarity: 7, stats: { blunt: 80, resist: 20, hpRegen: 15 }, price: 3600 },
'10604': { name: 'è™šç©ºä¹‹å¼¦', type: 'mainHand', rarity: 7, stats: { range: 65, resist: 28, dodge: 20 }, price: 3700 },
'10605': { name: 'ç»´åº¦æˆ˜ç”²', type: 'chest', rarity: 7, stats: { heavy: 60, hp: 200, resist: 30 }, price: 4000 },
'10606': { name: 'æ—¶ç©ºè…¿ç”²', type: 'legs', rarity: 7, stats: { heavy: 88, hp: 125, hpRegen: 22 }, price: 1180 },
'10607': { name: 'æ—¶ç©ºæˆ˜é´', type: 'boots', rarity: 7, stats: { heavy: 66, dodge: 40 }, price: 1150 },
'10608': { name: 'æ—¶ç©ºç›¾', type: 'offHand', rarity: 7, stats: { shield: 115, heavy: 88, resist: 55 }, price: 1220 },
'10609': { name: 'æ—¶ç©ºé¡¹é“¾', type: 'necklace', rarity: 7, stats: { hp: 120, mp: 120, mpRegen: 20 }, price: 1160 },
'10610': { name: 'æ—¶é—´æˆ’æŒ‡', type: 'ring1', rarity: 7, stats: { crit: 35, critDmg: 60, sharp: 35 }, price: 1120 },
'10611': { name: 'ç©ºé—´æˆ’æŒ‡', type: 'ring2', rarity: 7, stats: { dodge: 38, accuracy: 55, resist: 50 }, price: 1130 },
'10612': { name: 'æ—¶ç©ºæ‰‹å¥—', type: 'gloves', rarity: 7, stats: { heavy: 64, accuracy: 55, range: 35 }, price: 1110 },
'10613': { name: 'æ—¶ç©ºè…°å¸¦', type: 'belt', rarity: 7, stats: { hp: 125, hpRegen: 25, resist: 55 }, price: 1100 },
'10614': { name: 'æ—¶ç©ºæŠ«é£', type: 'cape', rarity: 7, stats: { dodge: 60, light: 55, resist: 58 }, price: 1170 },

// 65-70çº§è£…å¤‡
'10651': { name: 'æ˜Ÿå°˜æ³•æ–', type: 'mainHand', rarity: 7, stats: { magic: 80, mp: 150, mpRegen: 15 }, price: 4500 },
'10652': { name: 'å½—æ˜Ÿé‡é”¤', type: 'mainHand', rarity: 7, stats: { blunt: 85, hp: 120, heavy: 30 }, price: 4600 },
'10653': { name: 'æ˜Ÿäº‘é•¿å‰‘', type: 'mainHand', rarity: 7, stats: { sharp: 82, crit: 18, accuracy: 25 }, price: 4700 },
'10654': { name: 'é»‘æ´ä¹‹å¼“', type: 'mainHand', rarity: 7, stats: { range: 75, dodge: 22, critDmg: 40 }, price: 4800 },
'10655': { name: 'æ˜Ÿè¾°æŠ¤ç”²', type: 'chest', rarity: 7, stats: { heavy: 65, hp: 180, resist: 28 }, price: 5000 },
'10656': { name: 'æ˜Ÿè¾°è…¿ç”²', type: 'legs', rarity: 7, stats: { heavy: 96, hp: 135, hpRegen: 25 }, price: 1280 },
'10657': { name: 'æ˜Ÿè¾°æˆ˜é´', type: 'boots', rarity: 7, stats: { heavy: 72, dodge: 45 }, price: 1250 },
'10658': { name: 'æ˜Ÿè¾°ç›¾', type: 'offHand', rarity: 7, stats: { shield: 125, heavy: 96, resist: 60 }, price: 1320 },
'10659': { name: 'æ˜Ÿè¾°é¡¹é“¾', type: 'necklace', rarity: 7, stats: { hp: 130, mp: 130, mpRegen: 22 }, price: 1260 },
'10660': { name: 'æ˜Ÿå°˜æˆ’æŒ‡', type: 'ring1', rarity: 7, stats: { crit: 38, critDmg: 65, blunt: 40 }, price: 1220 },
'10661': { name: 'æ˜Ÿå…‰æˆ’æŒ‡', type: 'ring2', rarity: 7, stats: { dodge: 42, accuracy: 60, resist: 55 }, price: 1230 },
'10662': { name: 'æ˜Ÿè¾°æ‰‹å¥—', type: 'gloves', rarity: 7, stats: { heavy: 70, accuracy: 60, magic: 38 }, price: 1210 },
'10663': { name: 'æ˜Ÿå…‰è…°å¸¦', type: 'belt', rarity: 7, stats: { hp: 135, hpRegen: 28, resist: 60 }, price: 1200 },
'10664': { name: 'æ˜Ÿäº‘æŠ«é£', type: 'cape', rarity: 7, stats: { dodge: 65, heavy: 60, resist: 62 }, price: 1270 },

// 70-75çº§è£…å¤‡
'10701': { name: 'å…ƒç´ æ³•æ–', type: 'mainHand', rarity: 8, stats: { magic: 350, mp: 250, resist: 5 }, price: 7000 },
'10702': { name: 'å¤§åœ°æˆ˜é”¤', type: 'mainHand', rarity: 8, stats: { blunt: 350, hp: 200, hpRegen: 8 }, price: 7000 },
'10703': { name: 'æµæ°´ç»†å‰‘', type: 'mainHand', rarity: 8, stats: { sharp: 350, dodge: 12, lifesteal: 5 }, price: 7000 },
'10704': { name: 'é£æš´é•¿å¼“', type: 'mainHand', rarity: 8, stats: { range: 350, accuracy: 25, crit: 10 }, price: 7000 },
'10705': { name: 'ç«ç„°æŠ«é£', type: 'cape', rarity: 8, stats: { light: 140, dodge: 10, resist: 25 }, price: 5600 },
'10706': { name: 'å…ƒç´ è…¿ç”²', type: 'legs', rarity: 8, stats: { heavy: 104, hp: 145, hpRegen: 28 }, price: 1380 },
'10707': { name: 'å…ƒç´ æˆ˜é´', type: 'boots', rarity: 8, stats: { heavy: 78, dodge: 50 }, price: 1350 },
'10708': { name: 'å…ƒç´ ç›¾', type: 'offHand', rarity: 8, stats: { shield: 135, heavy: 104, resist: 65 }, price: 1420 },
'10709': { name: 'å…ƒç´ é¡¹é“¾', type: 'necklace', rarity: 8, stats: { hp: 140, mp: 140, mpRegen: 25 }, price: 1360 },
'10710': { name: 'å…ƒç´ æˆ’æŒ‡', type: 'ring1', rarity: 8, stats: { crit: 42, critDmg: 70, sharp: 45 }, price: 1320 },
'10711': { name: 'è‡ªç„¶æˆ’æŒ‡', type: 'ring2', rarity: 8, stats: { dodge: 45, accuracy: 65, resist: 60 }, price: 1330 },
'10712': { name: 'å…ƒç´ æ‰‹å¥—', type: 'gloves', rarity: 8, stats: { heavy: 76, accuracy: 65, range: 42 }, price: 1310 },
'10713': { name: 'è‡ªç„¶è…°å¸¦', type: 'belt', rarity: 8, stats: { hp: 145, hpRegen: 30, resist: 65 }, price: 1300 },
'10714': { name: 'å…ƒç´ æŠ«é£', type: 'cape', rarity: 8, stats: { dodge: 70, light: 65, resist: 68 }, price: 1370 },

// 75-80çº§è£…å¤‡
'10751': { name: 'å¤©ä½¿ä¹‹æ–', type: 'mainHand', rarity: 8, stats: { magic: 375, mp: 300, mpRegen: 12 }, price: 7500 },
'10752': { name: 'æ¶é­”æˆ˜æ–§', type: 'mainHand', rarity: 8, stats: { blunt: 375, hp: 250, critDmg: 50 }, price: 7500 },
'10753': { name: 'æ³°å¦å·¨å‰‘', type: 'mainHand', rarity: 8, stats: { sharp: 375, heavy: 60, hp: 200 }, price: 7500 },
'10754': { name: 'ç²¾çµé•¿å¼“', type: 'mainHand', rarity: 8, stats: { range: 375, dodge: 18, accuracy: 30 }, price: 7500 },
'10755': { name: 'ç¥ç‹ä¹‹å† ', type: 'head', rarity: 8, stats: { light: 150, hp: 180, mp: 150, crit: 8 }, price: 6000 },
'10756': { name: 'å¤©ä½¿è…¿ç”²', type: 'legs', rarity: 8, stats: { heavy: 112, hp: 155, hpRegen: 30 }, price: 1480 },
'10757': { name: 'å¤©ä½¿æˆ˜é´', type: 'boots', rarity: 8, stats: { heavy: 84, dodge: 55 }, price: 1450 },
'10758': { name: 'å¤©ä½¿ç›¾', type: 'offHand', rarity: 8, stats: { shield: 145, heavy: 112, resist: 70 }, price: 1520 },
'10759': { name: 'å¤©ä½¿é¡¹é“¾', type: 'necklace', rarity: 8, stats: { hp: 150, mp: 150, mpRegen: 28 }, price: 1460 },
'10760': { name: 'å¤©ä½¿æˆ’æŒ‡', type: 'ring1', rarity: 8, stats: { crit: 45, critDmg: 75, blunt: 50 }, price: 1420 },
'10761': { name: 'ç¥æˆ’', type: 'ring2', rarity: 8, stats: { dodge: 48, accuracy: 70, resist: 65 }, price: 1430 },
'10762': { name: 'å¤©ä½¿æ‰‹å¥—', type: 'gloves', rarity: 8, stats: { heavy: 82, accuracy: 70, magic: 45 }, price: 1410 },
'10763': { name: 'ç¥ä¹‹è…°å¸¦', type: 'belt', rarity: 8, stats: { hp: 155, hpRegen: 32, resist: 70 }, price: 1400 },
'10764': { name: 'å¤©ä½¿æŠ«é£', type: 'cape', rarity: 8, stats: { dodge: 75, heavy: 70, resist: 72 }, price: 1470 },

// 80-85çº§è£…å¤‡
'10801': { name: 'æ··æ²Œæ³•æ–', type: 'mainHand', rarity: 9, stats: { magic: 400, mp: 350, resist: 8 }, price: 8000 },
'10802': { name: 'è™šç©ºæˆ˜é”¤', type: 'mainHand', rarity: 9, stats: { blunt: 400, hp: 300, heavy: 80 }, price: 8000 },
'10803': { name: 'ç†µå¢å¤§å‰‘', type: 'mainHand', rarity: 9, stats: { sharp: 400, crit: 12, lifesteal: 8 }, price: 8000 },
'10804': { name: 'æ— åºä¹‹å¼“', type: 'mainHand', rarity: 9, stats: { range: 400, dodge: 20, critDmg: 60 }, price: 8000 },
'10805': { name: 'æ··æ²Œé“ ç”²', type: 'chest', rarity: 9, stats: { heavy: 160, hp: 400, resist: 40 }, price: 6400 },
'10806': { name: 'æ¶é­”è…¿ç”²', type: 'legs', rarity: 9, stats: { heavy: 120, hp: 165, hpRegen: 32 }, price: 1580 },
'10807': { name: 'æ¶é­”æˆ˜é´', type: 'boots', rarity: 9, stats: { heavy: 90, dodge: 60 }, price: 1550 },
'10808': { name: 'æ¶é­”ç›¾', type: 'offHand', rarity: 9, stats: { shield: 155, heavy: 120, resist: 75 }, price: 1620 },
'10809': { name: 'æ¶é­”é¡¹é“¾', type: 'necklace', rarity: 9, stats: { hp: 160, mp: 160, mpRegen: 28 }, price: 1560 },
'10810': { name: 'æ¶é­”æˆ’æŒ‡', type: 'ring1', rarity: 9, stats: { crit: 45, critDmg: 75, blunt: 50 }, price: 1520 },
'10811': { name: 'é­”æˆ’', type: 'ring2', rarity: 9, stats: { dodge: 48, accuracy: 70, resist: 65 }, price: 1530 },
'10812': { name: 'æ¶é­”æ‰‹å¥—', type: 'gloves', rarity: 9, stats: { heavy: 82, accuracy: 70, magic: 45 }, price: 1510 },
'10813': { name: 'é­”çš®è…°å¸¦', type: 'belt', rarity: 9, stats: { hp: 165, hpRegen: 32, resist: 70 }, price: 1500 },
'10814': { name: 'æ¶é­”æŠ«é£', type: 'cape', rarity: 9, stats: { dodge: 75, heavy: 70, resist: 72 }, price: 1570 },

// 85-90çº§è£…å¤‡
'10851': { name: 'åˆ›ä¸–æ³•æ–', type: 'mainHand', rarity: 9, stats: { magic: 425, mp: 400, mpRegen: 15 }, price: 8500 },
'10852': { name: 'æ—¶é—´ä¹‹é”¤', type: 'mainHand', rarity: 9, stats: { blunt: 425, hp: 350, hpRegen: 10 }, price: 8500 },
'10853': { name: 'ç©ºé—´ä¹‹åˆƒ', type: 'mainHand', rarity: 9, stats: { sharp: 425, dodge: 15, accuracy: 35 }, price: 8500 },
'10854': { name: 'ç”Ÿå‘½ä¹‹å¼“', type: 'mainHand', rarity: 9, stats: { range: 425, crit: 15, lifesteal: 10 }, price: 8500 },
'10855': { name: 'åˆ›ä¸–ç¥ç›¾', type: 'offHand', rarity: 9, stats: { shield: 170, heavy: 70, resist: 35 }, price: 6800 },
'10856': { name: 'è™šç©ºè…¿ç”²', type: 'legs', rarity: 9, stats: { heavy: 128, hp: 175, hpRegen: 35 }, price: 1680 },
'10857': { name: 'è™šç©ºæˆ˜é´', type: 'boots', rarity: 9, stats: { heavy: 96, dodge: 65 }, price: 1650 },
'10858': { name: 'è™šç©ºç›¾', type: 'offHand', rarity: 9, stats: { shield: 165, heavy: 128, resist: 80 }, price: 1720 },
'10859': { name: 'è™šç©ºé¡¹é“¾', type: 'necklace', rarity: 9, stats: { hp: 170, mp: 170, mpRegen: 30 }, price: 1660 },
'10860': { name: 'è™šç©ºæˆ’æŒ‡', type: 'ring1', rarity: 9, stats: { crit: 48, critDmg: 80, sharp: 55 }, price: 1620 },
'10861': { name: 'è™šæ— æˆ’æŒ‡', type: 'ring2', rarity: 9, stats: { dodge: 52, accuracy: 75, resist: 70 }, price: 1630 },
'10862': { name: 'è™šç©ºæ‰‹å¥—', type: 'gloves', rarity: 9, stats: { heavy: 88, accuracy: 75, range: 48 }, price: 1610 },
'10863': { name: 'è™šç©ºè…°å¸¦', type: 'belt', rarity: 9, stats: { hp: 175, hpRegen: 35, resist: 75 }, price: 1600 },
'10864': { name: 'è™šç©ºæŠ«é£', type: 'cape', rarity: 9, stats: { dodge: 80, light: 75, resist: 78 }, price: 1670 },

// 90-95çº§è£…å¤‡
'10901': { name: 'ç»ˆæœ«æ³•æ–', type: 'mainHand', rarity: 10, stats: { magic: 450, mp: 450, resist: 10 }, price: 9000 },
'10902': { name: 'å¯‚ç­æˆ˜é”¤', type: 'mainHand', rarity: 10, stats: { blunt: 450, hp: 400, critDmg: 70 }, price: 9000 },
'10903': { name: 'ç»ˆç»“å¤§å‰‘', type: 'mainHand', rarity: 10, stats: { sharp: 450, heavy: 90, hp: 300 }, price: 9000 },
'10904': { name: 'è™šæ— ä¹‹å¼“', type: 'mainHand', rarity: 10, stats: { range: 450, dodge: 25, accuracy: 40 }, price: 9000 },
'10905': { name: 'ç»ˆç„‰æˆ˜ç”²', type: 'chest', rarity: 10, stats: { heavy: 180, hp: 500, resist: 50 }, price: 7200 },
'10906': { name: 'åˆ›ä¸–è…¿ç”²', type: 'legs', rarity: 10, stats: { heavy: 136, hp: 185, hpRegen: 38 }, price: 1780 },
'10907': { name: 'åˆ›ä¸–æˆ˜é´', type: 'boots', rarity: 10, stats: { heavy: 102, dodge: 70 }, price: 1750 },
'10908': { name: 'åˆ›ä¸–ç›¾', type: 'offHand', rarity: 10, stats: { shield: 175, heavy: 136, resist: 85 }, price: 1820 },
'10909': { name: 'åˆ›ä¸–é¡¹é“¾', type: 'necklace', rarity: 10, stats: { hp: 180, mp: 180, mpRegen: 32 }, price: 1760 },
'10910': { name: 'åˆ›ä¸–æˆ’æŒ‡', type: 'ring1', rarity: 10, stats: { crit: 52, critDmg: 85, blunt: 60 }, price: 1720 },
'10911': { name: 'æ°¸æ’æˆ’æŒ‡', type: 'ring2', rarity: 10, stats: { dodge: 55, accuracy: 80, resist: 75 }, price: 1730 },
'10912': { name: 'åˆ›ä¸–æ‰‹å¥—', type: 'gloves', rarity: 10, stats: { heavy: 94, accuracy: 80, magic: 52 }, price: 1710 },
'10913': { name: 'æ°¸æ’è…°å¸¦', type: 'belt', rarity: 10, stats: { hp: 185, hpRegen: 38, resist: 80 }, price: 1700 },
'10914': { name: 'åˆ›ä¸–æŠ«é£', type: 'cape', rarity: 10, stats: { dodge: 85, heavy: 80, resist: 82 }, price: 1770 },


// 95çº§ç»ˆæè£…å¤‡ (æ— é™ä¹‹å¡”) - ä½¿ç”¨å·²æ³¨å†Œå±æ€§
'10951': { name: 'æ— é™ä¹‹åˆƒ', type: 'mainHand', rarity: 10, stats: { sharp: 500, crit: 30, critDmg: 200, accuracy: 50, lifesteal: 20, resist: 50 }, price: 50000 },
'10952': { name: 'æ··æ²Œç»ˆæœ«', type: 'mainHand', rarity: 10, stats: { blunt: 450, hp: 300, heavy: 80, hpRegen: 25, resist: 60, dodge: 15 }, price: 48000 },
'10953': { name: 'å®‡å®™æ³•æ–', type: 'mainHand', rarity: 10, stats: { magic: 480, mp: 400, mpRegen: 20, crit: 25, resist: 40, accuracy: 30 }, price: 52000 },
'10954': { name: 'æ—¶ç©ºæ’•è£‚è€…', type: 'mainHand', rarity: 10, stats: { range: 460, accuracy: 60, dodge: 20, crit: 28, critDmg: 180, resist: 45 }, price: 49000 },
'10955': { name: 'ç¥ä¹‹å† å†•', type: 'head', rarity: 10, stats: { hp: 200, mp: 200, heavy: 40, light: 40, dodge: 15, resist: 35 }, price: 35000 },
'10956': { name: 'åˆ›ä¸–é“ ç”²', type: 'chest', rarity: 10, stats: { heavy: 100, hp: 500, hpRegen: 30, resist: 80, light: 60, dodge: 10 }, price: 45000 },
'10957': { name: 'æ°¸æ’æŠ¤è…¿', type: 'legs', rarity: 10, stats: { heavy: 80, hp: 400, hpRegen: 25, dodge: 12, resist: 60, light: 50 }, price: 38000 },
'10958': { name: 'æ— é™æˆ˜é´', type: 'boots', rarity: 10, stats: { dodge: 25, light: 70, heavy: 30, hp: 150, mp: 150, resist: 40 }, price: 32000 },
'10959': { name: 'ç»å¯¹é˜²å¾¡', type: 'offHand', rarity: 10, stats: { shield: 120, heavy: 60, resist: 100, hp: 300, dodge: 8, light: 40 }, price: 42000 },
'10960': { name: 'æ˜Ÿè¾°é¡¹é“¾', type: 'necklace', rarity: 10, stats: { hp: 250, mp: 250, hpRegen: 20, mpRegen: 20, resist: 45, dodge: 10 }, price: 30000 },
'10961': { name: 'æ¯ç­æŒ‡ç¯', type: 'ring1', rarity: 10, stats: { crit: 20, critDmg: 150, accuracy: 25, sharp: 100, blunt: 100, magic: 100 }, price: 28000 },
'10962': { name: 'æ°¸æ’æŒ‡ç¯', type: 'ring2', rarity: 10, stats: { dodge: 18, resist: 55, hpRegen: 15, mpRegen: 15, heavy: 50, light: 50 }, price: 28000 },
'10963': { name: 'ç¥ä¹‹æ‰‹å¥—', type: 'gloves', rarity: 10, stats: { accuracy: 35, crit: 18, dodge: 12, heavy: 45, light: 45, resist: 40 }, price: 29000 },
'10964': { name: 'æ— é™è…°å¸¦', type: 'belt', rarity: 10, stats: { hp: 350, hpRegen: 20, mp: 350, mpRegen: 20, resist: 50, dodge: 8 }, price: 31000 },
'10965': { name: 'å®‡å®™æŠ«é£', type: 'cape', rarity: 10, stats: { dodge: 30, light: 80, resist: 70, hp: 200, mp: 200, heavy: 40 }, price: 37000 },
'10966': { name: 'æ— é™æ ¸å¿ƒ', type: 'artifact', rarity: 10, stats: { sharp: 150, blunt: 150, magic: 150, range: 150, heavy: 60, light: 60, shield: 60, coat: 60, dodge: 15, crit: 15, accuracy: 20, lifesteal: 10, resist: 50 }, price: 60000 },
'10967': { name: 'ç¥ä¹‹çµé­‚', type: 'soul', rarity: 10, stats: { hp: 1000, mp: 1000, hpRegen: 50, mpRegen: 50, resist: 100, dodge: 25, crit: 20, critDmg: 100, accuracy: 30, lifesteal: 15 }, price: 80000 }

       };

        this.maps = [
    { id: 0, name: "æ–°æ‰‹è‰åŸ (Lv.1)", level: 1, mobs: [
        { name: "å²è±å§†", visual: "ğŸ’§ğŸ’§ğŸ’§ğŸ’§", hp: 30, atk: 5, type: 'blunt', exp: 10, gold: 2, drops: {'m_slime_gel': 0.3} },
        { name: "é‡å…”", visual: "ğŸ‡ğŸ‡ğŸ‡ğŸ‡", hp: 25, atk: 6, type: 'sharp', exp: 12, gold: 3, drops: {'m_rabbit_fur': 0.4} },
        { name: "å“¥å¸ƒæ—", visual: "ğŸ‘¹ğŸ‘¹ğŸ‘¹ğŸ‘¹", hp: 50, atk: 8, type: 'blunt', exp: 17, gold: 4, drops: {'m_goblin_ear': 0.25} },
        { name: "é‡çŒª", visual: "ğŸ—ğŸ—ğŸ—ğŸ—", hp: 44, atk: 7, type: 'blunt', exp: 19, gold: 5, drops: {'m_boar_tusk': 0.35} },
        { name: "è‰åŸç‹¼ç‹", visual: "ğŸºğŸºğŸ‘‘ğŸ‘‘", hp: 120, atk: 12, type: 'sharp', exp: 50, gold: 15, drops: {'m_wolf_fang': 0.15}, isBoss: true }
    ]},
    { id: 1, name: "å¹½æš—æ£®æ— (Lv.5)", level: 5, mobs: [
        { name: "å·¨è››", visual: "ğŸ•·ğŸ•·ğŸ•·ï¸ğŸ•·ğŸ•·ğŸ•·ï¸", hp: 80, atk: 12, type: 'sharp', exp: 25, gold: 8, drops: {'m_spider_silk': 0.3} },
        { name: "å¤§ç”²è™«", visual: "ğŸª²ğŸª²ğŸª²ğŸª²ğŸª²ğŸª²", hp: 95, atk: 10, type: 'blunt', exp: 22, gold: 7, drops: {'m_beetle_shell': 0.4} },
        { name: "è—¤è”“æ€ª", visual: "ğŸŒ¿ğŸŒ¿ğŸŒ¿ğŸŒ¿", hp: 70, atk: 15, type: 'magic', exp: 28, gold: 9, drops: {'m_vine_whip': 0.25} },
        { name: "æ—åœ°è™", visual: "ğŸ¯ğŸ¯ğŸ¯ğŸ¯", hp: 90, atk: 13, type: 'sharp', exp: 26, gold: 8, drops: {'m_tiger_claw': 0.35} },
        { name: "æ£®æ—å·¨ç†Š", visual: "ğŸ»ğŸ»ğŸ‘‘ğŸ‘‘", hp: 200, atk: 18, type: 'blunt', exp: 60, gold: 20, drops: {'m_bear_pelt': 0.1}, isBoss: true }
    ]},
    { id: 2, name: "è¿·é›¾æ²¼æ³½ (Lv.10)", level: 10, mobs: [
        { name: "æ¯’é›¾è›™", visual: "ğŸ¸ğŸ¸ğŸ’¨ğŸ’¨", hp: 120, atk: 18, type: 'magic', exp: 35, gold: 12, drops: {'m_toxic_gland': 0.3} },
        { name: "å·¨é’³èŸ¹", visual: "ğŸ¦€ğŸ¦€ğŸ¦€âœ‚âœ‚ï¸", hp: 150, atk: 16, type: 'sharp', exp: 32, gold: 11, drops: {'m_crab_claw': 0.4} },
        { name: "æ³¥æ²¼æ€ª", visual: "ğŸ’©ğŸ’©ğŸŒ€", hp: 180, atk: 14, type: 'blunt', exp: 38, gold: 13, drops: {'m_mud_core': 0.25} },
        { name: "é£Ÿè…ç§ƒé¹«", visual: "ğŸ¦…ğŸ¦…ğŸ¦…ğŸ–ğŸ–", hp: 130, atk: 20, type: 'range', exp: 36, gold: 14, drops: {'m_vulture_feather': 0.35} },
        { name: "æ²¼æ³½ä¹å¤´è›‡", visual: "ğŸğŸğŸ‘‘ğŸ‘‘", hp: 400, atk: 25, type: 'magic', exp: 100, gold: 40, drops: {'m_hydra_scale': 0.08}, isBoss: true }
    ]},
    { id: 3, name: "åºŸå¼ƒçŸ¿æ´ (Lv.15)", level: 15, mobs: [
        { name: "çŸ¿å·¥åƒµå°¸", visual: "â›â›â›ï¸ğŸ§ŸğŸ§Ÿ", hp: 200, atk: 22, type: 'blunt', exp: 45, gold: 18, drops: {'m_miner_pick': 0.3} },
        { name: "æ´ç©´è™è ç¾¤", visual: "ğŸ¦‡ğŸ¦‡ğŸ¦‡ğŸ¦‡ğŸ¦‡ğŸ¦‡", hp: 160, atk: 20, type: 'range', exp: 42, gold: 16, drops: {'m_bat_wing': 0.4} },
        { name: "å²©çŸ³å…ƒç´ ", visual: "ğŸª¨ğŸª¨ğŸª¨ğŸ”¥", hp: 240, atk: 18, type: 'blunt', exp: 48, gold: 20, drops: {'m_stone_shard': 0.25} },
        { name: "é’»åœ°è •è™«", visual: "ğŸ›ğŸ›ğŸŒ€", hp: 190, atk: 21, type: 'sharp', exp: 44, gold: 17, drops: {'m_worm_tooth': 0.35} },
        { name: "æ˜åœ°å…½ç‹", visual: "ğŸ¦…ğŸ¦…ğŸ¦…ğŸ‘‘ğŸ‘‘", hp: 600, atk: 30, type: 'blunt', exp: 120, gold: 50, drops: {'m_burrower_horn': 0.06}, isBoss: true }
    ]},
    { id: 4, name: "ç™½éª¨è’é‡ (Lv.20)", level: 20, mobs: [
        { name: "éª·é«…æˆ˜å£«", visual: "ğŸ’€ğŸ’€âš”âš”ï¸", hp: 280, atk: 26, type: 'sharp', exp: 55, gold: 22, drops: {'m_bone_fragment': 0.3} },
        { name: "æ€¨çµ", visual: "ğŸ‘»ğŸ‘»ğŸŒ€", hp: 240, atk: 28, type: 'magic', exp: 58, gold: 24, drops: {'m_ghost_essence': 0.4} },
        { name: "è…å°¸", visual: "ğŸ§ŸğŸ§Ÿâ€â™‚ï¸ğŸ’€ğŸ’€", hp: 320, atk: 24, type: 'blunt', exp: 52, gold: 20, drops: {'m_rotting_flesh': 0.25} },
        { name: "äº¡çµå·«å¸ˆ", visual: "ğŸ§™ğŸ§™â€â™‚ï¸ğŸ’€ğŸ’€", hp: 260, atk: 30, type: 'magic', exp: 60, gold: 26, drops: {'m_necromancer_staff': 0.35} },
        { name: "éª¸éª¨é¢†ä¸»", visual: "ğŸ’€ğŸ’€ğŸ‘‘ğŸ‘‘", hp: 800, atk: 35, type: 'sharp', exp: 150, gold: 60, drops: {'m_bone_crown': 0.05}, isBoss: true }
    ]},
    { id: 5, name: "ç‚½çƒ­ç«å±± (Lv.25)", level: 25, mobs: [
        { name: "å²©æµ†å²è±å§†", visual: "ğŸ’§ğŸ’§ğŸ”¥", hp: 350, atk: 32, type: 'magic', exp: 68, gold: 28, drops: {'m_lava_gel': 0.3} },
        { name: "ç«ç„°èœ¥èœ´", visual: "ğŸ¦ğŸ¦ğŸ¦ğŸ”¥", hp: 380, atk: 30, type: 'sharp', exp: 65, gold: 26, drops: {'m_fire_scale': 0.4} },
        { name: "ç†”å²©å·¨äºº", visual: "ğŸ—¿ğŸ—¿ğŸ”¥", hp: 450, atk: 28, type: 'blunt', exp: 72, gold: 30, drops: {'m_magma_rock': 0.25} },
        { name: "å–·ç«é¾™è‡", visual: "ğŸª°ğŸª°ğŸª°ğŸ”¥", hp: 320, atk: 34, type: 'range', exp: 75, gold: 32, drops: {'m_firefly_wing': 0.35} },
        { name: "ç‚é­”", visual: "ğŸ”¥ğŸ‘‘ğŸ‘‘", hp: 1000, atk: 40, type: 'magic', exp: 200, gold: 80, drops: {'m_fiery_heart': 0.04}, isBoss: true }
    ]},
    { id: 6, name: "å¯’å†°å±±è„‰ (Lv.30)", level: 30, mobs: [
        { name: "å†°éœœå·¨é­”", visual: "ğŸ§ŒğŸ§Œâ„â„ï¸", hp: 420, atk: 36, type: 'blunt', exp: 82, gold: 35, drops: {'m_ice_tusk': 0.3} },
        { name: "é›ªå¦–", visual: "ğŸ‘»ğŸ‘»â„â„ï¸", hp: 380, atk: 38, type: 'magic', exp: 85, gold: 38, drops: {'m_snow_spirit': 0.4} },
        { name: "æåœ°çŒ›çŠ¸", visual: "ğŸ˜ğŸ˜â„â„ï¸", hp: 500, atk: 34, type: 'blunt', exp: 88, gold: 40, drops: {'m_mammoth_tusk': 0.25} },
        { name: "å¯’å†°é£é¾™", visual: "ğŸ²ğŸ²â„â„ï¸", hp: 440, atk: 40, type: 'range', exp: 92, gold: 42, drops: {'m_ice_scale': 0.35} },
        { name: "å†°é›ªå¥³ç‹", visual: "ğŸ‘‘ğŸ‘‘â„â„ï¸", hp: 1200, atk: 45, type: 'magic', exp: 250, gold: 100, drops: {'m_ice_crown': 0.03}, isBoss: true }
    ]},
    { id: 7, name: "é›·éœ†å³°é¡¶ (Lv.35)", level: 35, mobs: [
        { name: "é›·é¸Ÿ", visual: "ğŸ¦…ğŸ¦…ğŸ¦…âš¡âš¡", hp: 500, atk: 42, type: 'range', exp: 95, gold: 45, drops: {'m_thunder_feather': 0.3} },
        { name: "é£æš´å…ƒç´ ", visual: "ğŸŒªğŸŒªï¸âš¡âš¡", hp: 450, atk: 44, type: 'magic', exp: 98, gold: 48, drops: {'m_storm_core': 0.4} },
        { name: "ç”µé³—æ­¦å£«", visual: "ğŸğŸâš¡âš¡", hp: 520, atk: 40, type: 'sharp', exp: 96, gold: 46, drops: {'m_eel_spine': 0.25} },
        { name: "é›·é¸£å…½", visual: "ğŸ•ğŸ•âš¡âš¡", hp: 480, atk: 46, type: 'blunt', exp: 102, gold: 50, drops: {'m_thunder_horn': 0.35} },
        { name: "é›·ç¥ä¹‹å­", visual: "âš¡âš¡ğŸ‘‘ğŸ‘‘", hp: 1500, atk: 50, type: 'magic', exp: 300, gold: 120, drops: {'m_thunderbolt': 0.02}, isBoss: true }
    ]},
    { id: 8, name: "ç¿¡ç¿ ä¸›æ— (Lv.40)", level: 40, mobs: [
        { name: "æ ‘äººé•¿è€", visual: "ğŸŒ³ğŸŒ³ğŸ§“ğŸ§“", hp: 580, atk: 48, type: 'blunt', exp: 110, gold: 55, drops: {'m_ancient_bark': 0.3} },
        { name: "å‰§æ¯’é£è›¾", visual: "ğŸ¦‹ğŸ¦‹ğŸ¦‹ğŸ’€ğŸ’€", hp: 520, atk: 52, type: 'range', exp: 115, gold: 58, drops: {'m_poison_dust': 0.4} },
        { name: "ä¸›æ—å·¨èŸ’", visual: "ğŸğŸğŸŒ¿ğŸŒ¿", hp: 620, atk: 46, type: 'sharp', exp: 120, gold: 60, drops: {'m_jungle_fang': 0.25} },
        { name: "å¦–ç²¾å¼“ç®­æ‰‹", visual: "ğŸ§šğŸ§šâ€â™€ï¸ğŸ¹ğŸ¹", hp: 540, atk: 54, type: 'range', exp: 118, gold: 62, drops: {'m_fairy_arrow': 0.35} },
        { name: "ç¿¡ç¿ é¾™ç‹", visual: "ğŸ‰ğŸ‰ğŸ‘‘ğŸ‘‘", hp: 1800, atk: 55, type: 'sharp', exp: 350, gold: 140, drops: {'m_jade_scale': 0.015}, isBoss: true }
    ]},
    { id: 9, name: "è™šæ— æ·±æ¸Š (Lv.45)", level: 45, mobs: [
        { name: "è™šç©ºè¡Œè€…", visual: "ğŸ‘£ğŸ‘£ğŸŒ€", hp: 650, atk: 58, type: 'magic', exp: 130, gold: 65, drops: {'m_void_dust': 0.3} },
        { name: "æ··æ²Œé­”å…½", visual: "ğŸ¾ğŸ¾ğŸŒŒğŸŒŒ", hp: 700, atk: 56, type: 'blunt', exp: 135, gold: 68, drops: {'m_chaos_claw': 0.4} },
        { name: "æš—å½±åˆºå®¢", visual: "ğŸ—¡ğŸ—¡ï¸ğŸ‘¤ğŸ‘¤", hp: 600, atk: 60, type: 'sharp', exp: 132, gold: 70, drops: {'m_shadow_veil': 0.25} },
        { name: "ç—›è‹¦ç¼–ç»‡è€…", visual: "ğŸ•¸ğŸ•¸ğŸ•¸ï¸ğŸ˜«ğŸ˜«", hp: 680, atk: 54, type: 'magic', exp: 138, gold: 72, drops: {'m_torment_thread': 0.35} },
        { name: "æ·±æ¸Šé­”ç‹", visual: "ğŸ‘¹ğŸ‘¹ğŸ‘‘ğŸ‘‘", hp: 2200, atk: 60, type: 'magic', exp: 400, gold: 160, drops: {'m_abyss_crown': 0.01}, isBoss: true }
    ]},
    { id: 10, name: "æ°´æ™¶æ´çªŸ (Lv.50)", level: 50, mobs: [
        { name: "æ°´æ™¶èœ˜è››", visual: "ğŸ•·ğŸ•·ğŸ’ğŸ’", hp: 750, atk: 62, type: 'sharp', exp: 145, gold: 75, drops: {'m_crystal_shard': 0.35} },
        { name: "å…‰ä¹‹å…ƒç´ ", visual: "âœ¨âœ¨âœ¨âœ¨", hp: 680, atk: 65, type: 'magic', exp: 148, gold: 78, drops: {'m_light_essence': 0.4} },
        { name: "æ™¶åŒ–å·¨åƒ", visual: "ğŸ—¿ğŸ—¿ğŸ’ğŸ’", hp: 820, atk: 58, type: 'blunt', exp: 152, gold: 80, drops: {'m_crystal_core': 0.3} },
        { name: "æŠ˜å°„å¹½çµ", visual: "ğŸ‘»ğŸ‘»ğŸ”®ğŸ”®", hp: 720, atk: 68, type: 'range', exp: 155, gold: 82, drops: {'m_prism_shard': 0.38} },
        { name: "æ°´æ™¶ä¹‹ç‹", visual: "ğŸ’ğŸ‘‘ğŸ‘‘ğŸ‘‘", hp: 2500, atk: 65, type: 'magic', exp: 450, gold: 180, drops: {'m_crystal_heart': 0.008}, isBoss: true }
    ]},
    { id: 11, name: "é¾™ä¹‹å³¡è°· (Lv.55)", level: 55, mobs: [
        { name: "å¹¼é¾™", visual: "ğŸ²ğŸ²ğŸ²ğŸ²", hp: 850, atk: 68, type: 'sharp', exp: 160, gold: 85, drops: {'m_dragon_scale': 0.35} },
        { name: "é¾™äººæˆ˜å£«", visual: "ğŸ§ŒğŸ§ŒğŸ‰ğŸ‰", hp: 780, atk: 72, type: 'blunt', exp: 165, gold: 88, drops: {'m_drake_claw': 0.4} },
        { name: "é£é¾™", visual: "ğŸ‰ğŸ‰ğŸª½ğŸª½", hp: 920, atk: 65, type: 'range', exp: 170, gold: 90, drops: {'m_wyvern_wing': 0.3} },
        { name: "é¾™è¯­æ³•å¸ˆ", visual: "ğŸ§™ğŸ§™ğŸ²ğŸ²", hp: 800, atk: 75, type: 'magic', exp: 175, gold: 92, drops: {'m_dragon_blood': 0.38} },
        { name: "å¤é¾™é•¿è€", visual: "ğŸ‰ğŸ‘‘ğŸ‘‘ğŸ‘‘", hp: 2800, atk: 70, type: 'sharp', exp: 500, gold: 200, drops: {'m_ancient_dragon_heart': 0.007}, isBoss: true }
    ]},
    { id: 12, name: "æ—¶ç©ºè£‚éš™ (Lv.60)", level: 60, mobs: [
        { name: "æ—¶ä¹‹å®ˆå«", visual: "â°â°ğŸŒ€ğŸŒ€", hp: 950, atk: 72, type: 'magic', exp: 180, gold: 95, drops: {'m_time_sand': 0.35} },
        { name: "ç©ºé—´æ‰­æ›²è€…", visual: "ğŸŒ€ğŸŒ€ğŸŒŒğŸŒŒ", hp: 880, atk: 78, type: 'range', exp: 185, gold: 98, drops: {'m_space_fragment': 0.4} },
        { name: "æœªæ¥æˆ˜å£«", visual: "ğŸ¤–ğŸ¤–âš”âš”ï¸", hp: 1020, atk: 70, type: 'sharp', exp: 190, gold: 100, drops: {'m_future_tech': 0.3} },
        { name: "è¿‡å»ä¹‹å½±", visual: "ğŸ‘¤ğŸ‘¤ğŸŒ«ğŸŒ«", hp: 900, atk: 80, type: 'blunt', exp: 195, gold: 102, drops: {'m_past_echo': 0.38} },
        { name: "æ—¶ç©ºä¸»å®°", visual: "ğŸ‘‘ğŸŒ€ğŸŒŒ", hp: 3200, atk: 75, type: 'magic', exp: 550, gold: 220, drops: {'m_temporal_core': 0.006}, isBoss: true }
    ]},
    { id: 13, name: "æ˜Ÿè¾°å¤§æµ· (Lv.65)", level: 65, mobs: [
        { name: "æ˜Ÿå°˜ç²¾çµ", visual: "âœ¨ğŸ§šâœ¨ğŸ§š", hp: 1050, atk: 78, type: 'magic', exp: 200, gold: 105, drops: {'m_stardust': 0.35} },
        { name: "å½—æ˜Ÿå…½", visual: "â˜„ï¸â˜„ï¸ğŸ¾ğŸ¾", hp: 980, atk: 82, type: 'blunt', exp: 205, gold: 108, drops: {'m_comet_fragment': 0.4} },
        { name: "æ˜Ÿäº‘æ°´æ¯", visual: "â˜ï¸â˜ï¸ğŸª¼ğŸª¼", hp: 1120, atk: 75, type: 'range', exp: 210, gold: 110, drops: {'m_nebula_gel': 0.3} },
        { name: "é»‘æ´åå™¬è€…", visual: "âš«âš«ğŸŒ€ğŸŒ€", hp: 1000, atk: 85, type: 'sharp', exp: 215, gold: 112, drops: {'m_black_hole_shard': 0.38} },
        { name: "æ˜Ÿè¾°ä¹‹ç¥", visual: "â­ğŸ‘‘ğŸŒŒ", hp: 3600, atk: 80, type: 'magic', exp: 600, gold: 240, drops: {'m_star_heart': 0.005}, isBoss: true }
    ]},
    { id: 14, name: "å…ƒç´ ä½é¢ (Lv.70)", level: 70, mobs: [
        { name: "ç«å…ƒç´ é¢†ä¸»", visual: "ğŸ”¥ğŸ‘‘ğŸ”¥ğŸ‘‘", hp: 1150, atk: 82, type: 'magic', exp: 220, gold: 115, drops: {'m_fire_essence': 0.35} },
        { name: "æ°´å…ƒç´ é•¿è€", visual: "ğŸ’§ğŸ‘‘ğŸ’§ğŸ‘‘", hp: 1080, atk: 88, type: 'range', exp: 225, gold: 118, drops: {'m_water_essence': 0.4} },
        { name: "é£å…ƒç´ å›ä¸»", visual: "ğŸ’¨ğŸ‘‘ğŸ’¨ğŸ‘‘", hp: 1220, atk: 80, type: 'sharp', exp: 230, gold: 120, drops: {'m_wind_essence': 0.3} },
        { name: "åœŸå…ƒç´ ä¹‹ç‹", visual: "ğŸª¨ğŸ‘‘ğŸª¨ğŸ‘‘", hp: 1100, atk: 90, type: 'blunt', exp: 235, gold: 122, drops: {'m_earth_essence': 0.38} },
        { name: "å…ƒç´ å§‹ç¥–", visual: "ğŸŒ‹ğŸŒªï¸ğŸŒŠğŸ—¿", hp: 4000, atk: 85, type: 'magic', exp: 650, gold: 260, drops: {'m_primal_essence': 0.004}, isBoss: true }
    ]},
    { id: 15, name: "ç¥è¯æ®¿å ‚ (Lv.75)", level: 75, mobs: [
        { name: "å¤©ä½¿æˆ˜å£«", visual: "ğŸ‘¼âš”ï¸ğŸ‘¼âš”ï¸", hp: 1250, atk: 88, type: 'sharp', exp: 240, gold: 125, drops: {'m_angel_feather': 0.35} },
        { name: "æ¶é­”å·«å¸ˆ", visual: "ğŸ˜ˆğŸ§™ğŸ˜ˆğŸ§™", hp: 1180, atk: 92, type: 'magic', exp: 245, gold: 128, drops: {'m_demon_horn': 0.4} },
        { name: "æ³°å¦å·¨äºº", visual: "ğŸ§ŒğŸ§ŒğŸ—¿ğŸ—¿", hp: 1320, atk: 85, type: 'blunt', exp: 250, gold: 130, drops: {'m_titan_blood': 0.3} },
        { name: "ç²¾çµå¥³ç‹", visual: "ğŸ§šğŸ‘‘ğŸ§šğŸ‘‘", hp: 1200, atk: 95, type: 'range', exp: 255, gold: 132, drops: {'m_fairy_dust': 0.38} },
        { name: "ç¥ç‹å¥¥ä¸", visual: "ğŸ‘‘âš¡ï¸ğŸ‘ï¸", hp: 4500, atk: 90, type: 'magic', exp: 700, gold: 280, drops: {'m_godly_essence': 0.003}, isBoss: true }
    ]},
    { id: 16, name: "æ··æ²Œæ·±æ¸Š (Lv.80)", level: 80, mobs: [
        { name: "æ··æ²Œé­”åƒ", visual: "ğŸ—¿ğŸŒ€ğŸ—¿ğŸŒ€", hp: 1350, atk: 92, type: 'blunt', exp: 260, gold: 135, drops: {'m_chaos_shard': 0.35} },
        { name: "è™šç©ºçŒçŠ¬", visual: "ğŸ•ğŸŒŒğŸ•ğŸŒŒ", hp: 1280, atk: 98, type: 'sharp', exp: 265, gold: 138, drops: {'m_void_fang': 0.4} },
        { name: "ç†µå¢å…ƒç´ ", visual: "ğŸ”¥ğŸ’§ğŸŒªï¸ğŸª¨", hp: 1420, atk: 90, type: 'magic', exp: 270, gold: 140, drops: {'m_entropy_core': 0.3} },
        { name: "æ— åºç¼–ç»‡è€…", visual: "ğŸ•¸ï¸ğŸŒ€ğŸ•¸ï¸ğŸŒ€", hp: 1300, atk: 100, type: 'range', exp: 275, gold: 142, drops: {'m_chaos_thread': 0.38} },
        { name: "æ··æ²Œä¹‹ä¸»", visual: "ğŸ‘‘ğŸŒ€ğŸŒªï¸", hp: 5000, atk: 95, type: 'magic', exp: 750, gold: 300, drops: {'m_chaos_heart': 0.002}, isBoss: true }
    ]},
    { id: 17, name: "åˆ›ä¸–ç¥æ®¿ (Lv.85)", level: 85, mobs: [
        { name: "åˆ›ä¸–å®ˆå«", visual: "âš”ï¸âœ¨âš”ï¸âœ¨", hp: 1450, atk: 98, type: 'sharp', exp: 280, gold: 145, drops: {'m_creation_shard': 0.35} },
        { name: "æ—¶é—´ç®¡ç†è€…", visual: "â³ğŸ‘ï¸â³ğŸ‘ï¸", hp: 1380, atk: 102, type: 'magic', exp: 285, gold: 148, drops: {'m_time_essence': 0.4} },
        { name: "ç©ºé—´æ¶æ„å¸ˆ", visual: "ğŸ“ğŸŒŒğŸ“ğŸŒŒ", hp: 1520, atk: 95, type: 'range', exp: 290, gold: 150, drops: {'m_space_weave': 0.3} },
        { name: "ç”Ÿå‘½ç¼–ç»‡è€…", visual: "ğŸŒ¿ğŸ§µğŸŒ¿ğŸ§µ", hp: 1400, atk: 105, type: 'blunt', exp: 295, gold: 152, drops: {'m_life_thread': 0.38} },
        { name: "åˆ›ä¸–ç¥", visual: "ğŸ‘‘âœ¨ğŸŒŒ", hp: 5500, atk: 100, type: 'magic', exp: 800, gold: 320, drops: {'m_creation_spark': 0.0015}, isBoss: true }
    ]},
    { id: 18, name: "ç»ˆæœ«ä¹‹åœ° (Lv.90)", level: 90, mobs: [
        { name: "ç»ˆæœ«éª‘å£«", visual: "ğŸ’€âš”ï¸ğŸ’€âš”ï¸", hp: 1550, atk: 102, type: 'sharp', exp: 300, gold: 155, drops: {'m_apocalypse_shard': 0.35} },
        { name: "å¯‚ç­æ³•å¸ˆ", visual: "â˜ ï¸ğŸ§™â˜ ï¸ğŸ§™", hp: 1480, atk: 108, type: 'magic', exp: 305, gold: 158, drops: {'m_void_essence': 0.4} },
        { name: "ç»ˆç»“å·¨å…½", visual: "ğŸ²ğŸ’€ğŸ²ğŸ’€", hp: 1620, atk: 100, type: 'blunt', exp: 310, gold: 160, drops: {'m_end_time_scales': 0.3} },
        { name: "è™šæ— å°„æ‰‹", visual: "ğŸ¹ğŸŒ«ï¸ğŸ¹ğŸŒ«ï¸", hp: 1500, atk: 110, type: 'range', exp: 315, gold: 162, drops: {'m_nothingness_arrow': 0.38} },
        { name: "ç»ˆç„‰ä¹‹ä¸»", visual: "ğŸ‘‘ğŸ’€ğŸŒŒ", hp: 6000, atk: 105, type: 'magic', exp: 850, gold: 340, drops: {'m_final_breath': 0.001}, isBoss: true }
    ]},
    { id: 19, name: "æ— é™ä¹‹å¡” (Lv.95)", level: 95, mobs: [
        { name: "æ— é™å®ˆå«", visual: "ğŸ›¡ï¸âˆğŸ›¡ï¸âˆ", hp: 1650, atk: 108, type: 'blunt', exp: 320, gold: 165, drops: {'m_infinity_shard': 0.35} },
        { name: "æ°¸æ’æ³•å¸ˆ", visual: "ğŸ§™âˆğŸ§™âˆ", hp: 1580, atk: 112, type: 'magic', exp: 325, gold: 168, drops: {'m_eternity_essence': 0.4} },
        { name: "æ— å°½æˆ˜å£«", visual: "âš”ï¸âˆâš”ï¸âˆ", hp: 1720, atk: 105, type: 'sharp', exp: 330, gold: 170, drops: {'m_endless_blade': 0.3} },
        { name: "ä¸æœ½å°„æ‰‹", visual: "ğŸ¹âˆğŸ¹âˆ", hp: 1600, atk: 115, type: 'range', exp: 335, gold: 172, drops: {'m_immortal_arrow': 0.38} },
        { name: "æ— é™ä¹‹ä¸»", visual: "ğŸ‘‘âˆğŸŒŒ", hp: 6666, atk: 110, type: 'magic', exp: 1000, gold: 400, drops: {'m_infinity_core': 0.0005}, isBoss: true }
    ]}
];

        // åœ¨Databaseç±»çš„skillså±æ€§ä¸­æ·»åŠ ä»¥ä¸‹æŠ€èƒ½
this.skills = {
    's_bash': { id: 's_bash', name: "é‡å‡»", type: 'active', branch: 'blunt', mpCost: 15, cd: 3000, multiplier: 2.5, desc: "250% é’å™¨ä¼¤å®³ (MP:15)", reqLvl: 1 },
    's_fireball': { id: 's_fireball', name: "ç«çƒæœ¯", type: 'active', branch: 'magic', mpCost: 25, cd: 5000, multiplier: 3.0, desc: "300% é­”æ³•ä¼¤å®³ (MP:25)", reqLvl: 3 },
    's_sharp_eye': { id: 's_sharp_eye', name: "é”åˆ©ç›®å…‰", type: 'passive', branch: 'range', stats: { crit: 5, accuracy: 10 }, desc: "æš´å‡»+5%, ç²¾å‡†+10", reqLvl: 1 },
    's_iron_skin': { id: 's_iron_skin', name: "é“çš®", type: 'passive', branch: 'blunt', stats: { heavy: 10 }, desc: "é‡ç”²é˜²å¾¡+10", reqLvl: 2 },
    's_earthquake': { id: 's_earthquake', name: "åœ°éœ‡æ³¢", type: 'active', branch: 'blunt', mpCost: 40, cd: 8000, multiplier: 1.8, aoe: true, desc: "180% èŒƒå›´é’å™¨ä¼¤å®³ (MP:40)", reqLvl: 5 },
    's_hammer_of_justice': { id: 's_hammer_of_justice', name: "æ­£ä¹‰ä¹‹é”¤", type: 'active', branch: 'blunt', mpCost: 35, cd: 6000, multiplier: 3.2, desc: "320% é’å™¨ä¼¤å®³ï¼Œé™„å¸¦çœ©æ™• (MP:35)", reqLvl: 8 },
    's_stone_skin': { id: 's_stone_skin', name: "çŸ³è‚¤æœ¯", type: 'passive', branch: 'blunt', stats: { heavy: 20, hp: 50 }, desc: "é‡ç”²é˜²å¾¡+20, HP+50", reqLvl: 3 },
    's_mighty_swing': { id: 's_mighty_swing', name: "å¼ºåŠ›æŒ¥å‡»", type: 'passive', branch: 'blunt', stats: { blunt: 15, crit: 3 }, desc: "é’å™¨ä¼¤å®³+15, æš´å‡»+3%", reqLvl: 6 },
    's_unstoppable_force': { id: 's_unstoppable_force', name: "ä¸å¯é˜»æŒ¡", type: 'passive', branch: 'blunt', stats: { resist: 10, hpRegen: 3 }, desc: "æŠµæŠ—+10, å›è¡€+3", reqLvl: 10 },
    's_double_slash': { id: 's_double_slash', name: "äºŒè¿æ–©", type: 'active', branch: 'sharp', mpCost: 20, cd: 4000, hits: 2, multiplier: 1.5, desc: "150% ä¼¤å®³ï¼Œæ”»å‡»ä¸¤æ¬¡ (MP:20)", reqLvl: 4 },
    's_blade_dance': { id: 's_blade_dance', name: "å‰‘åˆƒä¹‹èˆ", type: 'active', branch: 'sharp', mpCost: 50, cd: 10000, multiplier: 2.0, hits: 3, desc: "200% ä¼¤å®³ï¼Œæ”»å‡»ä¸‰æ¬¡ (MP:50)", reqLvl: 12 },
    's_sword_mastery': { id: 's_sword_mastery', name: "å‰‘æœ¯ç²¾é€š", type: 'passive', branch: 'sharp', stats: { sharp: 25, accuracy: 15 }, desc: "åˆ©å™¨ä¼¤å®³+25, ç²¾å‡†+15", reqLvl: 2 },
    's_bleeding_edge': { id: 's_bleeding_edge', name: "æµè¡€åˆƒ", type: 'passive', branch: 'sharp', stats: { sharp: 10, lifesteal: 5 }, desc: "åˆ©å™¨ä¼¤å®³+10, å¸è¡€+5%", reqLvl: 7 },
    's_precision_cut': { id: 's_precision_cut', name: "ç²¾å‡†åˆ‡å‰²", type: 'passive', branch: 'sharp', stats: { crit: 8, critDmg: 20 }, desc: "æš´å‡»+8%, æš´ä¼¤+20%", reqLvl: 9 },
    's_ice_shard': { id: 's_ice_shard', name: "å†°é”¥æœ¯", type: 'active', branch: 'magic', mpCost: 30, cd: 5000, multiplier: 2.8, desc: "280% é­”æ³•ä¼¤å®³ï¼Œå‡é€Ÿæ•ˆæœ (MP:30)", reqLvl: 5 },
    's_chain_lightning': { id: 's_chain_lightning', name: "è¿é”é—ªç”µ", type: 'active', branch: 'magic', mpCost: 60, cd: 12000, multiplier: 2.2, chain: 3, desc: "220% ä¼¤å®³ï¼Œå¼¹å°„3ä¸ªç›®æ ‡ (MP:60)", reqLvl: 15 },
    's_healing_light': { id: 's_healing_light', name: "æ²»æ„ˆä¹‹å…‰", type: 'active', branch: 'magic', mpCost: 40, cd: 10000, heal: 0.3, desc: "æ¢å¤30%æœ€å¤§HP (MP:40)", reqLvl: 6 },
    's_arcane_knowledge': { id: 's_arcane_knowledge', name: "å¥¥æœ¯çŸ¥è¯†", type: 'passive', branch: 'magic', stats: { magic: 20, mp: 100, mpRegen: 5 }, desc: "é­”æ³•ä¼¤å®³+20, MP+100, å›é­”+5", reqLvl: 4 },
    's_elemental_focus': { id: 's_elemental_focus', name: "å…ƒç´ ä¸“æ³¨", type: 'passive', branch: 'magic', stats: { magic: 15, resistPct: 10 }, desc: "é­”æ³•ä¼¤å®³+15, æŠ—æ€§+10%", reqLvl: 8 },
    's_rapid_shot': { id: 's_rapid_shot', name: "å¿«é€Ÿå°„å‡»", type: 'active', branch: 'range', mpCost: 25, cd: 3000, multiplier: 1.2, hits: 4, desc: "120% ä¼¤å®³ï¼Œå¿«é€Ÿæ”»å‡»4æ¬¡ (MP:25)", reqLvl: 5 },
    's_poison_arrow': { id: 's_poison_arrow', name: "æ¯’ç®­", type: 'active', branch: 'range', mpCost: 35, cd: 8000, multiplier: 2.0, dot: true, desc: "200% ä¼¤å®³ï¼Œé™„åŠ ä¸­æ¯’æ•ˆæœ (MP:35)", reqLvl: 7 },
    's_eagle_eye': { id: 's_eagle_eye', name: "é¹°çœ¼", type: 'passive', branch: 'range', stats: { range: 20, accuracy: 25, crit: 5 }, desc: "è¿œç¨‹ä¼¤å®³+20, ç²¾å‡†+25, æš´å‡»+5%", reqLvl: 3 },
    's_stealth': { id: 's_stealth', name: "æ½œè¡Œ", type: 'passive', branch: 'range', stats: { dodge: 15, critDmg: 30 }, desc: "é—ªé¿+15%, æš´ä¼¤+30%", reqLvl: 10 },
    's_trap_mastery': { id: 's_trap_mastery', name: "é™·é˜±å¤§å¸ˆ", type: 'passive', branch: 'range', stats: { range: 15, dodge: 10, resist: 15 }, desc: "è¿œç¨‹ä¼¤å®³+15, é—ªé¿+10%, æŠµæŠ—+15", reqLvl: 13 },
    's_vitality': { id: 's_vitality', name: "æ´»åŠ›", type: 'passive', branch: 'general', stats: { hp: 100, hpRegen: 5 }, desc: "HP+100, å›è¡€+5", reqLvl: 2 },
    's_mana_flow': { id: 's_mana_flow', name: "é­”åŠ›æµåŠ¨", type: 'passive', branch: 'general', stats: { mp: 80, mpRegen: 4 }, desc: "MP+80, å›é­”+4", reqLvl: 2 },
    's_combat_expertise': { id: 's_combat_expertise', name: "æˆ˜æ–—ä¸“ç²¾", type: 'passive', branch: 'general', stats: { crit: 5, dodge: 5, accuracy: 10 }, desc: "æš´å‡»+5%, é—ªé¿+5%, ç²¾å‡†+10", reqLvl: 5 },
    's_iron_will': { id: 's_iron_will', name: "é’¢é“æ„å¿—", type: 'passive', branch: 'general', stats: { resist: 20, resistPct: 5 }, desc: "æŠµæŠ—+20, æŠ—æ€§+5%", reqLvl: 8 },
    's_lucky_charm': { id: 's_lucky_charm', name: "å¹¸è¿ç¬¦", type: 'passive', branch: 'general', stats: { crit: 3, dodge: 3, goldMultiplier: 0.1 }, desc: "æš´å‡»+3%, é—ªé¿+3%, é‡‘å¸è·å–+10%", reqLvl: 4 },
    's_berserker_rage': { id: 's_berserker_rage', name: "ç‹‚æš´ä¹‹æ€’", type: 'active', branch: 'special', mpCost: 60, cd: 30000, buff: { atk: 0.5, def: -0.2 }, desc: "æ”»å‡»+50%, é˜²å¾¡-20%, æŒç»­15ç§’ (MP:60)", reqLvl: 12 },
    's_divine_protection': { id: 's_divine_protection', name: "ç¥åœ£æŠ¤ç›¾", type: 'active', branch: 'special', mpCost: 45, cd: 25000, shield: 0.4, desc: "è·å¾—40%æœ€å¤§HPçš„æŠ¤ç›¾ (MP:45)", reqLvl: 14 },
    's_time_warp': { id: 's_time_warp', name: "æ—¶é—´æ‰­æ›²", type: 'active', branch: 'special', mpCost: 80, cd: 45000, haste: 0.3, desc: "æ”»å‡»é€Ÿåº¦+30%, æŒç»­10ç§’ (MP:80)", reqLvl: 18 },
    's_phoenix_rebirth': { id: 's_phoenix_rebirth', name: "å‡¤å‡°é‡ç”Ÿ", type: 'passive', branch: 'special', revive: true, desc: "æ­»äº¡æ—¶æœ‰20%å‡ ç‡å¤æ´»å¹¶æ¢å¤50%HP", reqLvl: 20 },
    's_dragon_breath': { id: 's_dragon_breath', name: "é¾™æ¯", type: 'active', branch: 'special', mpCost: 100, cd: 60000, multiplier: 4.0, aoe: true, desc: "400% èŒƒå›´ä¼¤å®³ï¼Œæ— è§†éƒ¨åˆ†é˜²å¾¡ (MP:100)", reqLvl: 25 },
    's_earth_shatter': { id: 's_earth_shatter', name: "åœ°è£‚å‡»", type: 'active', branch: 'blunt', mpCost: 45, cd: 10000, multiplier: 2.2, aoe: true, desc: "220% èŒƒå›´é’å™¨ä¼¤å®³ï¼Œé™ä½æ•Œäººç§»åŠ¨é€Ÿåº¦ (MP:45)", reqLvl: 15 },
    's_mountain_crush': { id: 's_mountain_crush', name: "å±±å´©åœ°è£‚", type: 'active', branch: 'blunt', mpCost: 80, cd: 20000, multiplier: 3.5, aoe: true, desc: "350% è¶…å¤§èŒƒå›´é’å™¨ä¼¤å®³ (MP:80)", reqLvl: 30 },
    's_hammer_of_judgment': { id: 's_hammer_of_judgment', name: "å®¡åˆ¤ä¹‹é”¤", type: 'active', branch: 'blunt', mpCost: 60, cd: 15000, multiplier: 2.8, desc: "280% ä¼¤å®³ï¼Œå¯¹ä½è¡€é‡æ•Œäººé€ æˆé¢å¤–ä¼¤å®³ (MP:60)", reqLvl: 22 },
    's_unbreakable_will': { id: 's_unbreakable_will', name: "ä¸å±ˆæ„å¿—", type: 'passive', branch: 'blunt', stats: { resist: 30, hpRegen: 10 }, desc: "æŠµæŠ—+30, å›è¡€+10", reqLvl: 18 },
    's_titan_strength': { id: 's_titan_strength', name: "æ³°å¦ä¹‹åŠ›", type: 'passive', branch: 'blunt', stats: { blunt: 40, hp: 200 }, desc: "é’å™¨ä¼¤å®³+40, HP+200", reqLvl: 25 },
    's_shield_bash': { id: 's_shield_bash', name: "ç›¾å‡»", type: 'active', branch: 'blunt', mpCost: 25, cd: 6000, multiplier: 1.8, desc: "180% ä¼¤å®³ï¼Œé™„å¸¦å‡»é€€æ•ˆæœ (MP:25)", reqLvl: 8 },
    's_concussive_blow': { id: 's_concussive_blow', name: "éœ‡è¡æ‰“å‡»", type: 'active', branch: 'blunt', mpCost: 35, cd: 8000, multiplier: 2.0, desc: "200% ä¼¤å®³ï¼Œé™ä½æ•Œäººæ”»å‡»åŠ› (MP:35)", reqLvl: 12 },
    's_war_cry': { id: 's_war_cry', name: "æˆ˜å¼", type: 'active', branch: 'blunt', mpCost: 40, cd: 12000, buff: { atk: 0.2, def: 0.1 }, desc: "æå‡20%æ”»å‡»å’Œ10%é˜²å¾¡ï¼ŒæŒç»­10ç§’ (MP:40)", reqLvl: 16 },
    's_ground_slam': { id: 's_ground_slam', name: "åœ°é¢çŒ›å‡»", type: 'active', branch: 'blunt', mpCost: 50, cd: 10000, multiplier: 2.5, aoe: true, desc: "250% èŒƒå›´ä¼¤å®³ï¼Œé™„å¸¦çœ©æ™•å‡ ç‡ (MP:50)", reqLvl: 20 },
    's_heavy_impact': { id: 's_heavy_impact', name: "é‡å‡»å†²å‡»", type: 'passive', branch: 'blunt', stats: { blunt: 25, critDmg: 35 }, desc: "é’å™¨ä¼¤å®³+25, æš´ä¼¤+35%", reqLvl: 14 },
    's_blade_storm': { id: 's_blade_storm', name: "å‰‘åˆƒé£æš´", type: 'active', branch: 'sharp', mpCost: 70, cd: 15000, multiplier: 1.5, hits: 5, desc: "150% ä¼¤å®³ï¼Œå¿«é€Ÿæ”»å‡»5æ¬¡ (MP:70)", reqLvl: 28 },
    's_deadly_precision': { id: 's_deadly_precision', name: "è‡´å‘½ç²¾å‡†", type: 'passive', branch: 'sharp', stats: { crit: 12, accuracy: 30 }, desc: "æš´å‡»+12%, ç²¾å‡†+30", reqLvl: 20 },
    's_whirlwind_slash': { id: 's_whirlwind_slash', name: "æ—‹é£æ–©", type: 'active', branch: 'sharp', mpCost: 55, cd: 12000, multiplier: 2.0, aoe: true, desc: "200% èŒƒå›´åˆ©å™¨ä¼¤å®³ (MP:55)", reqLvl: 18 },
    's_assassinate': { id: 's_assassinate', name: "æš—æ€æœ¯", type: 'active', branch: 'sharp', mpCost: 90, cd: 30000, multiplier: 5.0, desc: "500% å•ä½“ä¼¤å®³ï¼Œå¯¹çœ©æ™•ç›®æ ‡å¿…æš´å‡» (MP:90)", reqLvl: 35 },
    's_swift_strike': { id: 's_swift_strike', name: "è¿…æ·æ‰“å‡»", type: 'active', branch: 'sharp', mpCost: 20, cd: 4000, multiplier: 1.3, desc: "130% ä¼¤å®³ï¼ŒæçŸ­å†·å´æ—¶é—´ (MP:20)", reqLvl: 6 },
    's_bleeding_wound': { id: 's_bleeding_wound', name: "æµè¡€ä¼¤å£", type: 'passive', branch: 'sharp', stats: { sharp: 20, lifesteal: 8 }, desc: "åˆ©å™¨ä¼¤å®³+20, å¸è¡€+8%", reqLvl: 16 },
    's_counter_attack': { id: 's_counter_attack', name: "åå‡»", type: 'passive', branch: 'sharp', stats: { dodge: 10, crit: 5 }, desc: "é—ªé¿+10%, æš´å‡»+5%", reqLvl: 10 },
    's_fatal_thrust': { id: 's_fatal_thrust', name: "è‡´å‘½åˆºå‡»", type: 'active', branch: 'sharp', mpCost: 45, cd: 10000, multiplier: 3.0, desc: "300% ä¼¤å®³ï¼Œæ— è§†éƒ¨åˆ†é˜²å¾¡ (MP:45)", reqLvl: 22 },
    's_sword_aura': { id: 's_sword_aura', name: "å‰‘ä¹‹çµæ°”", type: 'passive', branch: 'sharp', stats: { sharp: 30, resist: 15 }, desc: "åˆ©å™¨ä¼¤å®³+30, æŠµæŠ—+15", reqLvl: 24 },
    's_blade_barrier': { id: 's_blade_barrier', name: "å‰‘åˆƒå±éšœ", type: 'active', branch: 'sharp', mpCost: 60, cd: 25000, shield: 0.3, desc: "è·å¾—30%æœ€å¤§HPçš„æŠ¤ç›¾ï¼Œåå¼¹è¿‘æˆ˜ä¼¤å®³ (MP:60)", reqLvl: 26 },
    
    's_meteor_shower': { id: 's_meteor_shower', name: "æµæ˜Ÿé›¨", type: 'active', branch: 'magic', mpCost: 120, cd: 45000, multiplier: 2.0, aoe: true, hits: 8, desc: "200% ä¼¤å®³ï¼Œå¬å”¤8é¢—æµæ˜Ÿæ”»å‡»å¤§èŒƒå›´æ•Œäºº (MP:120)", reqLvl: 40 },
    's_arcane_explosion': { id: 's_arcane_explosion', name: "å¥¥æœ¯çˆ†ç‚¸", type: 'active', branch: 'magic', mpCost: 50, cd: 8000, multiplier: 2.5, aoe: true, desc: "250% èŒƒå›´é­”æ³•ä¼¤å®³ (MP:50)", reqLvl: 16 },
    's_mana_shield': { id: 's_mana_shield', name: "é­”æ³•æŠ¤ç›¾", type: 'active', branch: 'magic', mpCost: 40, cd: 20000, shield: 0.5, desc: "æ¶ˆè€—MPç”Ÿæˆ50%æœ€å¤§HPçš„æŠ¤ç›¾ (MP:40)", reqLvl: 14 },
    's_teleport': { id: 's_teleport', name: "ç¬é—´ç§»åŠ¨", type: 'active', branch: 'magic', mpCost: 30, cd: 15000, desc: "ç¬é—´ç§»åŠ¨åˆ°å®‰å…¨ä½ç½®ï¼Œæ¸…é™¤è´Ÿé¢çŠ¶æ€ (MP:30)", reqLvl: 12 },
    's_summon_elemental': { id: 's_summon_elemental', name: "å¬å”¤å…ƒç´ ", type: 'active', branch: 'magic', mpCost: 80, cd: 60000, desc: "å¬å”¤ä¸€ä¸ªå…ƒç´ ç”Ÿç‰©ååŠ©æˆ˜æ–—30ç§’ (MP:80)", reqLvl: 30 },
    's_time_stop': { id: 's_time_stop', name: "æ—¶é—´åœæ­¢", type: 'active', branch: 'magic', mpCost: 150, cd: 120000, desc: "åœæ­¢æ—¶é—´3ç§’ï¼ŒæœŸé—´åªæœ‰ä½ èƒ½è¡ŒåŠ¨ (MP:150)", reqLvl: 45 },
    's_black_hole': { id: 's_black_hole', name: "é»‘æ´", type: 'active', branch: 'magic', mpCost: 100, cd: 60000, multiplier: 3.5, aoe: true, desc: "350% èŒƒå›´ä¼¤å®³ï¼Œå¸å¼•æ•Œäººå¹¶å‡é€Ÿ (MP:100)", reqLvl: 38 },
    's_magic_amplify': { id: 's_magic_amplify', name: "é­”æ³•å¢å¹…", type: 'passive', branch: 'magic', stats: { magic: 50, mpRegen: 10 }, desc: "é­”æ³•ä¼¤å®³+50, å›é­”+10", reqLvl: 28 },
    's_energy_drain': { id: 's_energy_drain', name: "èƒ½é‡å¸å–", type: 'active', branch: 'magic', mpCost: 20, cd: 10000, desc: "å¸å–æ•ŒäººMPæ¢å¤è‡ªèº«MP (MP:20)", reqLvl: 10 },
    's_frost_nova': { id: 's_frost_nova', name: "å†°éœœæ–°æ˜Ÿ", type: 'active', branch: 'magic', mpCost: 45, cd: 12000, multiplier: 2.0, aoe: true, desc: "200% èŒƒå›´å†°ç³»ä¼¤å®³ï¼Œå†»ç»“æ•Œäºº (MP:45)", reqLvl: 18 },
    's_lightning_storm': { id: 's_lightning_storm', name: "é›·æš´", type: 'active', branch: 'magic', mpCost: 70, cd: 20000, multiplier: 2.8, aoe: true, desc: "280% èŒƒå›´é›·ç³»ä¼¤å®³ï¼Œè¿é”æ•ˆæœ (MP:70)", reqLvl: 25 },
    's_arcane_missiles': { id: 's_arcane_missiles', name: "å¥¥æœ¯é£å¼¹", type: 'active', branch: 'magic', mpCost: 35, cd: 8000, multiplier: 1.2, hits: 6, desc: "120% ä¼¤å®³ï¼Œå‘å°„6æšè‡ªåŠ¨è¿½è¸ªçš„é£å¼¹ (MP:35)", reqLvl: 15 },
    's_mind_control': { id: 's_mind_control', name: "ç²¾ç¥æ§åˆ¶", type: 'active', branch: 'magic', mpCost: 60, cd: 30000, desc: "æš‚æ—¶æ§åˆ¶ä¸€ä¸ªéç²¾è‹±æ•Œäºº10ç§’ (MP:60)", reqLvl: 32 },
    's_dispel_magic': { id: 's_dispel_magic', name: "é©±æ•£é­”æ³•", type: 'active', branch: 'magic', mpCost: 25, cd: 15000, desc: "é©±æ•£è‡ªèº«è´Ÿé¢çŠ¶æ€å’Œæ•Œäººå¢ç›ŠçŠ¶æ€ (MP:25)", reqLvl: 20 },
    's_magic_reflection': { id: 's_magic_reflection', name: "é­”æ³•åå°„", type: 'passive', branch: 'magic', stats: { resistPct: 20, mp: 150 }, desc: "æŠ—æ€§+20%, MP+150", reqLvl: 22 },
    's_sniper_shot': { id: 's_sniper_shot', name: "ç‹™å‡»å°„å‡»", type: 'active', branch: 'range', mpCost: 60, cd: 15000, multiplier: 4.0, desc: "400% è¶…è¿œè·ç¦»å•ä½“ä¼¤å®³ (MP:60)", reqLvl: 30 },
    's_multishot': { id: 's_multishot', name: "å¤šé‡å°„å‡»", type: 'active', branch: 'range', mpCost: 45, cd: 10000, multiplier: 1.5, hits: 5, desc: "150% ä¼¤å®³ï¼ŒåŒæ—¶æ”»å‡»5ä¸ªç›®æ ‡ (MP:45)", reqLvl: 25 },
    's_explosive_arrow': { id: 's_explosive_arrow', name: "çˆ†ç‚¸ç®­", type: 'active', branch: 'range', mpCost: 55, cd: 12000, multiplier: 2.5, aoe: true, desc: "250% èŒƒå›´ä¼¤å®³ï¼Œçˆ†ç‚¸æ•ˆæœ (MP:55)", reqLvl: 28 },
    's_homing_missile': { id: 's_homing_missile', name: "è¿½è¸ªå¯¼å¼¹", type: 'active', branch: 'range', mpCost: 40, cd: 8000, multiplier: 2.0, desc: "200% ä¼¤å®³ï¼Œè‡ªåŠ¨è¿½è¸ªæ•Œäºº (MP:40)", reqLvl: 20 },
    's_arrow_rain': { id: 's_arrow_rain', name: "ç®­é›¨", type: 'active', branch: 'range', mpCost: 70, cd: 18000, multiplier: 1.8, aoe: true, desc: "180% å¤§èŒƒå›´ç®­é›¨æ”»å‡» (MP:70)", reqLvl: 35 },
    's_camouflage': { id: 's_camouflage', name: "ä¼ªè£…", type: 'passive', branch: 'range', stats: { dodge: 20, accuracy: 15 }, desc: "é—ªé¿+20%, ç²¾å‡†+15", reqLvl: 18 },
    's_quick_reload': { id: 's_quick_reload', name: "å¿«é€Ÿè£…å¡«", type: 'passive', branch: 'range', stats: { range: 25, crit: 8 }, desc: "è¿œç¨‹ä¼¤å®³+25, æš´å‡»+8%", reqLvl: 22 },
    's_piercing_shot': { id: 's_piercing_shot', name: "ç©¿é€å°„å‡»", type: 'active', branch: 'range', mpCost: 50, cd: 10000, multiplier: 2.2, desc: "220% ä¼¤å®³ï¼Œç©¿é€ä¸€æ¡ç›´çº¿ä¸Šçš„æ•Œäºº (MP:50)", reqLvl: 26 },
    's_trap_expert': { id: 's_trap_expert', name: "é™·é˜±ä¸“å®¶", type: 'passive', branch: 'range', stats: { range: 18, dodge: 12, resist: 20 }, desc: "è¿œç¨‹ä¼¤å®³+18, é—ªé¿+12%, æŠµæŠ—+20", reqLvl: 30 },
    's_deadly_aim': { id: 's_deadly_aim', name: "è‡´å‘½ç„å‡†", type: 'passive', branch: 'range', stats: { crit: 10, critDmg: 40, accuracy: 20 }, desc: "æš´å‡»+10%, æš´ä¼¤+40%, ç²¾å‡†+20", reqLvl: 28 },
    's_second_wind': { id: 's_second_wind', name: "å›æ°”", type: 'passive', branch: 'general', stats: { hpRegen: 8, mpRegen: 6 }, desc: "å›è¡€+8, å›é­”+6", reqLvl: 12 },
    's_battle_fury': { id: 's_battle_fury', name: "æˆ˜æ–—ç‹‚æ€’", type: 'passive', branch: 'general', stats: { crit: 8, lifesteal: 6 }, desc: "æš´å‡»+8%, å¸è¡€+6%", reqLvl: 16 },
    's_evasion_master': { id: 's_evasion_master', name: "é—ªé¿å¤§å¸ˆ", type: 'passive', branch: 'general', stats: { dodge: 15, resist: 25 }, desc: "é—ªé¿+15%, æŠµæŠ—+25", reqLvl: 20 },
    's_precision_strike': { id: 's_precision_strike', name: "ç²¾å‡†æ‰“å‡»", type: 'passive', branch: 'general', stats: { accuracy: 30, critDmg: 35 }, desc: "ç²¾å‡†+30, æš´ä¼¤+35%", reqLvl: 24 },
    's_iron_constitution': { id: 's_iron_constitution', name: "é’¢é“ä½“é­„", type: 'passive', branch: 'general', stats: { hp: 200, resistPct: 8 }, desc: "HP+200, æŠ—æ€§+8%", reqLvl: 28 },
    's_mana_overflow': { id: 's_mana_overflow', name: "é­”åŠ›æº¢å‡º", type: 'passive', branch: 'general', stats: { mp: 150, mpRegen: 12 }, desc: "MP+150, å›é­”+12", reqLvl: 32 },
    's_gold_digger': { id: 's_gold_digger', name: "æ·˜é‡‘è€…", type: 'passive', branch: 'general', stats: { goldMultiplier: 0.25, expMultiplier: 0.1 }, desc: "é‡‘å¸è·å–+25%, ç»éªŒè·å–+10%", reqLvl: 14 },
    's_lucky_find': { id: 's_lucky_find', name: "å¹¸è¿å‘ç°", type: 'passive', branch: 'general', stats: { crit: 5, dodge: 5, goldMultiplier: 0.15 }, desc: "æš´å‡»+5%, é—ªé¿+5%, é‡‘å¸+15%", reqLvl: 18 },
    's_combat_mastery': { id: 's_combat_mastery', name: "æˆ˜æ–—ç²¾é€š", type: 'passive', branch: 'general', stats: { allStats: 10 }, desc: "å…¨å±æ€§+10", reqLvl: 40 },
    's_elemental_resistance': { id: 's_elemental_resistance', name: "å…ƒç´ æŠ—æ€§", type: 'passive', branch: 'general', stats: { resistPct: 15, hp: 100 }, desc: "æŠ—æ€§+15%, HP+100", reqLvl: 22 },
    's_time_acceleration': { id: 's_time_acceleration', name: "æ—¶é—´åŠ é€Ÿ", type: 'active', branch: 'special', mpCost: 80, cd: 40000, haste: 0.4, desc: "æ”»å‡»é€Ÿåº¦+40%, æŒç»­12ç§’ (MP:80)", reqLvl: 35 },
    's_dimensional_rift': { id: 's_dimensional_rift', name: "æ¬¡å…ƒè£‚ç¼", type: 'active', branch: 'special', mpCost: 120, cd: 60000, multiplier: 3.8, aoe: true, desc: "380% èŒƒå›´ä¼¤å®³ï¼Œæ’•è£‚ç©ºé—´ (MP:120)", reqLvl: 45 },
    's_soul_harvest': { id: 's_soul_harvest', name: "çµé­‚æ”¶å‰²", type: 'active', branch: 'special', mpCost: 90, cd: 30000, desc: "å¯¹ä½è¡€é‡æ•Œäººé€ æˆè‡´å‘½ä¼¤å®³ï¼Œæ¢å¤è‡ªèº«HP/MP (MP:90)", reqLvl: 38 },
    's_absolute_zero': { id: 's_absolute_zero', name: "ç»å¯¹é›¶åº¦", type: 'active', branch: 'special', mpCost: 100, cd: 45000, multiplier: 3.2, aoe: true, desc: "320% èŒƒå›´å†°ç³»ä¼¤å®³ï¼Œå†»ç»“æ‰€æœ‰æ•Œäºº (MP:100)", reqLvl: 42 },
    's_solar_flare': { id: 's_solar_flare', name: "å¤ªé˜³è€€æ–‘", type: 'active', branch: 'special', mpCost: 110, cd: 50000, multiplier: 4.5, aoe: true, desc: "450% èŒƒå›´å…‰ç³»ä¼¤å®³ï¼Œè‡´ç›²æ•ˆæœ (MP:110)", reqLvl: 48 },
    's_gravity_crush': { id: 's_gravity_crush', name: "é‡åŠ›ç¢¾å‹", type: 'active', branch: 'special', mpCost: 95, cd: 35000, multiplier: 3.5, desc: "350% ä¼¤å®³ï¼Œé™ä½æ•Œäººç§»åŠ¨å’Œæ”»å‡»é€Ÿåº¦ (MP:95)", reqLvl: 40 },
    's_quantum_entanglement': { id: 's_quantum_entanglement', name: "é‡å­çº ç¼ ", type: 'passive', branch: 'special', stats: { dodge: 25, crit: 12, resistPct: 18 }, desc: "é—ªé¿+25%, æš´å‡»+12%, æŠ—æ€§+18%", reqLvl: 50 },
    's_reality_bend': { id: 's_reality_bend', name: "ç°å®æ‰­æ›²", type: 'active', branch: 'special', mpCost: 150, cd: 90000, desc: "æš‚æ—¶æ”¹å˜æˆ˜æ–—è§„åˆ™ï¼Œé‡ç½®æ‰€æœ‰æŠ€èƒ½å†·å´ (MP:150)", reqLvl: 55 },
    's_eternal_flame': { id: 's_eternal_flame', name: "æ°¸æ’ä¹‹ç«", type: 'passive', branch: 'special', stats: { hpRegen: 15, mpRegen: 12, lifesteal: 10 }, desc: "å›è¡€+15, å›é­”+12, å¸è¡€+10%", reqLvl: 45 },
    's_void_walker': { id: 's_void_walker', name: "è™šç©ºè¡Œè€…", type: 'passive', branch: 'special', stats: { dodge: 30, mp: 200, resistPct: 25 }, desc: "é—ªé¿+30%, MP+200, æŠ—æ€§+25%", reqLvl: 52 },
    's_celestial_blessing': { id: 's_celestial_blessing', name: "å¤©ç•Œç¥ç¦", type: 'active', branch: 'special', mpCost: 80, cd: 30000, buff: { atk: 0.3, def: 0.3, haste: 0.2 }, desc: "å…¨å±æ€§æå‡30%ï¼Œæ”»å‡»é€Ÿåº¦+20% (MP:80)", reqLvl: 44 },
    's_abyssal_scream': { id: 's_abyssal_scream', name: "æ·±æ¸Šå°–å•¸", type: 'active', branch: 'special', mpCost: 70, cd: 25000, multiplier: 2.8, aoe: true, desc: "280% èŒƒå›´æš—å½±ä¼¤å®³ï¼Œææƒ§æ•ˆæœ (MP:70)", reqLvl: 36 },
    's_nova_explosion': { id: 's_nova_explosion', name: "æ–°æ˜Ÿçˆ†ç‚¸", type: 'active', branch: 'special', mpCost: 130, cd: 75000, multiplier: 5.0, aoe: true, desc: "500% è¶…å¤§èŒƒå›´çˆ†ç‚¸ä¼¤å®³ (MP:130)", reqLvl: 60 },
    's_immortal_will': { id: 's_immortal_will', name: "ä¸æœ½æ„å¿—", type: 'passive', branch: 'special', revive: true, stats: { hp: 300, resist: 50 }, desc: "æ­»äº¡æ—¶æœ‰30%å‡ ç‡å¤æ´»å¹¶æ¢å¤70%HP", reqLvl: 58 },
    's_universe_collapse': { id: 's_universe_collapse', name: "å®‡å®™å´©å¡Œ", type: 'active', branch: 'special', mpCost: 200, cd: 120000, multiplier: 8.0, aoe: true, desc: "800% ç»ˆæèŒƒå›´ä¼¤å®³ï¼Œæ¶ˆè€—æ‰€æœ‰MP (MP:200)", reqLvl: 99 }
};

this.recipes = [
  
// 1-5çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨1çº§ææ–™)
{ id: 'r_10001', result: '10001', reqLevel: 1, mats: {'m_slime_gel': 1, 'm_rabbit_fur': 1} },
{ id: 'r_10002', result: '10002', reqLevel: 1, mats: {'m_goblin_ear': 1, 'm_boar_tusk': 1} },
{ id: 'r_10003', result: '10003', reqLevel: 1, mats: {'m_wolf_fang': 1, 'm_slime_gel': 1} },
{ id: 'r_10004', result: '10004', reqLevel: 1, mats: {'m_rabbit_fur': 1, 'm_goblin_ear': 1} },
{ id: 'r_10005', result: '10005', reqLevel: 1, mats: {'m_boar_tusk': 1, 'm_wolf_fang': 1} },
{ id: 'r_10006', result: '10006', reqLevel: 1, mats: {'m_slime_gel': 1, 'm_boar_tusk': 1} },
{ id: 'r_10007', result: '10007', reqLevel: 1, mats: {'m_rabbit_fur': 1, 'm_wolf_fang': 1} },
{ id: 'r_10008', result: '10008', reqLevel: 1, mats: {'m_goblin_ear': 1, 'm_slime_gel': 1} },
{ id: 'r_10009', result: '10009', reqLevel: 1, mats: {'m_boar_tusk': 1, 'm_rabbit_fur': 1} },
{ id: 'r_10010', result: '10010', reqLevel: 1, mats: {'m_wolf_fang': 1, 'm_goblin_ear': 1} },
{ id: 'r_10011', result: '10011', reqLevel: 1, mats: {'m_slime_gel': 1, 'm_wolf_fang': 1} },
{ id: 'r_10012', result: '10012', reqLevel: 1, mats: {'m_rabbit_fur': 1, 'm_goblin_ear': 1} },
{ id: 'r_10013', result: '10013', reqLevel: 1, mats: {'m_boar_tusk': 1, 'm_slime_gel': 1} },
{ id: 'r_10014', result: '10014', reqLevel: 1, mats: {'m_wolf_fang': 1, 'm_rabbit_fur': 1} },

// 5-10çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨5çº§ææ–™)
{ id: 'r_10051', result: '10051', reqLevel: 5, mats: {'m_spider_silk': 5, 'm_beetle_shell': 5} },
{ id: 'r_10052', result: '10052', reqLevel: 5, mats: {'m_vine_whip': 5, 'm_tiger_claw': 5} },
{ id: 'r_10053', result: '10053', reqLevel: 5, mats: {'m_bear_pelt': 5, 'm_spider_silk': 5} },
{ id: 'r_10054', result: '10054', reqLevel: 5, mats: {'m_beetle_shell': 5, 'm_vine_whip': 5} },
{ id: 'r_10055', result: '10055', reqLevel: 5, mats: {'m_tiger_claw': 5, 'm_bear_pelt': 5} },
{ id: 'r_10056', result: '10056', reqLevel: 5, mats: {'m_spider_silk': 5, 'm_tiger_claw': 5} },
{ id: 'r_10057', result: '10057', reqLevel: 5, mats: {'m_beetle_shell': 5, 'm_bear_pelt': 5} },
{ id: 'r_10058', result: '10058', reqLevel: 5, mats: {'m_vine_whip': 5, 'm_spider_silk': 5} },
{ id: 'r_10059', result: '10059', reqLevel: 5, mats: {'m_tiger_claw': 5, 'm_beetle_shell': 5} },
{ id: 'r_10060', result: '10060', reqLevel: 5, mats: {'m_bear_pelt': 5, 'm_vine_whip': 5} },
{ id: 'r_10061', result: '10061', reqLevel: 5, mats: {'m_spider_silk': 5, 'm_bear_pelt': 5} },
{ id: 'r_10062', result: '10062', reqLevel: 5, mats: {'m_beetle_shell': 5, 'm_vine_whip': 5} },
{ id: 'r_10063', result: '10063', reqLevel: 5, mats: {'m_tiger_claw': 5, 'm_spider_silk': 5} },
{ id: 'r_10064', result: '10064', reqLevel: 5, mats: {'m_bear_pelt': 5, 'm_beetle_shell': 5} },

// 10-15çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨10çº§ææ–™)
{ id: 'r_10101', result: '10101', reqLevel: 10, mats: {'m_toxic_gland': 10, 'm_crab_claw': 10} },
{ id: 'r_10102', result: '10102', reqLevel: 10, mats: {'m_mud_core': 10, 'm_vulture_feather': 10} },
{ id: 'r_10103', result: '10103', reqLevel: 10, mats: {'m_hydra_scale': 10, 'm_toxic_gland': 10} },
{ id: 'r_10104', result: '10104', reqLevel: 10, mats: {'m_crab_claw': 10, 'm_mud_core': 10} },
{ id: 'r_10105', result: '10105', reqLevel: 10, mats: {'m_vulture_feather': 10, 'm_hydra_scale': 10} },
{ id: 'r_10106', result: '10106', reqLevel: 10, mats: {'m_toxic_gland': 10, 'm_vulture_feather': 10} },
{ id: 'r_10107', result: '10107', reqLevel: 10, mats: {'m_crab_claw': 10, 'm_hydra_scale': 10} },
{ id: 'r_10108', result: '10108', reqLevel: 10, mats: {'m_mud_core': 10, 'm_toxic_gland': 10} },
{ id: 'r_10109', result: '10109', reqLevel: 10, mats: {'m_vulture_feather': 10, 'm_crab_claw': 10} },
{ id: 'r_10110', result: '10110', reqLevel: 10, mats: {'m_hydra_scale': 10, 'm_mud_core': 10} },
{ id: 'r_10111', result: '10111', reqLevel: 10, mats: {'m_toxic_gland': 10, 'm_hydra_scale': 10} },
{ id: 'r_10112', result: '10112', reqLevel: 10, mats: {'m_crab_claw': 10, 'm_mud_core': 10} },
{ id: 'r_10113', result: '10113', reqLevel: 10, mats: {'m_vulture_feather': 10, 'm_toxic_gland': 10} },
{ id: 'r_10114', result: '10114', reqLevel: 10, mats: {'m_hydra_scale': 10, 'm_crab_claw': 10} },

// 15-20çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨15çº§ææ–™)
{ id: 'r_10151', result: '10151', reqLevel: 15, mats: {'m_miner_pick': 15, 'm_bat_wing': 15} },
{ id: 'r_10152', result: '10152', reqLevel: 15, mats: {'m_stone_shard': 15, 'm_worm_tooth': 15} },
{ id: 'r_10153', result: '10153', reqLevel: 15, mats: {'m_burrower_horn': 15, 'm_miner_pick': 15} },
{ id: 'r_10154', result: '10154', reqLevel: 15, mats: {'m_bat_wing': 15, 'm_stone_shard': 15} },
{ id: 'r_10155', result: '10155', reqLevel: 15, mats: {'m_worm_tooth': 15, 'm_burrower_horn': 15} },
{ id: 'r_10156', result: '10156', reqLevel: 15, mats: {'m_miner_pick': 15, 'm_worm_tooth': 15} },
{ id: 'r_10157', result: '10157', reqLevel: 15, mats: {'m_stone_shard': 15, 'm_burrower_horn': 15} },
{ id: 'r_10158', result: '10158', reqLevel: 15, mats: {'m_bat_wing': 15, 'm_miner_pick': 15} },
{ id: 'r_10159', result: '10159', reqLevel: 15, mats: {'m_worm_tooth': 15, 'm_stone_shard': 15} },
{ id: 'r_10160', result: '10160', reqLevel: 15, mats: {'m_burrower_horn': 15, 'm_bat_wing': 15} },
{ id: 'r_10161', result: '10161', reqLevel: 15, mats: {'m_miner_pick': 15, 'm_burrower_horn': 15} },
{ id: 'r_10162', result: '10162', reqLevel: 15, mats: {'m_stone_shard': 15, 'm_bat_wing': 15} },
{ id: 'r_10163', result: '10163', reqLevel: 15, mats: {'m_worm_tooth': 15, 'm_miner_pick': 15} },
{ id: 'r_10164', result: '10164', reqLevel: 15, mats: {'m_burrower_horn': 15, 'm_stone_shard': 15} },

// 20-25çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨20çº§ææ–™)
{ id: 'r_10201', result: '10201', reqLevel: 20, mats: {'m_bone_fragment': 20, 'm_ghost_essence': 20} },
{ id: 'r_10202', result: '10202', reqLevel: 20, mats: {'m_rotting_flesh': 20, 'm_necromancer_staff': 20} },
{ id: 'r_10203', result: '10203', reqLevel: 20, mats: {'m_bone_crown': 20, 'm_bone_fragment': 20} },
{ id: 'r_10204', result: '10204', reqLevel: 20, mats: {'m_ghost_essence': 20, 'm_rotting_flesh': 20} },
{ id: 'r_10205', result: '10205', reqLevel: 20, mats: {'m_necromancer_staff': 20, 'm_bone_crown': 20} },
{ id: 'r_10206', result: '10206', reqLevel: 20, mats: {'m_bone_fragment': 20, 'm_necromancer_staff': 20} },
{ id: 'r_10207', result: '10207', reqLevel: 20, mats: {'m_ghost_essence': 20, 'm_bone_crown': 20} },
{ id: 'r_10208', result: '10208', reqLevel: 20, mats: {'m_rotting_flesh': 20, 'm_bone_fragment': 20} },
{ id: 'r_10209', result: '10209', reqLevel: 20, mats: {'m_necromancer_staff': 20, 'm_ghost_essence': 20} },
{ id: 'r_10210', result: '10210', reqLevel: 20, mats: {'m_bone_crown': 20, 'm_rotting_flesh': 20} },
{ id: 'r_10211', result: '10211', reqLevel: 20, mats: {'m_bone_fragment': 20, 'm_bone_crown': 20} },
{ id: 'r_10212', result: '10212', reqLevel: 20, mats: {'m_ghost_essence': 20, 'm_necromancer_staff': 20} },
{ id: 'r_10213', result: '10213', reqLevel: 20, mats: {'m_rotting_flesh': 20, 'm_ghost_essence': 20} },
{ id: 'r_10214', result: '10214', reqLevel: 20, mats: {'m_necromancer_staff': 20, 'm_bone_fragment': 20} },

// 25-30çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨25çº§ææ–™)
{ id: 'r_10251', result: '10251', reqLevel: 25, mats: {'m_lava_gel': 25, 'm_fire_scale': 25} },
{ id: 'r_10252', result: '10252', reqLevel: 25, mats: {'m_magma_rock': 25, 'm_firefly_wing': 25} },
{ id: 'r_10253', result: '10253', reqLevel: 25, mats: {'m_fiery_heart': 25, 'm_lava_gel': 25} },
{ id: 'r_10254', result: '10254', reqLevel: 25, mats: {'m_fire_scale': 25, 'm_magma_rock': 25} },
{ id: 'r_10255', result: '10255', reqLevel: 25, mats: {'m_firefly_wing': 25, 'm_fiery_heart': 25} },
{ id: 'r_10256', result: '10256', reqLevel: 25, mats: {'m_lava_gel': 25, 'm_firefly_wing': 25} },
{ id: 'r_10257', result: '10257', reqLevel: 25, mats: {'m_fire_scale': 25, 'm_fiery_heart': 25} },
{ id: 'r_10258', result: '10258', reqLevel: 25, mats: {'m_magma_rock': 25, 'm_lava_gel': 25} },
{ id: 'r_10259', result: '10259', reqLevel: 25, mats: {'m_firefly_wing': 25, 'm_fire_scale': 25} },
{ id: 'r_10260', result: '10260', reqLevel: 25, mats: {'m_fiery_heart': 25, 'm_magma_rock': 25} },
{ id: 'r_10261', result: '10261', reqLevel: 25, mats: {'m_lava_gel': 25, 'm_fiery_heart': 25} },
{ id: 'r_10262', result: '10262', reqLevel: 25, mats: {'m_fire_scale': 25, 'm_magma_rock': 25} },
{ id: 'r_10263', result: '10263', reqLevel: 25, mats: {'m_firefly_wing': 25, 'm_lava_gel': 25} },
{ id: 'r_10264', result: '10264', reqLevel: 25, mats: {'m_fiery_heart': 25, 'm_fire_scale': 25} },

// 30-35çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨30çº§ææ–™)
{ id: 'r_10301', result: '10301', reqLevel: 30, mats: {'m_ice_tusk': 30, 'm_snow_spirit': 25} },
{ id: 'r_10302', result: '10302', reqLevel: 30, mats: {'m_mammoth_tusk': 30, 'm_ice_scale': 25} },
{ id: 'r_10303', result: '10303', reqLevel: 30, mats: {'m_ice_crown': 30, 'm_ice_tusk': 25} },
{ id: 'r_10304', result: '10304', reqLevel: 30, mats: {'m_snow_spirit': 30, 'm_mammoth_tusk': 25} },
{ id: 'r_10305', result: '10305', reqLevel: 30, mats: {'m_ice_scale': 30, 'm_ice_crown': 25} },
{ id: 'r_10306', result: '10306', reqLevel: 30, mats: {'m_ice_tusk': 30, 'm_ice_scale': 25} },
{ id: 'r_10307', result: '10307', reqLevel: 30, mats: {'m_snow_spirit': 30, 'm_ice_crown': 25} },
{ id: 'r_10308', result: '10308', reqLevel: 30, mats: {'m_mammoth_tusk': 30, 'm_ice_tusk': 25} },
{ id: 'r_10309', result: '10309', reqLevel: 30, mats: {'m_ice_scale': 30, 'm_snow_spirit': 25} },
{ id: 'r_10310', result: '10310', reqLevel: 30, mats: {'m_ice_crown': 30, 'm_mammoth_tusk': 25} },
{ id: 'r_10311', result: '10311', reqLevel: 30, mats: {'m_ice_tusk': 30, 'm_ice_crown': 25} },
{ id: 'r_10312', result: '10312', reqLevel: 30, mats: {'m_snow_spirit': 30, 'm_mammoth_tusk': 25} },
{ id: 'r_10313', result: '10313', reqLevel: 30, mats: {'m_ice_scale': 30, 'm_ice_tusk': 25} },
{ id: 'r_10314', result: '10314', reqLevel: 30, mats: {'m_ice_crown': 30, 'm_snow_spirit': 25} },

// 35-40çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨35çº§ææ–™)
{ id: 'r_10351', result: '10351', reqLevel: 35, mats: {'m_thunder_feather': 35, 'm_storm_core': 30} },
{ id: 'r_10352', result: '10352', reqLevel: 35, mats: {'m_eel_spine': 35, 'm_thunder_horn': 30} },
{ id: 'r_10353', result: '10353', reqLevel: 35, mats: {'m_thunderbolt': 35, 'm_thunder_feather': 30} },
{ id: 'r_10354', result: '10354', reqLevel: 35, mats: {'m_storm_core': 35, 'm_eel_spine': 30} },
{ id: 'r_10355', result: '10355', reqLevel: 35, mats: {'m_thunder_horn': 35, 'm_thunderbolt': 30} },
{ id: 'r_10356', result: '10356', reqLevel: 35, mats: {'m_thunder_feather': 35, 'm_thunder_horn': 30} },
{ id: 'r_10357', result: '10357', reqLevel: 35, mats: {'m_storm_core': 35, 'm_thunderbolt': 30} },
{ id: 'r_10358', result: '10358', reqLevel: 35, mats: {'m_eel_spine': 35, 'm_thunder_feather': 30} },
{ id: 'r_10359', result: '10359', reqLevel: 35, mats: {'m_thunder_horn': 35, 'm_storm_core': 30} },
{ id: 'r_10360', result: '10360', reqLevel: 35, mats: {'m_thunderbolt': 35, 'm_eel_spine': 30} },
{ id: 'r_10361', result: '10361', reqLevel: 35, mats: {'m_thunder_feather': 35, 'm_thunderbolt': 30} },
{ id: 'r_10362', result: '10362', reqLevel: 35, mats: {'m_storm_core': 35, 'm_eel_spine': 30} },
{ id: 'r_10363', result: '10363', reqLevel: 35, mats: {'m_thunder_horn': 35, 'm_thunder_feather': 30} },
{ id: 'r_10364', result: '10364', reqLevel: 35, mats: {'m_thunderbolt': 35, 'm_storm_core': 30} },

// 40-45çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨40çº§ææ–™)
{ id: 'r_10401', result: '10401', reqLevel: 40, mats: {'m_ancient_bark': 40, 'm_poison_dust': 35} },
{ id: 'r_10402', result: '10402', reqLevel: 40, mats: {'m_jungle_fang': 40, 'm_fairy_arrow': 35} },
{ id: 'r_10403', result: '10403', reqLevel: 40, mats: {'m_jade_scale': 40, 'm_ancient_bark': 35} },
{ id: 'r_10404', result: '10404', reqLevel: 40, mats: {'m_poison_dust': 40, 'm_jungle_fang': 35} },
{ id: 'r_10405', result: '10405', reqLevel: 40, mats: {'m_fairy_arrow': 40, 'm_jade_scale': 35} },
{ id: 'r_10406', result: '10406', reqLevel: 40, mats: {'m_ancient_bark': 40, 'm_fairy_arrow': 35} },
{ id: 'r_10407', result: '10407', reqLevel: 40, mats: {'m_poison_dust': 40, 'm_jade_scale': 35} },
{ id: 'r_10408', result: '10408', reqLevel: 40, mats: {'m_jungle_fang': 40, 'm_ancient_bark': 35} },
{ id: 'r_10409', result: '10409', reqLevel: 40, mats: {'m_fairy_arrow': 40, 'm_poison_dust': 35} },
{ id: 'r_10410', result: '10410', reqLevel: 40, mats: {'m_jade_scale': 40, 'm_jungle_fang': 35} },
{ id: 'r_10411', result: '10411', reqLevel: 40, mats: {'m_ancient_bark': 40, 'm_jade_scale': 35} },
{ id: 'r_10412', result: '10412', reqLevel: 40, mats: {'m_poison_dust': 40, 'm_jungle_fang': 35} },
{ id: 'r_10413', result: '10413', reqLevel: 40, mats: {'m_fairy_arrow': 40, 'm_ancient_bark': 35} },
{ id: 'r_10414', result: '10414', reqLevel: 40, mats: {'m_jade_scale': 40, 'm_poison_dust': 35} },

// 45-50çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨45çº§ææ–™)
{ id: 'r_10451', result: '10451', reqLevel: 45, mats: {'m_void_dust': 45, 'm_chaos_claw': 40} },
{ id: 'r_10452', result: '10452', reqLevel: 45, mats: {'m_shadow_veil': 45, 'm_torment_thread': 40} },
{ id: 'r_10453', result: '10453', reqLevel: 45, mats: {'m_abyss_crown': 45, 'm_void_dust': 40} },
{ id: 'r_10454', result: '10454', reqLevel: 45, mats: {'m_chaos_claw': 45, 'm_shadow_veil': 40} },
{ id: 'r_10455', result: '10455', reqLevel: 45, mats: {'m_torment_thread': 45, 'm_abyss_crown': 40} },
{ id: 'r_10456', result: '10456', reqLevel: 45, mats: {'m_void_dust': 45, 'm_torment_thread': 40} },
{ id: 'r_10457', result: '10457', reqLevel: 45, mats: {'m_chaos_claw': 45, 'm_abyss_crown': 40} },
{ id: 'r_10458', result: '10458', reqLevel: 45, mats: {'m_shadow_veil': 45, 'm_void_dust': 40} },
{ id: 'r_10459', result: '10459', reqLevel: 45, mats: {'m_torment_thread': 45, 'm_chaos_claw': 40} },
{ id: 'r_10460', result: '10460', reqLevel: 45, mats: {'m_abyss_crown': 45, 'm_shadow_veil': 40} },
{ id: 'r_10461', result: '10461', reqLevel: 45, mats: {'m_void_dust': 45, 'm_abyss_crown': 40} },
{ id: 'r_10462', result: '10462', reqLevel: 45, mats: {'m_chaos_claw': 45, 'm_shadow_veil': 40} },
{ id: 'r_10463', result: '10463', reqLevel: 45, mats: {'m_torment_thread': 45, 'm_void_dust': 40} },
{ id: 'r_10464', result: '10464', reqLevel: 45, mats: {'m_abyss_crown': 45, 'm_chaos_claw': 40} },

// 50-55çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨50çº§ææ–™)
{ id: 'r_10501', result: '10501', reqLevel: 50, mats: {'m_crystal_shard': 50, 'm_light_essence': 45} },
{ id: 'r_10502', result: '10502', reqLevel: 50, mats: {'m_crystal_core': 50, 'm_prism_shard': 45} },
{ id: 'r_10503', result: '10503', reqLevel: 50, mats: {'m_crystal_heart': 50, 'm_crystal_shard': 45} },
{ id: 'r_10504', result: '10504', reqLevel: 50, mats: {'m_light_essence': 50, 'm_crystal_core': 45} },
{ id: 'r_10505', result: '10505', reqLevel: 50, mats: {'m_prism_shard': 50, 'm_crystal_heart': 45} },
{ id: 'r_10506', result: '10506', reqLevel: 50, mats: {'m_crystal_shard': 50, 'm_prism_shard': 45} },
{ id: 'r_10507', result: '10507', reqLevel: 50, mats: {'m_light_essence': 50, 'm_crystal_heart': 45} },
{ id: 'r_10508', result: '10508', reqLevel: 50, mats: {'m_crystal_core': 50, 'm_crystal_shard': 45} },
{ id: 'r_10509', result: '10509', reqLevel: 50, mats: {'m_prism_shard': 50, 'm_light_essence': 45} },
{ id: 'r_10510', result: '10510', reqLevel: 50, mats: {'m_crystal_heart': 50, 'm_crystal_core': 45} },
{ id: 'r_10511', result: '10511', reqLevel: 50, mats: {'m_crystal_shard': 50, 'm_crystal_heart': 45} },
{ id: 'r_10512', result: '10512', reqLevel: 50, mats: {'m_light_essence': 50, 'm_crystal_core': 45} },
{ id: 'r_10513', result: '10513', reqLevel: 50, mats: {'m_prism_shard': 50, 'm_crystal_shard': 45} },
{ id: 'r_10514', result: '10514', reqLevel: 50, mats: {'m_crystal_heart': 50, 'm_light_essence': 45} },

// 55-60çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨55çº§ææ–™)
{ id: 'r_10551', result: '10551', reqLevel: 55, mats: {'m_dragon_scale': 55, 'm_drake_claw': 50} },
{ id: 'r_10552', result: '10552', reqLevel: 55, mats: {'m_wyvern_wing': 55, 'm_dragon_blood': 50} },
{ id: 'r_10553', result: '10553', reqLevel: 55, mats: {'m_ancient_dragon_heart': 55, 'm_dragon_scale': 50} },
{ id: 'r_10554', result: '10554', reqLevel: 55, mats: {'m_drake_claw': 55, 'm_wyvern_wing': 50} },
{ id: 'r_10555', result: '10555', reqLevel: 55, mats: {'m_dragon_blood': 55, 'm_ancient_dragon_heart': 50} },
{ id: 'r_10556', result: '10556', reqLevel: 55, mats: {'m_dragon_scale': 55, 'm_dragon_blood': 50} },
{ id: 'r_10557', result: '10557', reqLevel: 55, mats: {'m_drake_claw': 55, 'm_ancient_dragon_heart': 50} },
{ id: 'r_10558', result: '10558', reqLevel: 55, mats: {'m_wyvern_wing': 55, 'm_dragon_scale': 50} },
{ id: 'r_10559', result: '10559', reqLevel: 55, mats: {'m_dragon_blood': 55, 'm_drake_claw': 50} },
{ id: 'r_10560', result: '10560', reqLevel: 55, mats: {'m_ancient_dragon_heart': 55, 'm_wyvern_wing': 50} },
{ id: 'r_10561', result: '10561', reqLevel: 55, mats: {'m_dragon_scale': 55, 'm_ancient_dragon_heart': 50} },
{ id: 'r_10562', result: '10562', reqLevel: 55, mats: {'m_drake_claw': 55, 'm_wyvern_wing': 50} },
{ id: 'r_10563', result: '10563', reqLevel: 55, mats: {'m_dragon_blood': 55, 'm_dragon_scale': 50} },
{ id: 'r_10564', result: '10564', reqLevel: 55, mats: {'m_ancient_dragon_heart': 55, 'm_drake_claw': 50} },

// 60-65çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨60çº§ææ–™)
{ id: 'r_10601', result: '10601', reqLevel: 60, mats: {'m_time_sand': 60, 'm_space_fragment': 55} },
{ id: 'r_10602', result: '10602', reqLevel: 60, mats: {'m_future_tech': 60, 'm_past_echo': 55} },
{ id: 'r_10603', result: '10603', reqLevel: 60, mats: {'m_temporal_core': 60, 'm_time_sand': 55} },
{ id: 'r_10604', result: '10604', reqLevel: 60, mats: {'m_space_fragment': 60, 'm_future_tech': 55} },
{ id: 'r_10605', result: '10605', reqLevel: 60, mats: {'m_past_echo': 60, 'm_temporal_core': 55} },
{ id: 'r_10606', result: '10606', reqLevel: 60, mats: {'m_time_sand': 60, 'm_past_echo': 55} },
{ id: 'r_10607', result: '10607', reqLevel: 60, mats: {'m_space_fragment': 60, 'm_temporal_core': 55} },
{ id: 'r_10608', result: '10608', reqLevel: 60, mats: {'m_future_tech': 60, 'm_time_sand': 55} },
{ id: 'r_10609', result: '10609', reqLevel: 60, mats: {'m_past_echo': 60, 'm_space_fragment': 55} },
{ id: 'r_10610', result: '10610', reqLevel: 60, mats: {'m_temporal_core': 60, 'm_future_tech': 55} },
{ id: 'r_10611', result: '10611', reqLevel: 60, mats: {'m_time_sand': 60, 'm_temporal_core': 55} },
{ id: 'r_10612', result: '10612', reqLevel: 60, mats: {'m_space_fragment': 60, 'm_future_tech': 55} },
{ id: 'r_10613', result: '10613', reqLevel: 60, mats: {'m_past_echo': 60, 'm_time_sand': 55} },
{ id: 'r_10614', result: '10614', reqLevel: 60, mats: {'m_temporal_core': 60, 'm_space_fragment': 55} },

// 65-70çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨65çº§ææ–™)
{ id: 'r_10651', result: '10651', reqLevel: 65, mats: {'m_stardust': 65, 'm_comet_fragment': 60} },
{ id: 'r_10652', result: '10652', reqLevel: 65, mats: {'m_nebula_gel': 65, 'm_black_hole_shard': 60} },
{ id: 'r_10653', result: '10653', reqLevel: 65, mats: {'m_star_heart': 65, 'm_stardust': 60} },
{ id: 'r_10654', result: '10654', reqLevel: 65, mats: {'m_comet_fragment': 65, 'm_nebula_gel': 60} },
{ id: 'r_10655', result: '10655', reqLevel: 65, mats: {'m_black_hole_shard': 65, 'm_star_heart': 60} },
{ id: 'r_10656', result: '10656', reqLevel: 65, mats: {'m_stardust': 65, 'm_black_hole_shard': 60} },
{ id: 'r_10657', result: '10657', reqLevel: 65, mats: {'m_comet_fragment': 65, 'm_star_heart': 60} },
{ id: 'r_10658', result: '10658', reqLevel: 65, mats: {'m_nebula_gel': 65, 'm_stardust': 60} },
{ id: 'r_10659', result: '10659', reqLevel: 65, mats: {'m_black_hole_shard': 65, 'm_comet_fragment': 60} },
{ id: 'r_10660', result: '10660', reqLevel: 65, mats: {'m_star_heart': 65, 'm_nebula_gel': 60} },
{ id: 'r_10661', result: '10661', reqLevel: 65, mats: {'m_stardust': 65, 'm_star_heart': 60} },
{ id: 'r_10662', result: '10662', reqLevel: 65, mats: {'m_comet_fragment': 65, 'm_nebula_gel': 60} },
{ id: 'r_10663', result: '10663', reqLevel: 65, mats: {'m_black_hole_shard': 65, 'm_stardust': 60} },
{ id: 'r_10664', result: '10664', reqLevel: 65, mats: {'m_star_heart': 65, 'm_comet_fragment': 60} },

// 70-75çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨70çº§ææ–™)
{ id: 'r_10701', result: '10701', reqLevel: 70, mats: {'m_fire_essence': 70, 'm_water_essence': 65} },
{ id: 'r_10702', result: '10702', reqLevel: 70, mats: {'m_wind_essence': 70, 'm_earth_essence': 65} },
{ id: 'r_10703', result: '10703', reqLevel: 70, mats: {'m_primal_essence': 70, 'm_fire_essence': 65} },
{ id: 'r_10704', result: '10704', reqLevel: 70, mats: {'m_water_essence': 70, 'm_wind_essence': 65} },
{ id: 'r_10705', result: '10705', reqLevel: 70, mats: {'m_earth_essence': 70, 'm_primal_essence': 65} },
{ id: 'r_10706', result: '10706', reqLevel: 70, mats: {'m_fire_essence': 70, 'm_earth_essence': 65} },
{ id: 'r_10707', result: '10707', reqLevel: 70, mats: {'m_water_essence': 70, 'm_primal_essence': 65} },
{ id: 'r_10708', result: '10708', reqLevel: 70, mats: {'m_wind_essence': 70, 'm_fire_essence': 65} },
{ id: 'r_10709', result: '10709', reqLevel: 70, mats: {'m_earth_essence': 70, 'm_water_essence': 65} },
{ id: 'r_10710', result: '10710', reqLevel: 70, mats: {'m_primal_essence': 70, 'm_wind_essence': 65} },
{ id: 'r_10711', result: '10711', reqLevel: 70, mats: {'m_fire_essence': 70, 'm_primal_essence': 65} },
{ id: 'r_10712', result: '10712', reqLevel: 70, mats: {'m_water_essence': 70, 'm_wind_essence': 65} },
{ id: 'r_10713', result: '10713', reqLevel: 70, mats: {'m_earth_essence': 70, 'm_fire_essence': 65} },
{ id: 'r_10714', result: '10714', reqLevel: 70, mats: {'m_primal_essence': 70, 'm_water_essence': 65} },

// 75-80çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨75çº§ææ–™)
{ id: 'r_10751', result: '10751', reqLevel: 75, mats: {'m_angel_feather': 75, 'm_demon_horn': 70} },
{ id: 'r_10752', result: '10752', reqLevel: 75, mats: {'m_titan_blood': 75, 'm_fairy_dust': 70} },
{ id: 'r_10753', result: '10753', reqLevel: 75, mats: {'m_godly_essence': 75, 'm_angel_feather': 70} },
{ id: 'r_10754', result: '10754', reqLevel: 75, mats: {'m_demon_horn': 75, 'm_titan_blood': 70} },
{ id: 'r_10755', result: '10755', reqLevel: 75, mats: {'m_fairy_dust': 75, 'm_godly_essence': 70} },
{ id: 'r_10756', result: '10756', reqLevel: 75, mats: {'m_angel_feather': 75, 'm_fairy_dust': 70} },
{ id: 'r_10757', result: '10757', reqLevel: 75, mats: {'m_demon_horn': 75, 'm_godly_essence': 70} },
{ id: 'r_10758', result: '10758', reqLevel: 75, mats: {'m_titan_blood': 75, 'm_angel_feather': 70} },
{ id: 'r_10759', result: '10759', reqLevel: 75, mats: {'m_fairy_dust': 75, 'm_demon_horn': 70} },
{ id: 'r_10760', result: '10760', reqLevel: 75, mats: {'m_godly_essence': 75, 'm_titan_blood': 70} },
{ id: 'r_10761', result: '10761', reqLevel: 75, mats: {'m_angel_feather': 75, 'm_godly_essence': 70} },
{ id: 'r_10762', result: '10762', reqLevel: 75, mats: {'m_demon_horn': 75, 'm_titan_blood': 70} },
{ id: 'r_10763', result: '10763', reqLevel: 75, mats: {'m_fairy_dust': 75, 'm_angel_feather': 70} },
{ id: 'r_10764', result: '10764', reqLevel: 75, mats: {'m_godly_essence': 75, 'm_demon_horn': 70} },

// 80-85çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨80çº§ææ–™)
{ id: 'r_10801', result: '10801', reqLevel: 80, mats: {'m_chaos_shard': 80, 'm_void_fang': 75} },
{ id: 'r_10802', result: '10802', reqLevel: 80, mats: {'m_entropy_core': 80, 'm_chaos_thread': 75} },
{ id: 'r_10803', result: '10803', reqLevel: 80, mats: {'m_chaos_heart': 80, 'm_chaos_shard': 75} },
{ id: 'r_10804', result: '10804', reqLevel: 80, mats: {'m_void_fang': 80, 'm_entropy_core': 75} },
{ id: 'r_10805', result: '10805', reqLevel: 80, mats: {'m_chaos_thread': 80, 'm_chaos_heart': 75} },
{ id: 'r_10806', result: '10806', reqLevel: 80, mats: {'m_chaos_shard': 80, 'm_chaos_thread': 75} },
{ id: 'r_10807', result: '10807', reqLevel: 80, mats: {'m_void_fang': 80, 'm_chaos_heart': 75} },
{ id: 'r_10808', result: '10808', reqLevel: 80, mats: {'m_entropy_core': 80, 'm_chaos_shard': 75} },
{ id: 'r_10809', result: '10809', reqLevel: 80, mats: {'m_chaos_thread': 80, 'm_void_fang': 75} },
{ id: 'r_10810', result: '10810', reqLevel: 80, mats: {'m_chaos_heart': 80, 'm_entropy_core': 75} },
{ id: 'r_10811', result: '10811', reqLevel: 80, mats: {'m_chaos_shard': 80, 'm_chaos_heart': 75} },
{ id: 'r_10812', result: '10812', reqLevel: 80, mats: {'m_void_fang': 80, 'm_entropy_core': 75} },
{ id: 'r_10813', result: '10813', reqLevel: 80, mats: {'m_chaos_thread': 80, 'm_chaos_shard': 75} },
{ id: 'r_10814', result: '10814', reqLevel: 80, mats: {'m_chaos_heart': 80, 'm_void_fang': 75} },

// 80-85çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨80çº§ææ–™)
{ id: 'r_10801', result: '10801', reqLevel: 80, mats: {'m_chaos_shard': 80, 'm_void_fang': 75} },
{ id: 'r_10802', result: '10802', reqLevel: 80, mats: {'m_entropy_core': 80, 'm_chaos_thread': 75} },
{ id: 'r_10803', result: '10803', reqLevel: 80, mats: {'m_chaos_heart': 80, 'm_chaos_shard': 75} },
{ id: 'r_10804', result: '10804', reqLevel: 80, mats: {'m_void_fang': 80, 'm_entropy_core': 75} },
{ id: 'r_10805', result: '10805', reqLevel: 80, mats: {'m_chaos_thread': 80, 'm_chaos_heart': 75} },
{ id: 'r_10806', result: '10806', reqLevel: 80, mats: {'m_chaos_shard': 80, 'm_chaos_thread': 75} },
{ id: 'r_10807', result: '10807', reqLevel: 80, mats: {'m_void_fang': 80, 'm_chaos_heart': 75} },
{ id: 'r_10808', result: '10808', reqLevel: 80, mats: {'m_entropy_core': 80, 'm_chaos_shard': 75} },
{ id: 'r_10809', result: '10809', reqLevel: 80, mats: {'m_chaos_thread': 80, 'm_void_fang': 75} },
{ id: 'r_10810', result: '10810', reqLevel: 80, mats: {'m_chaos_heart': 80, 'm_entropy_core': 75} },
{ id: 'r_10811', result: '10811', reqLevel: 80, mats: {'m_chaos_shard': 80, 'm_chaos_heart': 75} },
{ id: 'r_10812', result: '10812', reqLevel: 80, mats: {'m_void_fang': 80, 'm_entropy_core': 75} },
{ id: 'r_10813', result: '10813', reqLevel: 80, mats: {'m_chaos_thread': 80, 'm_chaos_shard': 75} },
{ id: 'r_10814', result: '10814', reqLevel: 80, mats: {'m_chaos_heart': 80, 'm_void_fang': 75} },

// 85-90çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨85çº§ææ–™)
{ id: 'r_10851', result: '10851', reqLevel: 85, mats: {'m_creation_shard': 85, 'm_time_essence': 80} },
{ id: 'r_10852', result: '10852', reqLevel: 85, mats: {'m_space_weave': 85, 'm_life_thread': 80} },
{ id: 'r_10853', result: '10853', reqLevel: 85, mats: {'m_creation_spark': 85, 'm_creation_shard': 80} },
{ id: 'r_10854', result: '10854', reqLevel: 85, mats: {'m_time_essence': 85, 'm_space_weave': 80} },
{ id: 'r_10855', result: '10855', reqLevel: 85, mats: {'m_life_thread': 85, 'm_creation_spark': 80} },
{ id: 'r_10856', result: '10856', reqLevel: 85, mats: {'m_creation_shard': 85, 'm_life_thread': 80} },
{ id: 'r_10857', result: '10857', reqLevel: 85, mats: {'m_time_essence': 85, 'm_creation_spark': 80} },
{ id: 'r_10858', result: '10858', reqLevel: 85, mats: {'m_space_weave': 85, 'm_creation_shard': 80} },
{ id: 'r_10859', result: '10859', reqLevel: 85, mats: {'m_life_thread': 85, 'm_time_essence': 80} },
{ id: 'r_10860', result: '10860', reqLevel: 85, mats: {'m_creation_spark': 85, 'm_space_weave': 80} },
{ id: 'r_10861', result: '10861', reqLevel: 85, mats: {'m_creation_shard': 85, 'm_creation_spark': 80} },
{ id: 'r_10862', result: '10862', reqLevel: 85, mats: {'m_time_essence': 85, 'm_space_weave': 80} },
{ id: 'r_10863', result: '10863', reqLevel: 85, mats: {'m_life_thread': 85, 'm_creation_shard': 80} },
{ id: 'r_10864', result: '10864', reqLevel: 85, mats: {'m_creation_spark': 85, 'm_time_essence': 80} },

// 90-95çº§è£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨90çº§ææ–™)
{ id: 'r_10901', result: '10901', reqLevel: 90, mats: {'m_apocalypse_shard': 90, 'm_void_essence': 85} },
{ id: 'r_10902', result: '10902', reqLevel: 90, mats: {'m_end_time_scales': 90, 'm_nothingness_arrow': 85} },
{ id: 'r_10903', result: '10903', reqLevel: 90, mats: {'m_final_breath': 90, 'm_apocalypse_shard': 85} },
{ id: 'r_10904', result: '10904', reqLevel: 90, mats: {'m_void_essence': 90, 'm_end_time_scales': 85} },
{ id: 'r_10905', result: '10905', reqLevel: 90, mats: {'m_nothingness_arrow': 90, 'm_final_breath': 85} },
{ id: 'r_10906', result: '10906', reqLevel: 90, mats: {'m_apocalypse_shard': 90, 'm_nothingness_arrow': 85} },
{ id: 'r_10907', result: '10907', reqLevel: 90, mats: {'m_void_essence': 90, 'm_final_breath': 85} },
{ id: 'r_10908', result: '10908', reqLevel: 90, mats: {'m_end_time_scales': 90, 'm_apocalypse_shard': 85} },
{ id: 'r_10909', result: '10909', reqLevel: 90, mats: {'m_nothingness_arrow': 90, 'm_void_essence': 85} },
{ id: 'r_10910', result: '10910', reqLevel: 90, mats: {'m_final_breath': 90, 'm_end_time_scales': 85} },
{ id: 'r_10911', result: '10911', reqLevel: 90, mats: {'m_apocalypse_shard': 90, 'm_final_breath': 85} },
{ id: 'r_10912', result: '10912', reqLevel: 90, mats: {'m_void_essence': 90, 'm_end_time_scales': 85} },
{ id: 'r_10913', result: '10913', reqLevel: 90, mats: {'m_nothingness_arrow': 90, 'm_apocalypse_shard': 85} },
{ id: 'r_10914', result: '10914', reqLevel: 90, mats: {'m_final_breath': 90, 'm_void_essence': 85} },

// 95çº§ç»ˆæè£…å¤‡åˆæˆè¡¨ (ä½¿ç”¨95çº§ææ–™)
{ id: 'r_10951', result: '10951', reqLevel: 95, mats: {'m_infinity_shard': 95, 'm_eternity_essence': 90} },
{ id: 'r_10952', result: '10952', reqLevel: 95, mats: {'m_endless_blade': 95, 'm_immortal_arrow': 90} },
{ id: 'r_10953', result: '10953', reqLevel: 95, mats: {'m_infinity_core': 95, 'm_infinity_shard': 90} },
{ id: 'r_10954', result: '10954', reqLevel: 95, mats: {'m_eternity_essence': 95, 'm_endless_blade': 90} },
{ id: 'r_10955', result: '10955', reqLevel: 95, mats: {'m_immortal_arrow': 95, 'm_infinity_core': 90} },
{ id: 'r_10956', result: '10956', reqLevel: 95, mats: {'m_infinity_shard': 95, 'm_immortal_arrow': 90} },
{ id: 'r_10957', result: '10957', reqLevel: 95, mats: {'m_eternity_essence': 95, 'm_infinity_core': 90} },
{ id: 'r_10958', result: '10958', reqLevel: 95, mats: {'m_endless_blade': 95, 'm_infinity_shard': 90} },
{ id: 'r_10959', result: '10959', reqLevel: 95, mats: {'m_immortal_arrow': 95, 'm_eternity_essence': 90} },
{ id: 'r_10960', result: '10960', reqLevel: 95, mats: {'m_infinity_core': 95, 'm_endless_blade': 90} },
{ id: 'r_10961', result: '10961', reqLevel: 95, mats: {'m_infinity_shard': 95, 'm_infinity_core': 90} },
{ id: 'r_10962', result: '10962', reqLevel: 95, mats: {'m_eternity_essence': 95, 'm_endless_blade': 90} },
{ id: 'r_10963', result: '10963', reqLevel: 95, mats: {'m_immortal_arrow': 95, 'm_infinity_shard': 90} },
{ id: 'r_10964', result: '10964', reqLevel: 95, mats: {'m_infinity_core': 95, 'm_eternity_essence': 90} }


];
        
this.achievements = [
    { id: 1, name: "åˆå‡ºèŒ…åº", type: "totalLevel", target: 5, unlocked: false, reward: { gold: 100, exp: 50 } },
    { id: 2, name: "å± å¤«", type: "kills", target: 100, unlocked: false, reward: { gold: 500, exp: 200 } },
    { id: 3, name: "å°å¯Œç¿", type: "totalGold", target: 1000, unlocked: false, reward: { gold: 1000, exp: 100 } },
    { id: 4, name: "åˆæˆä¸“å®¶", type: "itemsCrafted", target: 50, unlocked: false, reward: { gold: 2500, exp: 400 } },
    { id: 5, name: "å¼ºåŒ–è¾¾äºº", type: "itemsEnhanced", target: 30, unlocked: false, reward: { gold: 1800, exp: 350 } },
    { id: 6, name: "ç™¾ä¸‡å¯Œç¿", type: "totalGold", target: 100000, unlocked: false, reward: { gold: 10000, exp: 1000 } }
];
    }
    
    getItem(id) { 
        if(!this.items[id]) return null;
        return JSON.parse(JSON.stringify(this.items[id])); 
    }
}

/**
 * æˆ˜æ–—ç³»ç»Ÿ
 */
class Combat {
    constructor(game) {
        this.game = game;
        this.attackTimer = 0;
        this.skillCooldowns = {}; 
    }

    // åœ¨Combatç±»çš„updateæ–¹æ³•ä¸­æ·»åŠ æ•ˆæœå¤„ç†
update(dt) {
    let now = Date.now();
    this.attackTimer += dt;
    
    // å¤„ç†BUFFå’ŒDOTæ•ˆæœï¼ˆç§»åˆ°è¿™é‡Œç¡®ä¿å³ä½¿æˆ˜æ–—æš‚åœä¹Ÿèƒ½å¤„ç†æ•ˆæœï¼‰
    this.processBuffsAndEffects(now);
    
    // åªåœ¨æˆ˜æ–—çŠ¶æ€ä¸‹æ‰§è¡Œæ”»å‡»é€»è¾‘
    if(this.game.state.fighting && this.game.state.enemy) {
        // 1. å°è¯•é‡Šæ”¾ä¸»åŠ¨æŠ€èƒ½
        for (let skillId of this.game.player.skills.learned) {
            let skill = this.game.db.skills[skillId];
            if (skill && skill.type === 'active') {
                let cdEnd = this.skillCooldowns[skillId] || 0;
                if (now >= cdEnd && this.game.player.curMp >= (skill.mpCost || 10)) {
                    this.castSkill(skill);
                    this.attackTimer = 0; 
                    return; 
                }
            }
        }

        // 2. æ™®æ”»é€»è¾‘ï¼ˆå—åŠ é€Ÿå½±å“ï¼‰
        let atkSpeed = this.getAttackSpeed();
        if (this.attackTimer >= atkSpeed) {
            this.playerAttack();
            this.attackTimer = 0;
        }

        // 3. æ•Œäººæ”»å‡»
        if (Math.random() < 0.06 && this.game.state.enemy) { 
            this.enemyAttack();
        }
    }
}

// æ–°å¢æ•ˆæœå¤„ç†æ–¹æ³•
processBuffsAndEffects(now) {
    let p = this.game.player;
    let e = this.game.state.enemy;
    
    // å¤„ç†ç©å®¶BUFF
    if (p.activeBuffs) {
        Object.keys(p.activeBuffs).forEach(buffId => {
            let buff = p.activeBuffs[buffId];
            if (now - buff.startTime > buff.duration) {
                delete p.activeBuffs[buffId];
                this.game.ui.log(`å¢ç›Šæ•ˆæœæ¶ˆå¤±`, "log-dmg");
            }
        });
        this.applyBuffEffects();
    }
    
    // å¤„ç†æ•ŒäººDOT
    if (e && e.activeDOTs) {
        e.activeDOTs = e.activeDOTs.filter(dot => {
            if (now - dot.lastTick >= dot.interval && dot.ticks > 0) {
                // DOTè·³ä¼¤å®³
                e.curHp -= dot.damage;
                this.game.ui.log(`${e.name} å—åˆ°æŒç»­ä¼¤å®³ ${dot.damage}`, "log-dmg");
                dot.lastTick = now;
                dot.ticks--;
                
                if (e.curHp <= 0) {
                    this.winBattle();
                    return false;
                }
            }
            return dot.ticks > 0;
        });
    }
    
    // å¤„ç†å¤æ´»è¢«åŠ¨ï¼ˆç§»åˆ°è¿™é‡Œç¡®ä¿å³ä½¿æˆ˜æ–—æš‚åœä¹Ÿèƒ½æ£€æŸ¥å¤æ´»ï¼‰
    this.checkRevivePassive();
}

// åº”ç”¨BUFFæ•ˆæœåˆ°ç©å®¶å±æ€§
applyBuffEffects() {
    let p = this.game.player;
    let baseStats = this.game.calculateStats(); // è·å–åŸºç¡€å±æ€§
    
    // é‡ç½®ä¸ºåŸºç¡€å±æ€§
    p.currentStats = {...baseStats};
    
    // åº”ç”¨BUFF
    if (p.activeBuffs) {
        Object.values(p.activeBuffs).forEach(buff => {
            if (buff.stats) {
                Object.keys(buff.stats).forEach(stat => {
                    if (stat === 'atk' || stat === 'def') {
                        // ç™¾åˆ†æ¯”åŠ æˆ
                        let multiplier = buff.stats[stat];
                        if (stat === 'atk') {
                            ['blunt', 'sharp', 'magic', 'range'].forEach(dmgType => {
                                p.currentStats[dmgType] = Math.floor(p.currentStats[dmgType] * (1 + multiplier));
                            });
                        } else if (stat === 'def') {
                            ['heavy', 'light', 'shield', 'coat'].forEach(defType => {
                                p.currentStats[defType] = Math.floor(p.currentStats[defType] * (1 + multiplier));
                            });
                        }
                    } else {
                        // ç›´æ¥æ•°å€¼åŠ æˆ
                        p.currentStats[stat] = (p.currentStats[stat] || 0) + (buff.stats[stat] || 0);
                    }
                });
            }
        });
    }
}

// è·å–å—åŠ é€Ÿå½±å“çš„æ”»å‡»é€Ÿåº¦
getAttackSpeed() {
    let baseSpeed = 1000; // åŸºç¡€æ”»å‡»é€Ÿåº¦1ç§’
    let p = this.game.player;
    
    if (p.activeBuffs) {
        Object.values(p.activeBuffs).forEach(buff => {
            if (buff.haste) {
                baseSpeed = Math.floor(baseSpeed * (1 - buff.haste));
            }
        });
    }
    
    return Math.max(200, baseSpeed); // æœ€å°æ”»å‡»é€Ÿåº¦0.2ç§’
}

checkRevivePassive() {
    let p = this.game.player;
    if (p.curHp <= 0) {
        let reviveSkill = p.skills.learned.find(skillId => {
            let skill = this.game.db.skills[skillId];
            return skill && skill.revive;
        });
        
        if (reviveSkill && Math.random() < 0.2) { // 20%å¤æ´»å‡ ç‡
            p.curHp = Math.floor(p.stats.hp * 0.5); // æ¢å¤50%HP
            this.game.ui.log(`è§¦å‘å¤æ´»æ•ˆæœ! æ¢å¤50%HP`, "log-rare");
            
            // æ·»åŠ ï¼šå¦‚æœè®¾ç½®äº†è‡ªåŠ¨ç»§ç»­æ ‡è®°ï¼Œåˆ™è‡ªåŠ¨æ¢å¤æˆ˜æ–—
            if (this.game.state.autoResumeAfterRevive) {
                this.game.state.fighting = true;
                this.game.state.autoResumeAfterRevive = false; // é‡ç½®æ ‡è®°
                document.getElementById('toggle-fight-btn').innerText = "æš‚åœæˆ˜æ–—";
                this.game.ui.log("è‡ªåŠ¨æ¢å¤æˆ˜æ–—!", "log-gain");
            }
            
            this.game.state.fighting = true;
            return true;
        }
    }
    return false;
}

    // åœ¨Combatç±»çš„castSkillæ–¹æ³•ä¸­æ›¿æ¢ä¸ºå®Œæ•´å®ç°
castSkill(skill) {
    let p = this.game.player;
    let e = this.game.state.enemy;
    if(!e) return;
    
    // æ£€æŸ¥MPå’Œå†·å´
    if(p.curMp < (skill.mpCost || 10)) {
        this.game.ui.log("MPä¸è¶³ï¼Œæ— æ³•é‡Šæ”¾æŠ€èƒ½", "log-dmg");
        return;
    }
    
    let cdEnd = this.skillCooldowns[skill.id] || 0;
    if(Date.now() < cdEnd) {
        this.game.ui.log("æŠ€èƒ½å†·å´ä¸­", "log-dmg");
        return;
    }
    
    p.curMp -= (skill.mpCost || 10);
    this.skillCooldowns[skill.id] = Date.now() + (skill.cd || 5000);

    // å¤„ç†ä¸åŒç±»å‹çš„æŠ€èƒ½æ•ˆæœ
    let baseDmg = p.stats[skill.branch] || 0;
    
    // 1. æ²»ç–—æŠ€èƒ½
    if (skill.heal) {
        let healAmount = Math.floor(p.stats.hp * skill.heal);
        p.curHp = Math.min(p.stats.hp, p.curHp + healAmount);
        this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]! æ¢å¤${healAmount}HP`, "log-gain");
        this.game.gainExp('skill', 5);
        this.game.ui.updateBars();
        return;
    }
    
    // 2. BUFFæŠ€èƒ½
    if (skill.buff) {
        this.applyBuff(skill);
        return;
    }
    
    // 3. æŠ¤ç›¾æŠ€èƒ½
    if (skill.shield) {
        let shieldAmount = Math.floor(p.stats.hp * skill.shield);
        if (!p.activeShield) p.activeShield = 0;
        p.activeShield += shieldAmount;
        this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]! è·å¾—${shieldAmount}ç‚¹æŠ¤ç›¾`, "log-gain");
        this.game.gainExp('skill', 5);
        return;
    }
    
    // 4. åŠ é€ŸæŠ€èƒ½
    if (skill.haste) {
        this.applyHaste(skill);
        return;
    }
    
    // 5. å¤æ´»è¢«åŠ¨æŠ€èƒ½ï¼ˆä¸åœ¨è¿™é‡Œå¤„ç†ï¼Œåœ¨æ­»äº¡æ—¶æ£€æŸ¥ï¼‰
    if (skill.revive) return;
    
    // 6. æ”»å‡»æŠ€èƒ½
    let rawDmg = 0;
    
    // å¤„ç†å¤šæ¬¡æ”»å‡»
    if (skill.hits && skill.hits > 1) {
        let totalDmg = 0;
        for (let i = 0; i < skill.hits; i++) {
            let hitDmg = this.calculateSkillDamage(skill, baseDmg);
            this.dealDamageToEnemy(hitDmg, skill.branch, true);
            totalDmg += hitDmg;
        }
        this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]! æ”»å‡»${skill.hits}æ¬¡ï¼Œæ€»ä¼¤å®³${totalDmg}`, "log-rare");
        this.game.gainExp('skill', 5 * skill.hits);
        return;
    }
    
    // 7. è¿é”æ”»å‡»
    if (skill.chain) {
        this.castChainSkill(skill, baseDmg);
        return;
    }
    
    // 8. AOEæ”»å‡»ï¼ˆæš‚æ—¶è§†ä¸ºå•ç›®æ ‡ï¼Œæœªæ¥å¯æ‰©å±•ï¼‰
    if (skill.aoe) {
        let aoeDmg = this.calculateSkillDamage(skill, baseDmg);
        this.dealDamageToEnemy(aoeDmg, skill.branch, true);
        this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]! (AOE) é€ æˆ${aoeDmg}ä¼¤å®³`, "log-rare");
        this.game.gainExp('skill', 8); // AOEæŠ€èƒ½é¢å¤–ç»éªŒ
        return;
    }
    
    // 9. DOTæŠ€èƒ½
    if (skill.dot) {
        this.applyDOT(skill, baseDmg);
        return;
    }
    
    // 10. é»˜è®¤å•æ¬¡æ”»å‡»
    rawDmg = this.calculateSkillDamage(skill, baseDmg);
    this.dealDamageToEnemy(rawDmg, skill.branch, true);
    this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]!`, "log-rare");
    this.game.gainExp('skill', 5);
}

getAttackSpeed() {
    let baseSpeed = 1000; // åŸºç¡€æ”»å‡»é€Ÿåº¦1ç§’
    let p = this.game.player;
    
    if (p.activeBuffs) {
        Object.values(p.activeBuffs).forEach(buff => {
            if (buff.haste) {
                baseSpeed = Math.floor(baseSpeed * (1 - buff.haste));
            }
        });
    }
    
    return Math.max(200, baseSpeed); // æœ€å°æ”»å‡»é€Ÿåº¦0.2ç§’
}

// æ–°å¢è¾…åŠ©æ–¹æ³•
calculateSkillDamage(skill, baseDmg) {
    let rawDmg = Math.floor(Math.max(10, baseDmg) * (skill.multiplier || 1.5));
    
    // æš´å‡»è®¡ç®—
    let isCrit = Math.random() < (this.game.player.stats.crit / 100);
    if (isCrit) {
        rawDmg = Math.floor(rawDmg * (this.game.player.stats.critDmg / 100));
        this.game.ui.log(`æš´å‡»!`, "log-rare");
    }
    
    return rawDmg;
}

// è¿é”æ”»å‡»å®ç°
castChainSkill(skill, baseDmg) {
    let chainCount = skill.chain || 3;
    let currentDmg = this.calculateSkillDamage(skill, baseDmg);
    let totalDmg = 0;
    
    for (let i = 0; i < chainCount; i++) {
        let chainDmg = Math.floor(currentDmg * (1 - i * 0.2)); // æ¯æ¬¡è¡°å‡20%
        this.dealDamageToEnemy(chainDmg, skill.branch, true);
        totalDmg += chainDmg;
        currentDmg = chainDmg;
    }
    
    this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]! è¿é”${chainCount}æ¬¡ï¼Œæ€»ä¼¤å®³${totalDmg}`, "log-rare");
    this.game.gainExp('skill', 5 * chainCount);
}

// BUFFåº”ç”¨
applyBuff(skill) {
    let p = this.game.player;
    if (!p.activeBuffs) p.activeBuffs = {};
    
    p.activeBuffs[skill.id] = {
        type: 'buff',
        startTime: Date.now(),
        duration: 15000, // 15ç§’
        stats: skill.buff
    };
    
    this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]! è·å¾—å¢ç›Šæ•ˆæœ`, "log-gain");
    this.game.gainExp('skill', 5);
    
    // ç«‹å³åº”ç”¨BUFFæ•ˆæœ
    this.applyBuffEffects();
}

// åŠ é€Ÿæ•ˆæœ
applyHaste(skill) {
    let p = this.game.player;
    if (!p.activeBuffs) p.activeBuffs = {};
    
    p.activeBuffs[skill.id] = {
        type: 'haste',
        startTime: Date.now(),
        duration: 10000, // 10ç§’
        haste: skill.haste
    };
    
    this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]! æ”»å‡»é€Ÿåº¦æå‡`, "log-gain");
    this.game.gainExp('skill', 5);
}

// DOTåº”ç”¨
applyDOT(skill, baseDmg) {
    let e = this.game.state.enemy;
    if (!e.activeDOTs) e.activeDOTs = [];
    
    let dotDmg = Math.floor(baseDmg * 0.3); // DOTä¼¤å®³ä¸ºåŸºç¡€30%
    e.activeDOTs.push({
        skillId: skill.id,
        damage: dotDmg,
        duration: 8000, // 8ç§’
        interval: 2000, // æ¯2ç§’ä¸€è·³
        lastTick: Date.now(),
        ticks: 4 // æ€»å…±4è·³
    });
    
    let initialDmg = this.calculateSkillDamage(skill, baseDmg);
    this.dealDamageToEnemy(initialDmg, skill.branch, true);
    this.game.ui.log(`é‡Šæ”¾æŠ€èƒ½ [${skill.name}]! é€ æˆ${initialDmg}ä¼¤å®³å¹¶é™„åŠ DOT`, "log-rare");
    this.game.gainExp('skill', 5);
}

    playerAttack() {
        if(!this.game.state.enemy) return;
        let stats = this.game.player.currentStats || this.game.player.stats; 
        let enemy = this.game.state.enemy;

        let hitRate = (stats.accuracy / (stats.accuracy + (enemy.stats.dodge || 0))) * 1.2;
        if (hitRate < 0.2) hitRate = 0.2; // ä¿åº•å‘½ä¸­
        
        if (Math.random() > hitRate) {
            this.game.ui.log("ä½ æœªå‘½ä¸­!", "log-dmg");
            return;
        }

        let dealt = false;
        ['blunt', 'sharp', 'magic', 'range'].forEach(type => {
            if(stats[type] > 0) {
                this.dealDamageToEnemy(stats[type], type, false);
                this.game.gainExp(type, 1);
                dealt = true;
            }
        });
        
        // å³ä½¿å±æ€§ä¸º0ï¼Œé»˜è®¤ç»™1ç‚¹ç‰©ç†ä¼¤å®³
        if(!dealt) {
            this.dealDamageToEnemy(1, 'blunt', false);
        }
    }

    dealDamageToEnemy(dmgAmount, type, isSkill) {
    let enemy = this.game.state.enemy;
    let stats = this.game.player.currentStats || this.game.player.stats; 

    let defType = this.getCounterDef(type);
    let def = enemy.stats[defType] || 0;
    let finalDmg = Math.floor(dmgAmount * (100 / (100 + def)));
    
    if(finalDmg < 1) finalDmg = 1;

    if (!isSkill) {
        if (Math.random() < (stats.crit / 100)) {
            finalDmg = Math.floor(finalDmg * (stats.critDmg / 100));
            this.game.ui.log(`æš´å‡»!`, "log-rare");
        }
        
        // æ–°å¢ï¼šé€ æˆä¼¤å®³æ—¶è·å¾—åˆ†æ”¯ç»éªŒï¼ˆåŸºç¡€ç»éªŒ + ä¼¤å®³å€¼çš„10%ï¼‰
        let baseExp = 5; // åŸºç¡€ç»éªŒå€¼
        let damageExp = Math.floor(finalDmg * 0.1); // ä¼¤å®³çš„10%ä½œä¸ºé¢å¤–ç»éªŒ
        this.game.gainExp(type, baseExp + damageExp);
    }

    enemy.curHp -= finalDmg;
    this.game.ui.log(`å¯¹ ${enemy.name} é€ æˆ ${finalDmg} (${TEXT.stats[type]||type})`);

    if (stats.lifesteal > 0) {
        let heal = Math.floor(finalDmg * (stats.lifesteal / 100));
        if (heal > 0) this.game.player.curHp = Math.min(stats.hp, this.game.player.curHp + heal);
    }

    if (enemy.curHp <= 0) this.winBattle();
    this.game.ui.updateBars();
}

    // ä¿®æ”¹enemyAttackæ–¹æ³•å¤„ç†æŠ¤ç›¾
enemyAttack() {
    if(!this.game.state.enemy) return;
    let enemy = this.game.state.enemy;
    let p = this.game.player;
    let stats = p.currentStats || p.stats;

    let hitChance = 1 - (stats.dodge / 100);
    hitChance += (enemy.level * 0.02); 

    if (Math.random() > hitChance) {
        return;
    }

    let dmg = enemy.stats.attack;
    let defType = this.getCounterDef(enemy.stats.type);
    let def = stats[defType];
    
    let reducedDmg = dmg * (100 / (100 + def));
    reducedDmg -= (stats.resist || 0);
    
    if (stats.resistPct > 0) {
        reducedDmg *= (1 - (stats.resistPct / 100));
    }

    let finalTaken = Math.floor(Math.max(1, reducedDmg));
    
    // æŠ¤ç›¾å¸æ”¶
    if (p.activeShield && p.activeShield > 0) {
        let shieldAbsorb = Math.min(finalTaken, p.activeShield);
        p.activeShield -= shieldAbsorb;
        finalTaken -= shieldAbsorb;
        this.game.ui.log(`æŠ¤ç›¾å¸æ”¶äº†${shieldAbsorb}ç‚¹ä¼¤å®³`, "log-gain");
        
        if (p.activeShield <= 0) {
            p.activeShield = 0;
            this.game.ui.log(`æŠ¤ç›¾æ¶ˆå¤±`, "log-dmg");
        }
    }
    
    if (finalTaken > 0) {
        p.curHp -= finalTaken;
        this.game.ui.log(`${enemy.name} é€ æˆ ${finalTaken} ä¼¤å®³`, "log-dmg");
    }

    if (p.curHp <= 0) this.loseBattle();
    this.game.ui.updateBars();
}

    getCounterDef(atkType) {
        const map = { 'blunt': 'heavy', 'sharp': 'light', 'magic': 'shield', 'range': 'coat' };
        return map[atkType] || 'heavy';
    }

    winBattle() {
        let enemy = this.game.state.enemy;
        this.game.ui.log(`å‡»æ€äº† ${enemy.name}!`, "log-gain");
        this.game.gainExp('char', enemy.exp);
        this.game.player.gold += enemy.gold;
        this.game.state.achievements.kills++;
        
        for(let itemId in enemy.drops) {
            if(Math.random() < enemy.drops[itemId]) {
                this.game.inventory.addItem(itemId, 1);
                let iname = this.game.db.items[itemId] ? this.game.db.items[itemId].name : itemId;
                this.game.ui.log(`è·å¾—: ${iname}`, "log-rare");
            }
        }
        this.game.spawnEnemy();
    }

   loseBattle() {
    this.game.ui.log(`ä½ è¢«å‡»è´¥äº†... 3ç§’åè‡ªåŠ¨å¤æ´»`, "log-dmg");
    this.game.state.fighting = false;
    document.getElementById('toggle-fight-btn').innerText = "å¼€å§‹æˆ˜æ–—";
    
    // 3ç§’åè‡ªåŠ¨å¤æ´»å¹¶ç»§ç»­æˆ˜æ–—
    setTimeout(() => {
        this.game.player.curHp = this.game.player.stats.hp;
        this.game.player.curMp = this.game.player.stats.mp;
        this.game.state.fighting = true;
        document.getElementById('toggle-fight-btn').innerText = "æš‚åœæˆ˜æ–—";
        this.game.ui.log(`è‡ªåŠ¨å¤æ´»ï¼ç»§ç»­æˆ˜æ–—`, "log-gain");
    }, 3000);
}
}

/**
 * èƒŒåŒ…
 */
class Inventory {
    constructor(game) {
        this.game = game;
    }

    addItem(itemId, count = 1) {
        let itemData = this.game.db.getItem(itemId);
        if(!itemData) return;

        if(itemData.type === 'material' || itemData.type === 'consumable') {
            let existing = this.game.player.inventory.find(i => i.id === itemId);
            if(existing) {
                existing.count += count;
            } else {
                if(this.game.player.inventory.length >= this.game.player.maxInventory) {
                    this.game.ui.log("èƒŒåŒ…å·²æ»¡ï¼", "log-dmg");
                    return;
                }
                this.game.player.inventory.push({ id: itemId, count: count, ...itemData });
            }
        } else {
             if(this.game.player.inventory.length >= this.game.player.maxInventory) {
                this.game.ui.log("èƒŒåŒ…å·²æ»¡ï¼", "log-dmg");
                return;
            }
            let inst = { ...itemData, uid: Date.now() + Math.random(), enhance: 0, count: 1 };
            this.game.player.inventory.push(inst);
        }
        this.game.ui.renderInventory();
    }

    equipSelectedItem() {
        let index = this.game.state.selectedInvIndex;
        if(index === -1) return;
        
        let item = this.game.player.inventory[index];
        if(!CONFIG.SLOTS.includes(item.type)) {
            // Check consumable
            if(item.type === 'consumable') {
                this.useConsumable(item, index);
                return;
            }
            alert("æ— æ³•è£…å¤‡æ­¤ç‰©å“");
            return;
        }

        let currentEquip = this.game.player.equipment[item.type];
        if(currentEquip) {
            this.game.player.inventory.push(currentEquip);
        }

        this.game.player.equipment[item.type] = item;
        this.game.player.inventory.splice(index, 1);
        
        this.game.state.selectedInvIndex = -1;
        this.game.player.stats = this.game.calculateStats();
        this.game.ui.renderAll();
    }

    useConsumable(item, index) {
        if(item.effect) {
            if(item.effect.hp) this.game.player.curHp = Math.min(this.game.player.stats.hp, this.game.player.curHp + item.effect.hp);
            this.game.ui.log(`ä½¿ç”¨äº† ${item.name}`, "log-gain");
            item.count--;
            if(item.count <= 0) {
                this.game.player.inventory.splice(index, 1);
                this.game.state.selectedInvIndex = -1;
            }
            this.game.ui.renderAll();
        }
    }

    removeIndice(index) {
        this.game.player.inventory.splice(index, 1);
        this.game.ui.renderInventory();
        this.game.state.selectedInvIndex = -1;
    }
}

/**
 * åˆ¶é€ 
 */
class Crafting {
    constructor(game) {
        this.game = game;
    }

    enhance() {
        let index = this.game.state.selectedInvIndex;
        if(index === -1) { alert("è¯·å…ˆåœ¨èƒŒåŒ…ä¸­é€‰ä¸­ä¸€ä»¶è£…å¤‡"); return; }
        
        let item = this.game.player.inventory[index];
        if(item.type === 'material' || item.type === 'consumable') { alert("è¯¥ç‰©å“æ— æ³•å¼ºåŒ–"); return; }

        let cost = (item.enhance + 1) * 50; 
        if(this.game.player.gold < cost) { alert(`é‡‘å¸ä¸è¶³ (éœ€è¦ ${cost})`); return; }

        this.game.player.gold -= cost;
        
        let chance = 1.0 - (item.enhance * 0.08) + (this.game.player.craft.enhanceLevel * 0.02);
        
        if(Math.random() < chance) {
            item.enhance++;
            this.game.ui.log(`${item.name} å¼ºåŒ–æˆåŠŸ (+${item.enhance})!`, "log-gain");
            this.game.gainExp('enhance', 20); 
        } else {
            this.game.ui.log(`${item.name} å¼ºåŒ–å¤±è´¥...`, "log-dmg");
        }
        this.game.ui.renderAll();
        this.game.ui.selectItem(index); // re-select
 this.game.state.achievements.itemsEnhanced++;
    this.game.checkAchievements();
    }

    synthesizeBatch(recipeId, count = 1) {
    let recipe = this.game.db.recipes.find(r => r.id === recipeId);
    if (!recipe) {
        this.game.ui.log("é…æ–¹ä¸å­˜åœ¨", "log-dmg");
        return {success: 0, total: count, message: "é…æ–¹ä¸å­˜åœ¨"};
    }
    
    if (this.game.player.craft.synthLevel < recipe.reqLevel) {
        this.game.ui.log(`åˆæˆç­‰çº§ä¸è¶³ (éœ€è¦ Lv.${recipe.reqLevel})`, "log-dmg");
        return {success: 0, total: count, message: `åˆæˆç­‰çº§ä¸è¶³ (éœ€è¦ Lv.${recipe.reqLevel})`};
    }
    
    let successCount = 0;
    let materialsUsed = {};
    let resultItem = this.game.db.getItem(recipe.result);
    
    for (let i = 0; i < count; i++) {
        // æ£€æŸ¥ææ–™æ˜¯å¦è¶³å¤Ÿ
        let canCraft = true;
        for (let matId in recipe.mats) {
            let reqCount = recipe.mats[matId];
            let invItem = this.game.player.inventory.find(i => i.id === matId);
            let hasCount = invItem ? invItem.count : 0;
            if (hasCount < reqCount) {
                canCraft = false;
                break;
            }
        }
        
        if (!canCraft) break;
        
        // æ‰£é™¤ææ–™
        for (let matId in recipe.mats) {
            let reqCount = recipe.mats[matId];
            let invItem = this.game.player.inventory.find(i => i.id === matId);
            invItem.count -= reqCount;
            
            // è®°å½•ä½¿ç”¨çš„ææ–™
            if (!materialsUsed[matId]) materialsUsed[matId] = 0;
            materialsUsed[matId] += reqCount;
            
            if (invItem.count <= 0) {
                this.game.player.inventory = this.game.player.inventory.filter(i => i.count > 0);
            }
        }
        
        // æ·»åŠ åˆæˆç‰©å“
        this.game.inventory.addItem(recipe.result, 1);
        successCount++;
        
        // æ·»åŠ åˆæˆç»éªŒ
        this.game.gainExp('synth', 50);
        this.game.state.achievements.itemsCrafted++;
    }
    
    // æ›´æ–°æˆå°±
    this.game.checkAchievements();
    
    if (successCount > 0) {
        let materialsText = Object.keys(materialsUsed).map(matId => {
            let matItem = this.game.db.getItem(matId);
            return `${matItem.name}Ã—${materialsUsed[matId]}`;
        }).join(', ');
        
        this.game.ui.log(`æ‰¹é‡åˆæˆæˆåŠŸ ${successCount}/${count} æ¬¡: ${resultItem.name} (æ¶ˆè€—: ${materialsText})`, "log-gain");
    }
    
    this.game.ui.renderAll();
    
    return {
        success: successCount, 
        total: count, 
        message: successCount > 0 ? 
            `æ‰¹é‡åˆæˆæˆåŠŸ ${successCount}/${count} æ¬¡` : 
            "ææ–™ä¸è¶³ï¼Œæ— æ³•åˆæˆ"
    };
}
}



/**
 * å•†åº—
 */
class Shop {
    constructor(game) {
        this.game = game;
    }
    
    buy(itemId) {
        let item = this.game.db.getItem(itemId);
        if(this.game.player.gold >= item.price) {
            this.game.player.gold -= item.price;
            this.game.inventory.addItem(itemId, 1);
            this.game.ui.renderAll();
        } else {
            alert("é‡‘å¸ä¸è¶³");
        }
    }

// åœ¨Gameç±»æˆ–Shopç±»ä¸­æ·»åŠ æ‰¹é‡å‡ºå”®æ§åˆ¶æ–¹æ³•
startBatchSell() {
    this.state.batchSellMode = true;
    this.state.batchSelectedItems.clear();
    this.ui.renderInventory();
}

cancelBatchSell() {
    this.state.batchSellMode = false;
    this.state.batchSelectedItems.clear();
    this.ui.renderInventory();
}

confirmBatchSell() {
    if (this.state.batchSelectedItems.size === 0) {
        this.ui.log('è¯·å…ˆé€‰æ‹©è¦å‡ºå”®çš„ç‰©å“', 'log-dmg');
        return;
    }
    
    let totalGold = 0;
    let soldItems = [];
    
    // ä»åå¾€å‰åˆ é™¤ï¼Œé¿å…ç´¢å¼•å˜åŒ–
    let sortedIndices = Array.from(this.state.batchSelectedItems).sort((a, b) => b - a);
    
    sortedIndices.forEach(index => {
        let item = this.game.player.inventory[index];
        if (item) {
            let sellPrice = item.price;
            totalGold += sellPrice * item.count;
            soldItems.push(`${item.name} x${item.count}`);
            this.game.player.inventory.splice(index, 1);
        }
    });
    
    this.game.player.gold += totalGold;
    this.ui.log(`æ‰¹é‡å‡ºå”®äº† ${soldItems.length} ä»¶ç‰©å“ï¼Œè·å¾— ${totalGold} é‡‘å¸`, 'log-gain');
    
    // é€€å‡ºæ‰¹é‡å‡ºå”®æ¨¡å¼
    this.cancelBatchSell();
    this.ui.renderAll();
}

    sellSelectedItem() {
        let index = this.game.state.selectedInvIndex;
        if(index === -1) return;
        
        let item = this.game.player.inventory[index];
        let sellPrice = Math.floor(item.price * 0.5); 
        
        this.game.player.gold += sellPrice * item.count;
        this.game.inventory.removeIndice(index);
        this.game.ui.log(`å‡ºå”®äº† ${item.name} è·å¾— ${sellPrice*item.count} é‡‘å¸`);
        this.game.ui.renderAll();
    }
}

/**
 * UI
 */
class UI {
    constructor(game) {
        this.game = game;
    }

    renderAll() {
        this.renderStats();
        this.renderEquip();
        this.renderInventory();
        this.renderEnemy();
        this.renderMapList();
        this.renderShop();
        this.renderSkills();
        this.renderCraft();
        this.renderAchievements();
        this.updateBars();
    }

    updateBars() {
        let p = this.game.player;
        if(!p.stats) return; 
        
        // HP/MP bar width
        let hpPct = (p.curHp / p.stats.hp) * 100;
        document.getElementById('player-hp-bar').style.width = `${Math.max(0, hpPct)}%`;
        document.getElementById('player-hp-text').innerText = `${Math.floor(p.curHp)}/${p.stats.hp}`;
        
        document.getElementById('char-hp').innerText = `${Math.floor(p.curHp)}/${p.stats.hp}`;
        document.getElementById('char-mp').innerText = `${Math.floor(p.curMp)}/${p.stats.mp}`;
        document.getElementById('char-gold').innerText = p.gold;
        document.getElementById('char-level').innerText = p.level;

        let e = this.game.state.enemy;
        if(e) {
            let ehpPct = (e.curHp / e.maxHp) * 100;
            document.getElementById('enemy-hp-bar').style.width = `${Math.max(0, ehpPct)}%`;
            document.getElementById('enemy-hp-text').innerText = `${e.curHp}/${e.maxHp}`;
        }
        
        this.updateExp('char');
        this.updateExp('skill');
        this.updateExp('enhance');
        this.updateExp('craft');
    }
    
    updateExp(type) {
        let val = 0, req = 1, elId = '', txtId = '';
        if(type === 'char') {
            val = this.game.player.exp; req = this.game.getLevelReq(this.game.player.level);
            elId = 'exp-bar'; txtId = 'exp-text';
        } else if (type === 'skill') {
            val = this.game.player.skills.exp; req = this.game.getLevelReq(this.game.player.skills.level);
            elId = 'skill-exp-bar';
        } else if (type === 'enhance') {
            val = this.game.player.craft.enhanceExp; req = this.game.getLevelReq(this.game.player.craft.enhanceLevel);
            elId = 'enhance-exp-bar';
        } else if (type === 'craft') {
            val = this.game.player.craft.synthExp; req = this.game.getLevelReq(this.game.player.craft.synthLevel);
            elId = 'craft-exp-bar';
        }

        let dom = document.getElementById(elId);
        if(dom) dom.style.width = `${(val/req)*100}%`;
        if(txtId) document.getElementById(txtId).innerText = `${Math.floor(val)}/${req}`;
    }

    renderStats() {
    let html = '';
    let s = this.game.player.currentStats || this.game.player.stats;
    
    // åŸºç¡€å±æ€§
    const baseStats = ['hp', 'mp', 'hpRegen', 'mpRegen'];
    baseStats.forEach(key => {
        let value = s[key] || 0;
        html += `<div class="stat-row"><span>${TEXT.stats[key] || key}</span> <span>${Math.floor(value)}</span></div>`;
    });
    
    // æ”»å‡»å±æ€§ï¼ˆæ˜¾ç¤ºåˆ†æ”¯ç­‰çº§ï¼‰
    html += `<div class="stat-row" style="border-top:1px solid #333; margin-top:5px;"><span style="color:#ff6b6b">æ”»å‡»å±æ€§</span><span></span></div>`;
    const attackStats = ['blunt', 'sharp', 'magic', 'range'];
    attackStats.forEach(key => {
        let value = s[key] || 0;
        let branchData = this.game.player.combatBranches[key];
        let level = branchData ? branchData.level : 1;
        let expPercent = branchData ? Math.floor((branchData.exp / branchData.expToNext) * 100) : 0;
        
        html += `
            <div class="stat-row">
                <span>${TEXT.stats[key] || key} (Lv.${level})</span> 
                <span style="color:#ff6b6b">+${Math.floor(value)}</span>
            </div>
            <div class="stat-row" style="font-size:10px; color:#666;">
                <span>ç»éªŒ: ${branchData ? branchData.exp : 0}/${branchData ? branchData.expToNext : 500}</span>
                <span>${expPercent}%</span>
            </div>
        `;
    });
    
    // é˜²å¾¡å±æ€§
    html += `<div class="stat-row" style="border-top:1px solid #333; margin-top:5px;"><span style="color:#4caf50">é˜²å¾¡å±æ€§</span><span></span></div>`;
    const defenseStats = ['heavy', 'light', 'shield', 'coat'];
    defenseStats.forEach(key => {
        let value = s[key] || 0;
        html += `<div class="stat-row"><span>${TEXT.stats[key] || key}</span> <span style="color:#4caf50">+${Math.floor(value)}</span></div>`;
    });
    
    // æˆ˜æ–—å±æ€§
    html += `<div class="stat-row" style="border-top:1px solid #333; margin-top:5px;"><span style="color:#e040fb">æˆ˜æ–—å±æ€§</span><span></span></div>`;
    const combatStats = ['dodge', 'crit', 'critDmg', 'accuracy', 'lifesteal', 'resist', 'resistPct'];
    combatStats.forEach(key => {
        let value = s[key] || 0;
        let color = '#e040fb';
        if (key === 'dodge' || key === 'crit') color = '#9c27b0';
        if (key === 'lifesteal') color = '#f44336';
        html += `<div class="stat-row"><span>${TEXT.stats[key] || key}</span> <span style="color:${color}">${Math.floor(value)}${key === 'critDmg' || key === 'resistPct' ? '%' : ''}</span></div>`;
    });
    
    // ç‰¹æ®Šå±æ€§ - æ”»é€Ÿ
    let attackSpeed = this.game.combat.getAttackSpeed();
    let attacksPerSecond = (1000 / attackSpeed).toFixed(1);
    html += `<div class="stat-row" style="border-top:1px solid #333; margin-top:5px;"><span style="color:#ff9800">ç‰¹æ®Šå±æ€§</span><span></span></div>`;
    html += `<div class="stat-row"><span>æ”»é€Ÿ</span> <span style="color:#ff9800">${attacksPerSecond}æ¬¡/ç§’</span></div>`;
    
    // æ˜¾ç¤ºæŠ¤ç›¾
    if (this.game.player.activeShield > 0) {
        html += `<div class="stat-row"><span>æŠ¤ç›¾</span> <span style="color:#4caf50">${Math.floor(this.game.player.activeShield)}</span></div>`;
    }
    
    // æ˜¾ç¤ºæ´»è·ƒBUFF
    if (this.game.player.activeBuffs) {
        Object.keys(this.game.player.activeBuffs).forEach(buffId => {
            let buff = this.game.player.activeBuffs[buffId];
            let skill = this.game.db.skills[buffId];
            if (skill) {
                let remaining = Math.ceil((buff.duration - (Date.now() - buff.startTime)) / 1000);
                html += `<div class="stat-row"><span style="color:gold">${skill.name}</span> <span style="color:gold">${remaining}ç§’</span></div>`;
            }
        });
    }
    
    // å¤æ´»æŠ€èƒ½çŠ¶æ€
    let reviveSkill = this.game.player.skills.learned.find(id => {
        let skill = this.game.db.skills[id];
        return skill && skill.revive;
    });
    if (reviveSkill) {
        let skill = this.game.db.skills[reviveSkill];
        html += `<div class="stat-row"><span style="color:#00bcd4">å¤æ´»å‡ ç‡</span> <span style="color:#00bcd4">20%</span></div>`;
    }
    
    document.getElementById('stats-display').innerHTML = html;
}

    renderEquip() {
    let container = document.getElementById('equip-container');
    container.innerHTML = '';
    CONFIG.SLOTS.forEach(slot => {
        let item = this.game.player.equipment[slot];
        let content = item ? `
            <div style="font-size:20px; margin-bottom:5px;">âš”âš”ï¸</div>
            <div style="font-size:10px; text-align:center; line-height:1.2; height:24px; overflow:hidden;">
                ${item.name}${item.enhance ? '+'+item.enhance : ''}
            </div>
            <div class="item-tooltip">
                <b>${item.name} (+${item.enhance})</b><br>
                ${this.getItemDesc(item)}
            </div>
        ` : `
            <div style="font-size:16px; margin-bottom:5px; color:#666;">âš”âš”ï¸</div>
            <div style="font-size:9px; text-align:center; color:#666;">${TEXT.slots[slot]}</div>
        `;
        
        let div = document.createElement('div');
        div.className = `equip-slot ${item ? 'filled' : ''}`;
        div.innerHTML = content;
        div.onclick = () => { if(item) this.unequip(slot); };
        container.appendChild(div);
    });
}

    unequip(slot) {
        let item = this.game.player.equipment[slot];
        if(this.game.player.inventory.length < this.game.player.maxInventory) {
            this.game.player.equipment[slot] = null;
            this.game.player.inventory.push(item);
            this.game.player.stats = this.game.calculateStats();
            this.renderAll();
        } else {
            this.log("èƒŒåŒ…å·²æ»¡ï¼Œæ— æ³•å¸ä¸‹ï¼");
        }
    }

    renderInventory() {
    let grid = document.getElementById('inventory-grid');
    grid.innerHTML = '';
    document.getElementById('inv-count').innerText = this.game.player.inventory.length;

    this.game.player.inventory.forEach((item, idx) => {
        let div = document.createElement('div');
        div.className = 'inv-item';
        
        let isBatchSelected = this.game.state.batchSelectedItems.has(idx);
        if (isBatchSelected) div.classList.add('batch-selected');
        if(idx === this.game.state.selectedInvIndex) div.classList.add('selected');
        
        let icon = item.type === 'material' ? 'ğŸ“¦' : (item.type === 'consumable' ? 'ğŸ·' : 'âš”ï¸');
        
        div.innerHTML = `
            <div style="font-size:24px; margin-bottom:2px;">${icon}</div>
            <div style="font-size:10px; text-align:center; line-height:1.1; height:20px; overflow:hidden;">
                ${item.name}${item.enhance ? '+'+item.enhance : ''}
            </div>
            <div class="inv-count">${item.count > 1 ? item.count : (item.enhance ? '+'+item.enhance : '')}</div>
            <div class="item-tooltip">
                <b>${item.name}</b><br>
                ${this.getItemDesc(item)}
            </div>
        `;
        
        div.onclick = () => {
            if (this.game.state.batchSellMode) {
                this.toggleBatchSelect(idx);
            } else {
                this.selectItem(idx);
            }
        };
        grid.appendChild(div);
    });
    
    this.updateBatchSellUI();
}

// åœ¨UIç±»ä¸­æ·»åŠ æ‰¹é‡é€‰æ‹©ç›¸å…³æ–¹æ³•
toggleBatchSelect(index) {
    if (this.game.state.batchSelectedItems.has(index)) {
        this.game.state.batchSelectedItems.delete(index);
    } else {
        this.game.state.batchSelectedItems.add(index);
    }
    this.renderInventory();
}

// æ›´æ–°æ‰¹é‡å‡ºå”®UIçŠ¶æ€
updateBatchSellUI() {
    let batchBtn = document.getElementById('btn-batch-sell');
    let confirmBtn = document.getElementById('btn-confirm-batch');
    let cancelBtn = document.getElementById('btn-cancel-batch');
    let normalBtns = document.getElementById('normal-buttons');
    let batchBtns = document.getElementById('batch-buttons');
    
    if (this.game.state.batchSellMode) {
        // æ‰¹é‡å‡ºå”®æ¨¡å¼
        normalBtns.style.display = 'none';
        batchBtns.style.display = 'flex';
        batchBtn.innerText = 'æ‰¹é‡å‡ºå”®æ¨¡å¼ä¸­...';
        batchBtn.disabled = true;
        
        let selectedCount = this.game.state.batchSelectedItems.size;
        let totalValue = this.calculateBatchSellTotal();
        document.getElementById('batch-sell-info').innerHTML = 
            `å·²é€‰ä¸­ ${selectedCount} ä»¶ç‰©å“ï¼Œæ€»ä»·å€¼: <span style="color:gold">${totalValue}G</span>`;
    } else {
        // æ™®é€šæ¨¡å¼
        normalBtns.style.display = 'flex';
        batchBtns.style.display = 'none';
        batchBtn.innerText = 'æ‰¹é‡å‡ºå”®';
        batchBtn.disabled = false;
        this.game.state.batchSelectedItems.clear();
    }
}

// è®¡ç®—æ‰¹é‡å‡ºå”®æ€»ä»·å€¼
calculateBatchSellTotal() {
    let total = 0;
    this.game.state.batchSelectedItems.forEach(index => {
        let item = this.game.player.inventory[index];
        if (item) {
            let sellPrice = item.price;
            total += sellPrice * item.count;
        }
    });
    return total;
}

    selectItem(idx) {
        this.game.state.selectedInvIndex = idx;
        let item = this.game.player.inventory[idx];
        
        let detailBox = document.getElementById('item-details');
        let btnEquip = document.getElementById('btn-equip');
        let btnSell = document.getElementById('btn-sell');
        let btnEnhance = document.getElementById('btn-enhance-entry');

        if(item) {
            detailBox.innerHTML = `<b style="color:white; font-size:14px;">${item.name}</b> ${item.enhance?'+'+item.enhance:''}<br>${this.getItemDesc(item)}<br><span style="color:gold">ä»·å€¼: ${item.price}G</span>`;
            btnEquip.disabled = (item.type === 'material');
            btnEquip.innerText = item.type === 'consumable' ? "ä½¿ç”¨" : "è£…å¤‡";
            btnSell.disabled = false;
            btnEnhance.disabled = (item.type === 'material' || item.type === 'consumable');
            
            // Sync enhance tab text
            document.getElementById('enhance-target-name').innerText = `å½“å‰é€‰ä¸­: ${item.name} (+${item.enhance})`;
            document.getElementById('btn-do-enhance').disabled = (item.type === 'material' || item.type === 'consumable');
            document.getElementById('btn-do-enhance').innerText = `å¼ºåŒ– (æ¶ˆè€— ${(item.enhance+1)*50}G)`;
        } else {
            detailBox.innerHTML = "ç‚¹å‡»ç‰©å“æŸ¥çœ‹è¯¦æƒ…";
            btnEquip.disabled = true;
            btnSell.disabled = true;
            btnEnhance.disabled = true;
            document.getElementById('enhance-target-name').innerText = "è¯·åœ¨èƒŒåŒ…ä¸­å…ˆé€‰ä¸­ä¸€ä»¶è£…å¤‡";
            document.getElementById('btn-do-enhance').disabled = true;
        }
        this.renderInventory();
    }

    getItemDesc(item) {
        let desc = [];
        if(item.type === 'material') return "ææ–™";
        if(item.type === 'consumable') return "æ¶ˆè€—å“: " + JSON.stringify(item.effect);
        if(item.stats) {
            for(let k in item.stats) {
                desc.push(`${TEXT.stats[k] || k}: +${item.stats[k]}`);
            }
        }
        return desc.join('<br>');
    }

    renderEnemy() {
        let e = this.game.state.enemy;
        if(e) {
            document.getElementById('enemy-name').innerText = `Lv.${e.level} ${e.name}`;
            document.getElementById('enemy-visual').innerText = e.visual;
        }
    }

    log(msg, cls = "") {
        let area = document.getElementById('log-area');
        let div = document.createElement('div');
        div.className = `log-entry ${cls}`;
        let time = new Date().toTimeString().split(' ')[0];
        div.innerText = `[${time}] ${msg}`;
        area.prepend(div);
        if(area.children.length > 50) area.lastChild.remove();
    }
    
    clearLog() {
        document.getElementById('log-area').innerHTML = '';
    }

    switchTab(tabName) {
        let contents = document.getElementsByClassName('tab-content');
        for(let c of contents) c.classList.remove('active');
        document.getElementById(`tab-${tabName}`).classList.add('active');
        
        // update buttons look
        let btns = document.getElementById('main-tabs').children;
        for(let b of btns) b.classList.remove('active-tab');
        event.target.classList.add('active-tab'); // rough fix
    }

    renderMapList() {
        let list = document.getElementById('map-list');
        list.innerHTML = '';
        this.game.db.maps.forEach(map => {
            let btn = document.createElement('div');
            btn.className = `map-btn ${this.game.state.currentMapId === map.id ? 'active' : ''}`;
            btn.innerHTML = `<b>${map.name}</b> <br><small>æ€ªç‰©: ${map.mobs.map(m=>m.name).join(',')}</small>`;
            btn.onclick = () => {
                this.game.state.currentMapId = map.id;
                this.game.spawnEnemy(); 
                this.renderMapList();
                this.log(`å‰å¾€äº† ${map.name}`);
            };
            list.appendChild(btn);
        });
    }

    renderShop() {
    let grid = document.getElementById('shop-grid');
    grid.innerHTML = '';
    
    let materialItems = [];
    for (let itemId in this.game.db.items) {
        let item = this.game.db.items[itemId];
        if (item.type === 'material') {
            materialItems.push(itemId);
        }
    }
    
    materialItems.sort((a, b) => {
        let itemA = this.game.db.items[a];
        let itemB = this.game.db.items[b];
        return itemA.price - itemB.price;
    });
    
    materialItems.forEach(id => {
        let item = this.game.db.getItem(id);
        if(!item) return;
        
        let div = document.createElement('div');
        div.className = 'inv-item shop-item';
        div.style.borderColor = '#555';
        
        div.innerHTML = `
            <div style="font-size:24px; margin-bottom:2px;">ğŸ“¦</div>
            <div style="font-size:10px; text-align:center; line-height:1.1; height:20px; overflow:hidden;">
                ${item.name}
            </div>
            <div class="inv-count" style="color:gold; font-weight:bold; font-size:12px;">${item.price}G</div>
            <div class="item-tooltip">
                <b>${item.name}</b><br>
                ä»·æ ¼: <span style="color:gold">${item.price}G</span>
            </div>
        `;
        div.onclick = () => this.game.shop.buy(id);
        grid.appendChild(div);
    });
}
    
    // åœ¨ UI ç±»çš„ renderSkills æ–¹æ³•ä¸­ä¿®æ”¹
   renderSkills() {
    let list = document.getElementById('skill-list');
    list.innerHTML = '';
    document.getElementById('skill-points').innerText = this.game.player.skills.points;
    document.getElementById('skill-exp-level').innerText = this.game.player.skills.level;

    for(let id in this.game.db.skills) {
        let skill = this.game.db.skills[id];
        let learned = this.game.player.skills.learned.includes(id);
        let cdEnd = this.game.combat.skillCooldowns[id] || 0;
        let remainingCD = Math.max(0, cdEnd - Date.now());
        let cdText = remainingCD > 0 ? ` (å†·å´:${Math.ceil(remainingCD/1000)}s)` : '';
        
        // æ£€æŸ¥ç­‰çº§è¦æ±‚
        let canLearn = this.game.player.level >= skill.reqLvl;
        let levelText = canLearn ? '' : ` <small style="color:#f44336">(éœ€Lv.${skill.reqLvl})</small>`;
        
        let div = document.createElement('div');
        div.className = `skill-node ${learned ? 'learned' : ''} ${remainingCD > 0 ? 'on-cd' : ''}`;
        div.innerHTML = `
            <div>
                <b>${skill.name}</b> <small style="color:#666">${skill.branch}</small>${levelText}<br>
                <span style="color:#888; font-size:10px;">${skill.desc}${cdText}</span>
            </div>
            ${learned ? 
                '<span style="color:#4caf50">âœ”</span>' : 
                `<button onclick="game.learnSkill('${id}')" ${canLearn ? '' : 'disabled'}>
                    ${canLearn ? 'å­¦ä¹ ' : 'ç­‰çº§ä¸è¶³'}
                </button>`
            }
        `;
        list.appendChild(div);
    }
}
    
    renderCraft() {
    let bonus = this.game.player.craft.enhanceLevel * 2;
    document.getElementById('enhance-bonus').innerText = bonus;
    document.getElementById('craft-level').innerText = this.game.player.craft.synthLevel;
    
    let list = document.getElementById('recipe-list');
    list.innerHTML = '';
    
    // æ‰¹é‡åˆæˆæ§åˆ¶
    let batchCount = this.game.state.batchCraftCount || 1;
    if (isNaN(batchCount) || batchCount < 1) {
        batchCount = 1;
        this.game.state.batchCraftCount = 1;
    }
    
    list.innerHTML = `
        <div class="batch-controls">
            <span>æ‰¹é‡åˆæˆ:</span>
            <select id="batch-count" class="batch-select">
                <option value="1" ${batchCount === 1 ? 'selected' : ''}>1æ¬¡</option>
                <option value="10" ${batchCount === 10 ? 'selected' : ''}>10æ¬¡</option>
                <option value="50" ${batchCount === 50 ? 'selected' : ''}>50æ¬¡</option>
                <option value="100" ${batchCount === 100 ? 'selected' : ''}>100æ¬¡</option>
            </select>
            <div class="batch-info">
                æ€»æ¬¡æ•°: <span id="batch-total" class="batch-total">${batchCount}</span>
            </div>
        </div>
    `;
    
    // è®¾ç½®ä¸‹æ‹‰èœå•äº‹ä»¶
    let batchSelect = document.getElementById('batch-count');
    if (batchSelect) {
        batchSelect.onchange = (e) => {
            let newValue = parseInt(e.target.value);
            if (!isNaN(newValue) && newValue > 0) {
                this.game.state.batchCraftCount = newValue;
                this.renderCraft();
            }
        };
    }
    
    // æ¸²æŸ“é…æ–¹åˆ—è¡¨
    this.game.db.recipes.forEach(r => {
        let resultItem = this.game.db.getItem(r.result);
        if (!resultItem) return;
        
        let canCraft = this.game.player.craft.synthLevel >= r.reqLevel;
        let canCraftBatch = canCraft;
        let matInfo = [];
        
        // æ£€æŸ¥æ‰¹é‡åˆæˆææ–™
        for (let matId in r.mats) {
            let reqCount = r.mats[matId] * batchCount;
            let invItem = this.game.player.inventory.find(i => i.id === matId);
            let hasCount = invItem ? invItem.count : 0;
            let matItem = this.game.db.getItem(matId);
            
            if (hasCount < reqCount) {
                canCraftBatch = false;
            }
            
            matInfo.push({
                name: matItem ? matItem.name : matId,
                required: reqCount,
                has: hasCount,
                enough: hasCount >= reqCount
            });
        }
        
        let div = document.createElement('div');
        div.className = "skill-node";
        
        let matHTML = matInfo.map(mat => {
            let colorClass = mat.enough ? 'mat-ok' : 'mat-not-ok';
            return `<span class="mat-item ${colorClass}">${mat.name} ${mat.has}/${mat.required}</span>`;
        }).join(' ');
        
        div.innerHTML = `
            <div style="flex:1;">
                <b style="color: ${canCraft ? 'white' : '#666'}">${resultItem.name}</b> 
                <small style="color: #888">(Lv.${r.reqLevel})</small><br>
                <div class="recipe-mats">${matHTML}</div>
            </div>
            <button onclick="game.crafting.synthesizeBatch('${r.id}', ${batchCount})" 
                    ${canCraftBatch ? '' : 'disabled'}
                    style="min-width: 80px;">
                ${canCraftBatch ? `åˆæˆ${batchCount > 1 ? batchCount + 'æ¬¡' : ''}` : 'ææ–™ä¸è¶³'}
            </button>
        `;
        list.appendChild(div);
    });
}

    renderAchievements() {
        let list = document.getElementById('achievement-list');
        list.innerHTML = '';
        this.game.db.achievements.forEach(ach => {
             let div = document.createElement('div');
             div.className = `achievement ${ach.unlocked ? 'unlocked' : ''}`;
             div.innerHTML = `<b>${ach.name}</b> <span>${ach.unlocked ? 'å·²è¾¾æˆ' : 'æœªè¾¾æˆ'}</span>`;
             list.appendChild(div);
        });
    }
}

/**
 * æ ¸å¿ƒæ¸¸æˆæ§åˆ¶
 */
class Game {
     constructor() {
        this.player = {
            level: 1, exp: 0, gold: 0,
            stats: {}, baseStats: {},
            equipment: {}, inventory: [], maxInventory: 50,
            curHp: 100, curMp: 50,
            skills: { learned: [], points: 0, level: 1, exp: 0 },
            craft: { enhanceLevel: 1, enhanceExp: 0, synthLevel: 1, synthExp: 0 },
            // ä¿®æ”¹ï¼šæ‰©å±•æˆ˜æ–—åˆ†æ”¯ç³»ç»Ÿ
            combatBranches: {
                blunt: { level: 1, exp: 0, expToNext: 500 },
                sharp: { level: 1, exp: 0, expToNext: 500 },
                magic: { level: 1, exp: 0, expToNext: 500 },
                range: { level: 1, exp: 0, expToNext: 500 }
            }
        };

        this.state = {
    fighting: true,
    currentMapId: 0,
    enemy: null, 
    lastTick: Date.now(),
    selectedInvIndex: -1, 
    achievements: { 
        kills: 0, 
        totalLevel: 1, 
        totalGold: 0, 
        itemsCrafted: 0, 
        itemsEnhanced: 0
    },
batchCraftCount: 1,
    batchSelectedItems: new Set() 
};
        
        CONFIG.SLOTS.forEach(slot => this.player.equipment[slot] = null);

        this.db = new Database(); 
        this.ui = new UI(this);
        this.combat = new Combat(this);
        this.inventory = new Inventory(this);
        this.crafting = new Crafting(this);
        this.shop = new Shop(this);
        
        setInterval(() => this.tick(), 100); 
        setInterval(() => this.save(), 3000); 
        
        this.initGame();
    }

    initStats() {
        let s = {};
        [...CONFIG.STATS.DMG_TYPES, ...CONFIG.STATS.DEF_TYPES, ...CONFIG.STATS.BASE, ...CONFIG.STATS.COMBAT].forEach(k => s[k] = 0);
        return s;
    }

    initBaseStats() {
        let s = this.initStats();
        s.hp = 100; s.mp = 50; s.hpRegen = 1; s.mpRegen = 1; s.accuracy = 90; s.critDmg = 150;
        return s;
    }

    initGame() {
        this.player.baseStats = this.initBaseStats();
        if(!this.load()) {
            console.log("New Game Started");
            this.inventory.addItem('10951', 1); // åˆå§‹é€æŠŠå‰‘
            this.player.stats = this.calculateStats();
        }
        
        this.ui.renderAll();
        if(!this.state.enemy) this.spawnEnemy();
    }

    calculateStats() {
    let finalStats = {...this.player.baseStats};

    // å‡çº§å±æ€§å¢é•¿
    finalStats.hp += (this.player.level-1) * 10;
    finalStats.mp += (this.player.level-1) * 5;
    finalStats.hpRegen += (this.player.level-1) * 1;
    finalStats.mpRegen += (this.player.level-1) * 1;

    // ä¿®æ”¹ï¼šä½¿ç”¨åˆ†æ”¯ç­‰çº§è®¡ç®—ä¼¤å®³
    finalStats.blunt += this.getBranchDamage('blunt');
    finalStats.sharp += this.getBranchDamage('sharp');
    finalStats.magic += this.getBranchDamage('magic');
    finalStats.range += this.getBranchDamage('range');

    // ... è£…å¤‡å’ŒæŠ€èƒ½åŠ æˆä»£ç ä¿æŒä¸å˜
    for(let slot of CONFIG.SLOTS) {
        let item = this.player.equipment[slot];
        if(item) {
            for(let key in item.stats) {
                if(finalStats[key] !== undefined) {
                    let multiplier = 1 + (item.enhance || 0) * 0.1;
                    finalStats[key] += item.stats[key] * multiplier;
                }
            }
        }
    }
    
    this.player.skills.learned.forEach(skillId => {
        let skill = this.db.skills[skillId];
        if(skill && skill.type === 'passive') {
            for(let key in skill.stats) {
                 if(finalStats[key] !== undefined) finalStats[key] += skill.stats[key];
            }
        }
    });

    finalStats.dodge = Math.min(75, finalStats.dodge); 
    return finalStats;
}

// æ–°å¢ï¼šè®¡ç®—åˆ†æ”¯ä¼¤å®³æ–¹æ³•
getBranchDamage(branch) {
    let branchData = this.player.combatBranches[branch];
    if (!branchData) return 0;
    
    // ä¼¤å®³ = åˆ†æ”¯ç­‰çº§ Ã— 2ï¼ˆåŸºç¡€å€æ•°ï¼‰
    return branchData.level * 2;
}

getCurrentStats() {
    return this.player.currentStats || this.player.stats;
}
    tick() {
    let now = Date.now();
    let dt = now - this.state.lastTick;
    this.state.lastTick = now;

    // ç¡®ä¿æ•ˆæœå¤„ç†å§‹ç»ˆæ‰§è¡Œï¼ˆå³ä½¿æˆ˜æ–—æš‚åœï¼‰
    if (this.state.enemy) {
        this.combat.processBuffsAndEffects(now);
    }

    // åªåœ¨æˆ˜æ–—çŠ¶æ€ä¸‹æ‰§è¡Œæˆ˜æ–—æ›´æ–°
    if (this.state.fighting && this.state.enemy) {
        this.combat.update(dt);
    }

    if (now % 1000 < 100) {
        this.regen();
    }
    
    this.checkAchievements();
}

    regen() {
        let stats = this.player.stats;
        if(this.player.curHp < stats.hp) {
            this.player.curHp = Math.min(stats.hp, this.player.curHp + stats.hpRegen);
        }
        if(this.player.curMp < stats.mp) {
            this.player.curMp = Math.min(stats.mp, this.player.curMp + stats.mpRegen);
        }
        this.ui.updateBars();
    }

    spawnEnemy() {
        let map = this.db.maps[this.state.currentMapId];
        let mobTemplate = map.mobs[Math.floor(Math.random() * map.mobs.length)];
        
        let levelScaler = 1 + (map.level * 0.2);
        
        this.state.enemy = {
            name: mobTemplate.name,
            visual: mobTemplate.visual,
            level: map.level,
            maxHp: Math.floor(mobTemplate.hp * levelScaler),
            curHp: Math.floor(mobTemplate.hp * levelScaler),
            stats: {
                heavy: map.level * 2,
                light: map.level * 2,
                attack: Math.floor(mobTemplate.atk * levelScaler),
                type: mobTemplate.type,
                dodge: map.level
            },
            exp: Math.floor(mobTemplate.exp * levelScaler),
            gold: Math.floor(mobTemplate.gold * levelScaler),
            drops: mobTemplate.drops, 
            isBoss: mobTemplate.isBoss || false
        };
        this.ui.renderEnemy();
    }

    gainExp(type, amount) {
    if (type === 'char') {
        this.player.exp += amount;
        let req = this.getLevelReq(this.player.level);
        if(this.player.exp >= req) {
            this.player.level++;
            this.player.exp -= req;
            this.player.skills.points++;
            this.ui.log(`å‡çº§äº†ï¼å½“å‰ç­‰çº§ ${this.player.level}`, 'log-rare');
            this.player.stats = this.calculateStats();
            this.player.curHp = this.player.stats.hp;
            this.player.curMp = this.player.stats.mp;
        }
        this.ui.updateExp('char');
    } 
    else if (type === 'skill') {
        this.player.skills.exp += amount;
        let req = this.getLevelReq(this.player.skills.level);
        if(this.player.skills.exp >= req) {
            this.player.skills.level++;
            this.player.skills.exp -= req;
            this.ui.log(`æŠ€èƒ½ç†Ÿç»ƒåº¦æå‡! Lv.${this.player.skills.level}`);
        }
        this.ui.updateExp('skill');
    } 
    else if (type === 'enhance') {
        this.player.craft.enhanceExp += amount;
        let req = this.getLevelReq(this.player.craft.enhanceLevel);
        if(this.player.craft.enhanceExp >= req) {
            this.player.craft.enhanceLevel++;
            this.player.craft.enhanceExp -= req;
            this.ui.log(`å¼ºåŒ–ç†Ÿç»ƒåº¦æå‡! Lv.${this.player.craft.enhanceLevel}`);
        }
        this.ui.updateExp('enhance');
    } 
    else if (type === 'synth') {
        this.player.craft.synthExp += amount;
        let req = this.getLevelReq(this.player.craft.synthLevel);
        if(this.player.craft.synthExp >= req) {
            this.player.craft.synthLevel++;
            this.player.craft.synthExp -= req;
            this.ui.log(`åˆæˆç†Ÿç»ƒåº¦æå‡! Lv.${this.player.craft.synthLevel}`);
        }
        this.ui.updateExp('craft');
    }
    // æ–°å¢ï¼šåˆ†æ”¯ç»éªŒè·å–
    else if (['blunt', 'sharp', 'magic', 'range'].includes(type)) {
        this.gainBranchExp(type, amount);
    }
}

gainBranchExp(branch, amount) {
    let branchData = this.player.combatBranches[branch];
    if (!branchData || branchData.level >= 30) {
        if (branchData && branchData.level >= 30 && !branchData.maxLevelNotified) {
            this.ui.log(`${TEXT.stats[branch]}å·²è¾¾åˆ°æœ€å¤§ç­‰çº§ Lv.30!`, "log-rare");
            branchData.maxLevelNotified = true;
        }
        return;
    }
    
    branchData.exp += amount;
    
    let leveledUp = false;
    while (branchData.exp >= branchData.expToNext && branchData.level < 30) {
        leveledUp = true;
        branchData.exp -= branchData.expToNext;
        branchData.level++;
        
        let nextExp = branchData.expToNext * 2;
        branchData.expToNext = Math.min(nextExp, 60000);
        
        this.ui.log(`${TEXT.stats[branch]}ç†Ÿç»ƒåº¦æå‡åˆ° Lv.${branchData.level}!`, "log-gain");
        this.player.stats = this.calculateStats();
        
        if (branchData.level >= 30) {
            this.ui.log(`${TEXT.stats[branch]}å·²è¾¾åˆ°å®—å¸ˆçº§ Lv.30!`, "log-rare");
            branchData.maxLevelNotified = true;
        }
    }
    
    // åªåœ¨å‡çº§æ—¶æ›´æ–°UIï¼Œé¿å…é¢‘ç¹æ›´æ–°
    if (leveledUp) {
        this.ui.renderStats(); // æˆ–è€… this.ui.updateBranchExp(branch);
    }
    // æ³¨é‡Šæ‰é¢‘ç¹çš„UIæ›´æ–°ï¼šthis.ui.updateBranchExp(branch);

   
}

    getLevelReq(lvl) {
        return Math.floor(CONFIG.EXP_BASE * Math.pow(lvl, CONFIG.EXP_FACTOR));
    }

    toggleFight() {
        this.state.fighting = !this.state.fighting;
        document.getElementById('toggle-fight-btn').innerText = this.state.fighting ? "æš‚åœæˆ˜æ–—" : "å¼€å§‹æˆ˜æ–—";
    }

    checkAchievements() {
        this.state.achievements.totalLevel = this.player.level;
        this.state.achievements.totalGold = Math.max(this.state.achievements.totalGold, this.player.gold);
        
        let changed = false;
        this.db.achievements.forEach(ach => {
            if(!ach.unlocked) {
                let val = this.state.achievements[ach.type];
                if(val >= ach.target) {
                    ach.unlocked = true;
                    this.ui.log(`è·å¾—æˆå°±: ${ach.name}!`, 'log-rare');
                    changed = true;
                }
            }
        });
        if(changed) this.ui.renderAchievements();
    }
    
    // åœ¨ Game ç±»ä¸­ä¿®æ”¹ save å’Œ load æ–¹æ³•
save(manual = false) {
    let data = {
        version: "2.0", // æ·»åŠ ç‰ˆæœ¬æ ‡è¯†
        player: {
            level: this.player.level,
            exp: this.player.exp,
            gold: this.player.gold,
            inventory: this.player.inventory,
            equipment: this.player.equipment,
            skills: this.player.skills,
            craft: this.player.craft,
            combatBranches: this.player.combatBranches,
            curHp: this.player.curHp,
            curMp: this.player.curMp
        },
        state: {
            currentMapId: this.state.currentMapId,
            achievements: this.state.achievements
        },
        timestamp: Date.now()
    };
    
    try {
        localStorage.setItem('RabbitRPG_Save_V2', JSON.stringify(data));
        if(manual) this.ui.log("æ¸¸æˆå·²ä¿å­˜", "gray");
    } catch(e) { 
        console.error("Save failed", e);
        this.ui.log("å­˜æ¡£å¤±è´¥: " + e.message, "log-dmg");
    }
}

load() {
    let raw = localStorage.getItem('RabbitRPG_Save_V2');
    if (!raw) {
        console.log("No save found, starting new game");
        return false;
    }
    
    try {
        let data = JSON.parse(raw);
        console.log("Loading save data:", data);
        
        // é‡ç½®æ¸¸æˆçŠ¶æ€ï¼ˆç¡®ä¿å¹²å‡€çš„åˆå§‹çŠ¶æ€ï¼‰
        this.resetGame();
        
        // åŠ è½½ç©å®¶æ•°æ®
        if (data.player) {
            this.player.level = data.player.level || 1;
            this.player.exp = data.player.exp || 0;
            this.player.gold = data.player.gold || 0;
            this.player.inventory = data.player.inventory || [];
            this.player.equipment = data.player.equipment || {};
            this.player.skills = data.player.skills || { learned: [], points: 0, level: 1, exp: 0 };
            this.player.craft = data.player.craft || { enhanceLevel: 1, enhanceExp: 0, synthLevel: 1, synthExp: 0 };
            this.player.combatBranches = data.player.combatBranches || this.initCombatBranches();
            this.player.curHp = data.player.curHp || 100;
            this.player.curMp = data.player.curMp || 50;
        }
        
        // åŠ è½½æ¸¸æˆçŠ¶æ€
        if (data.state) {
            this.state.currentMapId = data.state.currentMapId || 0;
            this.state.achievements = data.state.achievements || { kills: 0, totalLevel: 1, totalGold: 0, itemsCrafted: 0, itemsEnhanced: 0 };
        }
        
        // é‡æ–°è®¡ç®—å±æ€§
        this.player.stats = this.calculateStats();
        
        // ç¡®ä¿å½“å‰HP/MPä¸è¶…è¿‡æœ€å¤§å€¼
        this.player.curHp = Math.min(this.player.curHp, this.player.stats.hp);
        this.player.curMp = Math.min(this.player.curMp, this.player.stats.mp);
        
        this.ui.log("å­˜æ¡£è¯»å–æˆåŠŸï¼", "log-gain");
        console.log("Loaded player skills:", this.player.skills);
        return true;
        
    } catch(e) {
        console.error("Load failed", e);
        this.ui.log("å­˜æ¡£æŸåï¼Œå¼€å§‹æ–°æ¸¸æˆ", "log-dmg");
        this.resetGame();
        return false;
    }
}

// åœ¨ Game ç±»çš„æ„é€ å‡½æ•°åæ·»åŠ è¿™äº›æ–¹æ³•
startBatchSell() {
    this.state.batchSellMode = true;
    this.state.batchSelectedItems = new Set();
    this.ui.renderInventory();
    this.ui.log("è¿›å…¥æ‰¹é‡å‡ºå”®æ¨¡å¼ - ç‚¹å‡»ç‰©å“è¿›è¡Œé€‰æ‹©", "log-gain");
}

cancelBatchSell() {
    this.state.batchSellMode = false;
    this.state.batchSelectedItems = new Set();
    this.ui.renderInventory();
    this.ui.log("å·²å–æ¶ˆæ‰¹é‡å‡ºå”®", "log-dmg");
}

confirmBatchSell() {
    if (this.state.batchSelectedItems.size === 0) {
        this.ui.log('è¯·å…ˆé€‰æ‹©è¦å‡ºå”®çš„ç‰©å“', 'log-dmg');
        return;
    }
    
    let totalGold = 0;
    let soldItems = [];
    
    // ä»åå¾€å‰åˆ é™¤ï¼Œé¿å…ç´¢å¼•å˜åŒ–
    let sortedIndices = Array.from(this.state.batchSelectedItems).sort((a, b) => b - a);
    
    sortedIndices.forEach(index => {
        let item = this.player.inventory[index];
        if (item) {
            let sellPrice = item.price;
            totalGold += sellPrice * item.count;
            soldItems.push(`${item.name} x${item.count}`);
            this.player.inventory.splice(index, 1);
        }
    });
    
    this.player.gold += totalGold;
    this.ui.log(`æ‰¹é‡å‡ºå”®äº† ${soldItems.length} ä»¶ç‰©å“ï¼Œè·å¾— ${totalGold} é‡‘å¸`, 'log-gain');
    
    // é€€å‡ºæ‰¹é‡å‡ºå”®æ¨¡å¼
    this.cancelBatchSell();
    this.ui.renderAll();
}

// æ–°å¢ï¼šé‡ç½®æ¸¸æˆæ–¹æ³•
resetGame() {
    this.player = {
        level: 1, exp: 0, gold: 0,
        stats: {}, baseStats: this.initBaseStats(),
        equipment: {}, inventory: [], maxInventory: 150,
        curHp: 100, curMp: 50,
        skills: { learned: [], points: 0, level: 1, exp: 0 },
        craft: { enhanceLevel: 1, enhanceExp: 0, synthLevel: 1, synthExp: 0 },
        combatBranches: this.initCombatBranches()
    };
    
    this.state = {
        fighting: true,
        currentMapId: 0,
        enemy: null,
        lastTick: Date.now(),
        selectedInvIndex: -1,
        achievements: { kills: 0, totalLevel: 1, totalGold: 0, itemsCrafted: 0, itemsEnhanced: 0 }, 
        batchSellMode: false,        // æ˜¯å¦å¤„äºæ‰¹é‡å‡ºå”®æ¨¡å¼
        batchSelectedItems: new Set() // é€‰ä¸­çš„ç‰©å“ç´¢å¼•é›†åˆ
    };
    
    // åˆå§‹åŒ–è£…å¤‡æ§½ä½
    CONFIG.SLOTS.forEach(slot => this.player.equipment[slot] = null);
}

// æ–°å¢ï¼šåˆå§‹åŒ–æˆ˜æ–—åˆ†æ”¯
initCombatBranches() {
    return {
        blunt: { level: 1, exp: 0, expToNext: 500 },
        sharp: { level: 1, exp: 0, expToNext: 500 },
        magic: { level: 1, exp: 0, expToNext: 500 },
        range: { level: 1, exp: 0, expToNext: 500 }
    };
}}

// Global Actions
window.game = new Game();
window.doCraft = function(recipeId, count) {
    if (window.game && window.game.crafting) {
        let result = window.game.crafting.synthesizeBatch(recipeId, count);
        
        if (result.success > 0) {
            // æˆåŠŸæ¶ˆæ¯å·²ç»åœ¨æ–¹æ³•å†…éƒ¨æ˜¾ç¤º
        } else if (result.message) {
            window.game.ui.log(result.message, "log-dmg");
        }
    }
};
window.game.learnSkill = function(id) {
    let skill = this.db.skills[id];
    if (!skill) return;
    if (this.player.level < skill.reqLvl) {
        alert(`ç­‰çº§ä¸è¶³ï¼éœ€è¦ç­‰çº§ ${skill.reqLvl} æ‰èƒ½å­¦ä¹ æ­¤æŠ€èƒ½`);
        return;
    }
    if (this.player.skills.learned.includes(id)) {
        alert("å·²ç»å­¦ä¹ äº†æ­¤æŠ€èƒ½");
        return;
    }
    if(this.player.skills.points > 0) {
        this.player.skills.points--;
        this.player.skills.learned.push(id);
        this.ui.renderSkills();
        this.player.stats = this.calculateStats();
        this.ui.renderStats();
        this.ui.log(`å­¦ä¼šäº†æ–°æŠ€èƒ½: ${skill.name}`, "log-gain");
    } else {
        alert("æŠ€èƒ½ç‚¹ä¸è¶³");
    }
};
</script>
</body>
</html>
